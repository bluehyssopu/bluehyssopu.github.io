<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>2020除夕祝福</title>
    <url>/posts/fabd8e26.html</url>
    <content><![CDATA[<h2 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言 📢</h2>
<p>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp本篇随笔初发于2020年除夕夜个人QQ空间，最近在整理过去的一些手稿，部署至博客上做记录。</p>
<h2 id="愿"><a class="markdownIt-Anchor" href="#愿"></a> 愿 📝</h2>
<center>愿每次雨掸霜叶都能掸落一片过往</center>
<center>愿每次风吹麦浪都能奔向理想远方</center>
<center>愿每次卿推开窗都能赏烟波浦江上</center>
<center>愿洛水不凉 老船不晃 人不惆怅</center>
 <p>&nbsp&nbsp</p>
<center>愿每缕人间烟火都能寻于庙堂之上</center>
<center>愿每寸极乐净土都能显于坊市之间</center>
<center>愿每道寒星微光都能散于江湖之侧</center>
<center>愿每个追梦之人都能站于高山之巅</center>
 <p>&nbsp</p>
<center>愿你酒尽歌终之后 衾被尚温</center>
<center>愿你月照花枝之时 呼吸尚稳</center>
<center>愿你他朝风雨之际 重门尚开</center>
<center>愿你人生聚散之前 故事尚可</center>
<center>愿你出走漂泊半生 归来仍现此间少年</center>
<center>虽未伏天 尚能照这三寸人间</center>
  <p>&nbsp</p>
<center>愿你简单依旧 一本字帖仍能轻易上头</center>
<center>愿你快乐依旧 尽管拖延仍能轻松满足</center>
<center>愿你中二依旧 经历黑暗仍能坚信有光</center>
<center>做着那个愿苍生如龙 愿亡魂安息 愿此心光明的梦</center>
<center>愿你能够早日建立属于自己的伊甸园</center>
<center>愿你能够早日找到适合自己的塔帕斯</center>
<center>愿你能够早日获得忠于自己的贾维斯</center>
  <p>&nbsp</p>
<center>最后</center>
<center>愿你所见如你所想 愿这盛世如你所愿</center>
<center>愿、愿……</center>
<br />
<div class="note info flat"><p>文中许多措辞结合个人生活经历，引用许嵩歌词及看过的小说情节，如有侵权，请留言联系我删除。</p>
</div>
]]></content>
      <categories>
        <category>年度总结</category>
      </categories>
      <tags>
        <tag>年度总结</tag>
        <tag>新年祝福</tag>
        <tag>2020</tag>
        <tag>随笔</tag>
      </tags>
  </entry>
  <entry>
    <title>2022新年祝福</title>
    <url>/posts/dbbc679a.html</url>
    <content><![CDATA[<style>
.post p {
    text-indent: 2rem;
}
</style>
<h2 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言 📢</h2>
<p>本篇随笔写于2021年除夕，首发于个人QQ空间，部分所用图片取自天行九歌动画、涂鸦王国等网图，如有侵权，请留言联系我删除。整理手稿ing</p>
<h2 id="也许"><a class="markdownIt-Anchor" href="#也许"></a> 也许 📝</h2>
<p>正值双十年华 总觉得该写点什么 可又感到无话可说 徘徊于此</p>
<p>时至今日 友历经三七岁月 生日快乐 我也有写一点东西的必要了</p>
<p>​    ——也许你会扔掉许多东西 但希望你不会丢掉自己 如果有一天我把自己弄丢了 记得来找我</p>
<p>未来充满了许多惊喜</p>
<p>你会遇到许多的人或事</p>
<p>也许是那桃树下 身着白衣 腰别酒葫 手握书卷的少年</p>
<p>也许是那古堡中 凭栏而立 睥睨北荒 皑皑血衣的侯爷</p>
<p>也许是那墙角边 爪没故苔 步履蹒跚 形色枯槁的忠犬</p>
<p>也许是那轮椅上 手按长弓 白发难歇 饮恨而亡的旧主</p>
<p>也许是那九州内 揭竿而起 醉战八方 未知始终的枭雄</p>
<p>
    &nbsp;
</p>
<p>也许是那市井间 博众人一笑的说书人 口若悬河 谈吐风骚</p>
<p>也许是那草丛里 趁射手不备的第六者 谋定后动 闪现绝杀</p>
<p>也许是那河泉畔 视荆棘草芥的小浣熊 细嗅蔷薇 隐而不发</p>
 <p>
     &nbsp;
 </p>
<p>也许你会丢许多东西 或丢失 或丢弃</p>
<p>也许是土壳中随手掏出的一把方糖</p>
<p>也许是大树脚下悄悄探头的白菜梗和大番薯</p>
<p>也许是冰封王座旁浑身鲜血仍怀抱火种的休罗斯公爵</p>
<p>也许是静谧时分背靠大树只为守护夜色中那轮明月的孤寂身影</p>
<p>但总有些人 永远地定格在了那一年的记忆里</p>
 <p>&nbsp;</p>
<p>公子执羽扇 闲看暮雨萧萧</p>
<p>羊肠浸野草 不见函谷繁花</p>
<p>玖绝凝焦土 未映群星璀璨</p>
<p>红叶穷碧落  又访香山残雪</p>
<p>&nbsp;</p>
<p>你曾于初入世事时感慨自身的渺小</p>
<p>也曾怀揣着未闻花名时的意气风发</p>
<p>偶尔怀念在公式夹缝中写诗的枯燥生活</p>
<p>也曾邂逅在南方小城里氤氲的熟悉雾气</p>
<p>没准 你还能瞥见那个戴着渔夫帽的少年</p>
<p>或者 那个充满着青桔味的夏天……</p>
<p>&nbsp</p>
<p>当然 你会遇到许多头疼的难题</p>
<p>但还希望你不要轻易忘记</p>
<p>那些你勾过的奇怪曲线</p>
<p>那些你画过的粗糙相片</p>
<p>那些你做过的离谱习题</p>
<p>那些你看过的老巷黄昏</p>
<p>那些你听过的纸上风光</p>
<p>那些你刷过的脑残影剧</p>
<p>那些你躺过的专业科目</p>
<p>以及那些年 你喜欢的那群人</p>
<p>&nbsp</p>
<p>我记得 你还总爱画一些粗糙的相片</p>
<p>递给那夜里爱读诗的少年 多年以后</p>
<p>愿你还能在立秋 绘出属于自己的心拍数</p>
<p>愿你还能在莺飞时节 摇曳于那一片醉春花荫</p>
<p>愿你还能游过泡沫般的盛夏 拨动着轮轴般的年年</p>
<p>愿你在玉山琼林寻未归途的小鹿时 还有人提醒你看路</p>
<p>有时也会感慨 随你几分像？我想了又想 却又留住了谁的模样呢</p>
<p>白发戴花君莫笑 岁月从不败美人</p>
<p>愿新年 胜旧年</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/04/02/TZOf7JBMmKWLqVc.jpg" width=300px>
<div class="note info flat"><p>原文长图(图文版)：<a href="https://cdn.jsdelivr.net/gh/bluehyssopu/storepicgo@latest/2021.png">https://cdn.jsdelivr.net/gh/bluehyssopu/storepicgo@latest/2021.png</a></p>
</div>
]]></content>
      <categories>
        <category>年度总结</category>
      </categories>
      <tags>
        <tag>年度总结</tag>
        <tag>新年祝福</tag>
        <tag>随笔</tag>
        <tag>2021</tag>
      </tags>
  </entry>
  <entry>
    <title>CsBooksOfUPC</title>
    <url>/posts/b4461d70.html</url>
    <content><![CDATA[<h2 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言</h2>
<p>本篇博客用于提供帝国男子石油高中计算机学院的专业课教材封面，<strong>大类学科相同课程 会放在第一个表格内，选修课同理</strong>。</p>
<p>方便各位大学僧在新学期购买旧书，或寻找对应的电子版，减少日常开销。</p>
<p>&nbsp</p>
<h2 id="教材封面"><a class="markdownIt-Anchor" href="#教材封面"></a> 教材封面</h2>
<ul>
<li><strong>计算机科学与技术</strong></li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">课程名</th>
<th style="text-align:center">教材名称</th>
<th style="text-align:center">教材封面</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">离散数学</td>
<td style="text-align:center">离散数学（古天龙 常亮版）</td>
<td style="text-align:center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/31/4WqvCZAU6NwB7bm.jpg" alt="" /></td>
</tr>
<tr>
<td style="text-align:center">数据库原理</td>
<td style="text-align:center">数据库系统概论（第五版）</td>
<td style="text-align:center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/31/qWNCFl9UrMyJaKD.jpg" alt="2" style="zoom:80%;" /></td>
</tr>
<tr>
<td style="text-align:center">计算机网络原理</td>
<td style="text-align:center">计算机网络（第八版 谢希仁）</td>
<td style="text-align:center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/31/8WBC7pMuK2R6m3P.jpg" alt="O1CN01jBH6kQ1NIZPXZPVx4_!!0-item_pic.jpg_430x430q90" style="zoom:80%;" /></td>
</tr>
<tr>
<td style="text-align:center">编译原理</td>
<td style="text-align:center">编译原理（第三版）</td>
<td style="text-align:center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/31/kGh2cejsHaNyPCr.jpg" alt="O1CN013FYoQc2LDsD3qA1Ih_!!281529659.png_60x60q90" style="zoom:80%;" /></td>
</tr>
<tr>
<td style="text-align:center">计算机图形学</td>
<td style="text-align:center">计算机图形学</td>
<td style="text-align:center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/31/vLKJsE9IyiUr4a5.jpg" alt="O1CN01jkviV01WHxPxdhAJl_!!0-item_pic.jpg_400x400" style="zoom:80%;" /></td>
</tr>
<tr>
<td style="text-align:center">计算方法</td>
<td style="text-align:center">计算方法第二版</td>
<td style="text-align:center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/31/eXSck5MN6GxhvEC.jpg" alt="UE5CDMAQY2ILO5MQP4KLN" style="zoom:18%;" /></td>
</tr>
<tr>
<td style="text-align:center">软件工程</td>
<td style="text-align:center">软件工程导论</td>
<td style="text-align:center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/31/1XE4J5mTBviwIVt.jpg" alt="O1CN01t6aQwD1WH2bxX8xHX" style="zoom:80%;" /></td>
</tr>
<tr>
<td style="text-align:center">数字逻辑电路</td>
<td style="text-align:center">数字电子技术基础（第六版）</td>
<td style="text-align:center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/31/5C7iwjLqfR8WybE.jpg" alt="O1CN01nKS1EJ1ZPEaIBRwt63031553186" style="zoom:80%;" /></td>
</tr>
<tr>
<td style="text-align:center">计算机组成原理</td>
<td style="text-align:center">计算机组成与系统结构（袁春凤）</td>
<td style="text-align:center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/31/joEbnqhHF6l52cQ.jpg" alt="62C6XMYDR472AQBB1W" style="zoom:22%;" /></td>
</tr>
<tr>
<td style="text-align:center">人工智能</td>
<td style="text-align:center">人工智能导论</td>
<td style="text-align:center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/31/yeGaBAzFOEWQJlg.jpg" alt="O1CN01BwVnCk1LRc0UBsIC21111321296" style="zoom:78%;" /></td>
</tr>
<tr>
<td style="text-align:center">数据结构与算法</td>
<td style="text-align:center">数据结构（陈越）</td>
<td style="text-align:center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/31/IxrTVb3kpqwlsDa.jpg" alt="O1CN01tfj7D81sn1s0xsULy" style="zoom:80%;" /></td>
</tr>
<tr>
<td style="text-align:center">计算机操作系统</td>
<td style="text-align:center">计算机操作系统原理（张琼声）</td>
<td style="text-align:center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/31/xe5PEAJFGHRWZgh.jpg" alt="O1CN01f4taCj1pwhOudtcwQ" style="zoom:80%;" /></td>
</tr>
<tr>
<td style="text-align:center">程序设计（JAVA）</td>
<td style="text-align:center">JAVA2 实用教程</td>
<td style="text-align:center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/31/6Jpj7NKOanDR9Vf.jpg" alt="O1CN01cuixMB1hZmen1hpys" style="zoom:80%;" /></td>
</tr>
<tr>
<td style="text-align:center">数学实验</td>
<td style="text-align:center">数学实验（富媒体）</td>
<td style="text-align:center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/31/2xrEoilvWUXeqJZ.jpg" alt="O1CN01GzG9vj1cUDdzncdM7" style="zoom:80%;" /></td>
</tr>
<tr>
<td style="text-align:center">Web应用开发</td>
<td style="text-align:center">PHP Web应用开发</td>
<td style="text-align:center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/31/IvNaSgdDT67KpFo.jpg" alt="TB134KbekfbuJjSsrbXXb6bVXa" style="zoom:80%;" /></td>
</tr>
<tr>
<td style="text-align:center">数字图像处理</td>
<td style="text-align:center">图像处理和分析教程（第二版）</td>
<td style="text-align:center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/31/yC5jwBTrEIqLlzm.jpg" alt="O1CN01iBQcyQ2NSeJiNd1kc" /></td>
</tr>
<tr>
<td style="text-align:center">现代密码学</td>
<td style="text-align:center">现代密码学（何大可 彭渊 唐小虎）</td>
<td style="text-align:center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/31/yhZMtOJadmDPzx6.jpg" alt="O1CN01iGfvkt1YgLnQ9UJes" style="zoom:80%;" /></td>
</tr>
<tr>
<td style="text-align:center">信息安全</td>
<td style="text-align:center">信息安全概论（李剑）</td>
<td style="text-align:center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/31/8RAQdKFs1IBignf.jpg" alt="O1CN015cPrfx1rN5bk5Lk3T" style="zoom:70%;" /></td>
</tr>
<tr>
<td style="text-align:center">数学建模</td>
<td style="text-align:center">数学建模算法与应用</td>
<td style="text-align:center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/31/icLlZwH2f5EaDBt.jpg" alt="O1CN01hjZkbh1LxDMhvv4H0" style="zoom:80%;" /></td>
</tr>
<tr>
<td style="text-align:center">机器学习</td>
<td style="text-align:center">机器学习原理、算法与应用</td>
<td style="text-align:center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/31/pRcfMj1WBa4Hdb9.jpg" alt="O1CN017BIErL1cw9kFYsD1n" style="zoom:80%;" /></td>
</tr>
<tr>
<td style="text-align:center">程序设计（C/C++）</td>
<td style="text-align:center">程序设计与问题求解</td>
<td style="text-align:center">学校自己印的黄皮教材，质朴的一批，自己买吧</td>
</tr>
<tr>
<td style="text-align:center">工程概论</td>
<td style="text-align:center">2022初设立，暂无教材</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">智慧油气田</td>
<td style="text-align:center">无教材</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">程序设计（Python）</td>
<td style="text-align:center">教材未知</td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>
<ul>
<li>软件工程</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">课程名</th>
<th style="text-align:center">教材名称</th>
<th style="text-align:center">教材封面</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">软件测试与质量</td>
<td style="text-align:center">软件测试技术</td>
<td style="text-align:center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/31/LHkEc4xzVQ9WU8D.jpg" alt="95A0709DFBA79224A8251FBECDD64BE2" style="zoom: 35%;" /></td>
</tr>
<tr>
<td style="text-align:center">软件体系结构</td>
<td style="text-align:center">软件体系结构原理、方法与实践</td>
<td style="text-align:center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/31/BdLDZp2fnQhjEXM.jpg" alt="O1CN01IfBzyE1CP16vERXn0" style="zoom:70%;" /></td>
</tr>
<tr>
<td style="text-align:center">大数据技术与应用</td>
<td style="text-align:center">大数据技术原理与应用</td>
<td style="text-align:center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/31/HFvRrUMx7Dbhunf.jpg" alt="O1CN01yRj5Tq2LISHLdrZMX" style="zoom: 40%;" /></td>
</tr>
<tr>
<td style="text-align:center">移动应用开发技术</td>
<td style="text-align:center">基于Android Studio的应用程序开发教程</td>
<td style="text-align:center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/31/L5kS6bfeHYTQJWy.jpg" alt="TB2IH7NnpkoBKNjSZFEXXbrEVXa" style="zoom:80%;" /></td>
</tr>
<tr>
<td style="text-align:center">单片机原理与应用</td>
<td style="text-align:center">MCS-51单片机原理.接口及应用</td>
<td style="text-align:center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/31/P2RIOtFC5NAk9ls.jpg" alt="O1CN01dXI53u2K7dKXIkrM9" style="zoom:80%;" /></td>
</tr>
<tr>
<td style="text-align:center">EDA设计基础</td>
<td style="text-align:center">数字系统设计与Verilog HDL(王金明)</td>
<td style="text-align:center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/31/IwTCexLcYHuEbOr.jpg" alt="O1CN01w4hY9p1HDB5gInmde" style="zoom:80%;" /></td>
</tr>
<tr>
<td style="text-align:center">软件项目管理</td>
<td style="text-align:center">暂无</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">软件需求过程</td>
<td style="text-align:center">暂无</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">软件工程过程</td>
<td style="text-align:center">暂无</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">基于开源的项目开发</td>
<td style="text-align:center">暂无</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">软件工程经济学</td>
<td style="text-align:center">暂无</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">嵌入式系统软件开发</td>
<td style="text-align:center">暂无</td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>
<ul>
<li>智能科学与技术</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">课程名</th>
<th style="text-align:center">教材名称</th>
<th style="text-align:center">教材封面</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">自然语言处理</td>
<td style="text-align:center">自然语言处理（何晗）</td>
<td style="text-align:center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/31/kEznJhjeHM26mOw.jpg" alt="O1CN01lFfMDy2AqNqyXxxME" style="zoom: 77%;" /></td>
</tr>
<tr>
<td style="text-align:center">可视化导论</td>
<td style="text-align:center">可视化导论</td>
<td style="text-align:center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/31/wnTIDRU5jq9Btyf.jpg" alt="7872777F3B1E0B165A08D00AA97F0B08" style="zoom: 30%;" /></td>
</tr>
<tr>
<td style="text-align:center">计算机视觉</td>
<td style="text-align:center">计算机视觉基础(宫文娟)</td>
<td style="text-align:center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/31/JYBGUfD7F2QjPZ6.jpg" alt="img" style="zoom: 45%;" /></td>
</tr>
</tbody>
</table>
]]></content>
      <categories>
        <category>教材</category>
      </categories>
      <tags>
        <tag>教材</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue面试题-01</title>
    <url>/posts/a3e1ba6c.html</url>
    <content><![CDATA[<h2 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言</h2>
<p>马上要秋招了，搜集整理了一些Vue面试题，包括组件、指令、API等相关内容，巩固基础😎秋招冲冲冲！！！本篇包括：</p>
<p>✅ webpack和vite的对比<br />
✅ v-if和v-show的区别<br />
✅ 绑定class的数组用法<br />
✅ 组件中data为什么是函数<br />
✅ 生命周期</p>
<h2 id="webpack-和-vite对比"><a class="markdownIt-Anchor" href="#webpack-和-vite对比"></a> Webpack 和 Vite对比</h2>
<blockquote>
<p>vite凭什么比webpack快</p>
</blockquote>
<p><strong>webpack启动需要打包</strong></p>
<p><code>webpack dev serve</code>在启动时，会把所有的包都<code>build</code>一遍，从入口文件起索引整个项目的文件，编译成一个或多个js文件，不管模块是否被执行，都会被打包到bundler里。随着项目的复杂程度上升，模块增加，打包后的bundler也会越来越大，打包速度会越来越<strong>慢</strong>。即项目越复杂，启动时间越来越长。</p>
<p><strong>Vite在启动时不需要打包，不需要拆分模块的依赖，不需要编译，启动速度非常快。</strong></p>
<p>由于现代浏览器本身就支持ES Module，会自动向依赖的Module发出请求。vite充分利用这一点，将开发环境下的模块文件，就作为浏览器要执行的文件，而不是像webpack那样进行打包合并。</p>
<p><strong>vite 请求哪个模块再对该模块进行实时编译 webpack全部编译</strong></p>
<p>当浏览器请求某个模块时，再根据需要对模块内容进行编译。这种按需动态编译的方式，极大的缩减了编译时间，项目越复杂、模块越多，vite的优势越明显。 在HMR方面，当改动了一个模块后，仅需让浏览器重新请求该模块即可，不像webpack那样需要把该模块的相关依赖模块全部编译一次，效率更高。 当需要打包到生产环境时，vite使用传统的rollup进行打包，因此，vite的主要优势在开发阶段。另外，由于vite利用的是ES Module，因此在代码中不可以使用CommonJS</p>
<p><strong>在底层实现上</strong>，vite是基于esbuild预构建的，esbuild使用go语言编写，比js编写的打包器预构建快10-100倍，js的操作一般是毫秒级，但go达到了纳秒级</p>
<p>参考链接：</p>
<div class="tag link"><a class="link-card" title="Webpack原理与实践（一）：打包流程" href="https://segmentfault.com/a/1190000016984434"><div class="left"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/link.png"/></div><div class="right"><p class="text">Webpack原理与实践（一）：打包流程</p><p class="url">https://segmentfault.com/a/1190000016984434</p></div></a></div> 
<div class="tag link"><a class="link-card" title="vite和webpack的区别" href="https://juejin.cn/post/6893699833425559559"><div class="left"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/link.png"/></div><div class="right"><p class="text">vite和webpack的区别</p><p class="url">https://juejin.cn/post/6893699833425559559</p></div></a></div> 
<div class="tag link"><a class="link-card" title="Vite 和Webpack 的核心差异" href="https://blog.csdn.net/weixin_40906515/article/details/114313102"><div class="left"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/link.png"/></div><div class="right"><p class="text">Vite 和Webpack 的核心差异</p><p class="url">https://blog.csdn.net/weixin_40906515/article/details/114313102</p></div></a></div> 
<h2 id="v-if-和-v-show的区别"><a class="markdownIt-Anchor" href="#v-if-和-v-show的区别"></a> v-if 和 v-show的区别</h2>
<p>首先，<code>v-show</code> 只是 CSS 级别的 <code>display: none;</code> 和 <code>display: block;</code> 之间的切换，而 <code>v-if</code> 决定是否会选择代码块的内容（或组件）。</p>
<p>当需要非常频繁地切换时，使用 <code>v-show</code>；一次性渲染完（运行时条件很少改变），使用 <code>v-if</code>。</p>
<p><strong>使用 <code>v-if</code> 在性能优化上有什么经验？</strong></p>
<p>因为当 <code>v-if=&quot;false&quot;</code> 时，内部组件是不会渲染的，所以在特定条件才渲染部分组件（或内容）时，可以先将条件设置为 <code>false</code>，需要时（或异步，比如 $nextTick）再设置为 <code>true</code>，这样可以优先渲染重要的其它内容，合理利用，可以进行性能优化。</p>
<blockquote>
<p><code>v-if</code> 是“真正”的条件渲染，因为它会确保在切换过程中，条件块内的事件监听器和子组件适当地被销毁和重建。<code>v-if</code> 也是<strong>惰性的</strong>：如果在初始渲染时条件为假，则什么也不做——直到条件第一次变为真时，才会开始渲染条件块。</p>
<p>相比之下，<code>v-show</code> 就简单得多——不管初始条件是什么，元素总是会被渲染，并且只是简单地基于 CSS 进行切换。</p>
<p>一般来说，<code>v-if</code> 有更高的切换开销，而 <code>v-show</code> 有更高的初始渲染开销。因此，如果需要非常频繁地切换，则使用 <code>v-show</code> 较好；如果在运行时条件很少改变，则使用 <code>v-if</code> 较好。</p>
<p>当 <code>v-if</code> 与 <code>v-for</code> 一起使用时，<code>v-if</code> 具有比 <code>v-for</code> 更高的优先级。不推荐v-if和v-for一起使用</p>
</blockquote>
<p>参考链接：</p>
<div class="tag link"><a class="link-card" title="vue3中文文档—v-if vs v-show" href="https://v3.cn.vuejs.org/guide/conditional.html#v-show"><div class="left"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/link.png"/></div><div class="right"><p class="text">vue3中文文档—v-if vs v-show</p><p class="url">https://v3.cn.vuejs.org/guide/conditional.html#v-show</p></div></a></div>
<h2 id="绑定-class-的数组用法"><a class="markdownIt-Anchor" href="#绑定-class-的数组用法"></a> 绑定 class 的数组用法</h2>
<p>首先是基本的对象用法，传给 <code>:class</code> (<code>v-bind:class</code> 的简写) 一个对象，以动态地切换 class：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">:class</span>=<span class="string">&quot;&#123;show: isShow&#125;&quot;</span>&gt;</span>内容<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    data () &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">isShow</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>我们也可以在这里绑定一个返回对象的<strong>计算属性</strong>。这是一个常用且强大的模式：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">:class</span>=<span class="string">&quot;classObject&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">isActive</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">error</span>: <span class="literal">null</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">activeClass</span>: <span class="string">&#x27;active&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">errorClass</span>: <span class="string">&#x27;text-danger&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">computed</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">classObject</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">active</span>: <span class="variable language_">this</span>.<span class="property">isActive</span> &amp;&amp; !<span class="variable language_">this</span>.<span class="property">error</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="string">&#x27;text-danger&#x27;</span>: <span class="variable language_">this</span>.<span class="property">error</span> &amp;&amp; <span class="variable language_">this</span>.<span class="property">error</span>.<span class="property">type</span> === <span class="string">&#x27;fatal&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>绑定 class 的对象用法能满足大部分业务需求，不过，在复杂的场景下，会用到<strong>数组</strong>，数组中可以有对象、三元表达式</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">:class</span>=<span class="string">&quot;[activeClass, errorClass]&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">// 数组中有对象</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">:class</span>=<span class="string">&quot;[&#123; active: isActive &#125;, errorClass]&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">// 数组中可以有三元表达式</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">:class</span>=<span class="string">&quot;[isActive ? activeClass : &#x27;&#x27;, errorClass]&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>下面给出一个更为复杂的例子，iView的Button组件，数组里，可以是固定的值，还有动态值（对象）的混合。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">:class</span>=<span class="string">&quot;classes&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">computed</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      classes () &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> [</span></span><br><span class="line"><span class="language-javascript">          <span class="string">`<span class="subst">$&#123;prefixCls&#125;</span>`</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="string">`<span class="subst">$&#123;prefixCls&#125;</span>-<span class="subst">$&#123;<span class="variable language_">this</span>.type&#125;</span>`</span>,</span></span><br><span class="line"><span class="language-javascript">          &#123;</span></span><br><span class="line"><span class="language-javascript">            [<span class="string">`<span class="subst">$&#123;prefixCls&#125;</span>-long`</span>]: <span class="variable language_">this</span>.<span class="property">long</span>,</span></span><br><span class="line"><span class="language-javascript">            [<span class="string">`<span class="subst">$&#123;prefixCls&#125;</span>-<span class="subst">$&#123;<span class="variable language_">this</span>.shape&#125;</span>`</span>]: !!<span class="variable language_">this</span>.<span class="property">shape</span>,</span></span><br><span class="line"><span class="language-javascript">            [<span class="string">`<span class="subst">$&#123;prefixCls&#125;</span>-<span class="subst">$&#123;<span class="variable language_">this</span>.size&#125;</span>`</span>]: <span class="variable language_">this</span>.<span class="property">size</span> !== <span class="string">&#x27;default&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            [<span class="string">`<span class="subst">$&#123;prefixCls&#125;</span>-loading`</span>]: <span class="variable language_">this</span>.<span class="property">loading</span> != <span class="literal">null</span> &amp;&amp; <span class="variable language_">this</span>.<span class="property">loading</span>,</span></span><br><span class="line"><span class="language-javascript">            [<span class="string">`<span class="subst">$&#123;prefixCls&#125;</span>-icon-only`</span>]: !<span class="variable language_">this</span>.<span class="property">showSlot</span> &amp;&amp; (!!<span class="variable language_">this</span>.<span class="property">icon</span> || !!<span class="variable language_">this</span>.<span class="property">customIcon</span> || <span class="variable language_">this</span>.<span class="property">loading</span>),</span></span><br><span class="line"><span class="language-javascript">            [<span class="string">`<span class="subst">$&#123;prefixCls&#125;</span>-ghost`</span>]: <span class="variable language_">this</span>.<span class="property">ghost</span></span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">        ];</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>参考链接：</p>
<div class="tag link"><a class="link-card" title="vue3中文文档—class和style绑定" href="https://v3.cn.vuejs.org/guide/class-and-style.html#%E5%AF%B9%E8%B1%A1%E8%AF%AD%E6%B3%95"><div class="left"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/link.png"/></div><div class="right"><p class="text">vue3中文文档—class和style绑定</p><p class="url">https://v3.cn.vuejs.org/guide/class-and-style.html#%E5%AF%B9%E8%B1%A1%E8%AF%AD%E6%B3%95</p></div></a></div>
<h2 id="组件中data为什么是函数"><a class="markdownIt-Anchor" href="#组件中data为什么是函数"></a> 组件中data为什么是函数</h2>
<mark class="hl-label blue">组件是用来复用的。</mark> 在Vue中,组件就相当于积木，我们需要用这些积木来搭建我们所预期的结构。在搭建过程中，会重复使用某一类别的积木以完成功能。
<p>我们希望在使用组件时，<code>data</code>数据是<mark class="hl-label green">相互隔离，互不影响的。</mark> 组件每复用一次，<code>data</code>数据就应该被复制一次，之后，当某一处复用的地方组件内<code>data</code>数据被改变时，其他复用地方组件的<code>data</code>数据不受影响，就需要通过data函数返回一个对象作为组件的状态。</p>
<p>如果我们把组件的data写成对象形式，这些实例用的是同一个构造函数，由于JavaScript的特性，<mark class="hl-label green">js里对象是引用关系，作用域没有隔离</mark> ，所有的组件实例共用了一个data，就会造成一个变了全都会变（牵一发而动全身）的结果。不能因为将一块圆锥体积木放置在屋顶位置，就将其他用到圆锥体的地方都重置在屋顶。</p>
<p>当我们将组件中的<code>data</code>写成一个函数，数据<mark class="hl-label blue">以函数返回值形式定义</mark> ，这样每复用一次组件，就会返回一份新的<code>data</code>，拥有自己的作用域，类似于给每个组件实例创建一个私有的数据空间，<mark class="hl-label blue">让各个组件实例维护各自的数据</mark> 。</p>
<hr />
<p>vue每次会通过组件创建出一个构造函数，每个实例都是通过这个构造函数new出来的。</p>
<p>如果data是一个对象，将这个对象放到这个放到原型上去</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">VueComponent</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line"><span class="title class_">VueComponent</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$options</span> = &#123;</span><br><span class="line">    <span class="attr">data</span>:&#123;<span class="attr">name</span>:<span class="string">&#x27;three&#x27;</span>&#125; </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> vc1 = <span class="keyword">new</span> <span class="title class_">VueComponent</span>();</span><br><span class="line">vc1.<span class="property">$options</span>.<span class="property">data</span>.<span class="property">name</span> = <span class="string">&#x27;six&#x27;</span>; <span class="comment">// 将vc1实例上的data修改为six</span></span><br><span class="line"><span class="keyword">let</span> vc2 = <span class="keyword">new</span> <span class="title class_">VueComponent</span>(); <span class="comment">// 在new一个新的实例vc2</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(vc2.<span class="property">$options</span>.<span class="property">data</span>.<span class="property">name</span>); six</span><br><span class="line"><span class="comment">// 输出vc2的data的值是six，这时候发现vc2中的data也被修改了，他们data相互影响</span></span><br></pre></td></tr></table></figure>
<p>将data改为一个函数</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 这样就可以保证每个组件调用data返回一个全新的对象，和外部没有关系</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">VueComponent</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line"><span class="title class_">VueComponent</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$options</span> = &#123;</span><br><span class="line">    <span class="attr">data</span>: <span class="function">() =&gt;</span> (&#123;<span class="attr">name</span>:<span class="string">&#x27;three&#x27;</span>&#125;) </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> vc1 = <span class="keyword">new</span> <span class="title class_">VueComponent</span>();</span><br><span class="line"><span class="keyword">let</span> objData = vc1.<span class="property">$options</span>.<span class="title function_">data</span>()</span><br><span class="line">objData.<span class="property">name</span> = <span class="string">&#x27;six&#x27;</span>; <span class="comment">// 调用data方法会返回一个对象，用这个对象作为它的属性</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(objData)</span><br><span class="line"><span class="keyword">let</span> vc2 = <span class="keyword">new</span> <span class="title class_">VueComponent</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(vc2.<span class="property">$options</span>.<span class="title function_">data</span>());</span><br></pre></td></tr></table></figure>
<p>参考链接：</p>
<div class="tag link"><a class="link-card" title="vue核心面试题：组件中的data为什么是一个函数" href="https://blog.csdn.net/qq_42072086/article/details/108060494"><div class="left"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/link.png"/></div><div class="right"><p class="text">vue核心面试题：组件中的data为什么是一个函数</p><p class="url">https://blog.csdn.net/qq_42072086/article/details/108060494</p></div></a></div>
<h2 id="生命周期"><a class="markdownIt-Anchor" href="#生命周期"></a> 生命周期</h2>
<p><a href="https://v3.cn.vuejs.org/api/options-lifecycle-hooks.html#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E9%92%A9%E5%AD%90">Vue3 生命周期</a> 主要有 8 个阶段：</p>
<ul>
<li>
<p>创建前 / 后（beforeCreate / created）：在 beforeCreate 阶段，Vue 实例的挂载元素 el 和数据对象 data 都为 undefined，还未初始化。在 created 阶段，Vue 实例的数据对象 data 有了，el 还没有。</p>
</li>
<li>
<p>载入前 / 后（beforeMount / mounted）：在 beforeMount 阶段，Vue 实例的 $el 和 data 都初始化了，但还是挂载之前为虚拟的 DOM 节点，data 尚未替换。在 mounted 阶段，Vue 实例挂载完成，data 成功渲染。</p>
</li>
<li>
<p>更新前 / 后（beforeUpdate / updated）：当 data 变化时，会触发 beforeUpdate 和 updated 方法。这两个不常用，且不推荐使用。</p>
</li>
<li>
<p>销毁前 / 后（beforeDestroy / destroyed）：beforeDestroy 是在 Vue 实例销毁前触发，一般在这里要通过 removeEventListener 解除手动绑定的事件。实例销毁后，触发 destroyed。</p>
</li>
</ul>
<blockquote>
<p>所有生命周期钩子的 <code>this</code> 上下文将自动绑定至实例中，因此你可以访问 data、computed 和 methods。这意味着<strong>你不应该使用箭头函数来定义一个生命周期方法</strong> (例如 <code>created: () =&gt; this.fetchTodos()</code>)。因为箭头函数绑定了父级上下文，所以 <code>this</code> 不会指向预期的组件实例，并且<code>this.fetchTodos</code> 将会是 undefined。</p>
</blockquote>
<h2 id="相关文章"><a class="markdownIt-Anchor" href="#相关文章"></a> 相关文章</h2>
<ul>
<li><a href="https://www.kzmqvq.com/posts/479daafb.html">vue面试题-02</a></li>
<li><a href="https://www.kzmqvq.com/posts/309a9a6d.html">vue面试题-03</a></li>
</ul>
<p>我的博客即将同步至腾讯云开发者社区，邀请大家一同入驻：<a href="https://cloud.tencent.com/developer/support-plan?invite_code=30t04w2kn86ck">https://cloud.tencent.com/developer/support-plan?invite_code=30t04w2kn86ck</a></p>
]]></content>
      <categories>
        <category>Web</category>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Web</tag>
        <tag>Vue</tag>
        <tag>面试题</tag>
        <tag>基础知识</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue面试题-02</title>
    <url>/posts/479daafb.html</url>
    <content><![CDATA[<h2 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言</h2>
<p>马上要秋招了，搜集整理了一些Vue面试题，包括组件、指令、API等相关内容，巩固基础😎秋招冲冲冲！！！本篇包括：</p>
<p>✅计算属性和侦听器的区别<br />
✅事件修饰符<br />
✅单页应用(SPA) VS 多页应用(MPA)<br />
✅如何解决SPA首屏加载速度慢<br />
✅v-if和v-for的优先级</p>
<h2 id="计算属性和侦听器的区别"><a class="markdownIt-Anchor" href="#计算属性和侦听器的区别"></a> 计算属性和侦听器的区别</h2>
<p>计算属性(<code>computed</code>)是自动监听依赖值的变化，从而动态返回内容(动态显示新的计算结果)。</p>
<p>监听(<code>watch</code>)是一个过程，在监听的值变化时，可以触发一个回调，并做一些事情。回调函数有两个参数，一个 <code>val</code> （修改后的 <code>data</code>数据），一个 <code>oldVal</code>（原来的 data 数据）。Vue 实例将会在实例化时调用<code>$watch()</code>，遍历 <code>watch</code>对象的每一个属性。</p>
<p>两者用于不同情况下完成计算，显示数据的操作。它们的区别主要来源于用法，只是需要动态值，那就用计算属性；需要知道值的改变后执行业务逻辑，才用 <code>watch</code>，用反或混用虽然可行，但都是不正确的用法。</p>
<p>下面给出这两个特性的基本用法：</p>
<p><strong>计算属性</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span> &#123;&#123;total&#125;&#125; <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">el</span>: <span class="string">&quot;#app&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">num</span>: <span class="number">10</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">price</span>: <span class="number">8.8</span>,</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">computed</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">total</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">num</span> * <span class="variable language_">this</span>.<span class="property">price</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>侦听器</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span>  &#123;&#123;total&#125;&#125;  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">el</span>: <span class="string">&quot;#app&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">num</span>: <span class="number">10</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">price</span>: <span class="number">8.8</span>,</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">watch</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">num</span>: <span class="keyword">function</span> (<span class="params">val</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">total</span> = val * <span class="variable language_">this</span>.<span class="property">price</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">price</span>: <span class="keyword">function</span> (<span class="params">val</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">total</span> = <span class="variable language_">this</span>.<span class="property">num</span> * val;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>结合代码进行说明：</p>
<ol>
<li>
<p>计算属性的应用场景是计算的内容需要依赖<strong>多个属性</strong>(num、price)的情况；侦听器的应用场景是计算的内容依赖<strong>一个属性</strong>(仅num发生变化、仅price发生变化)的情况</p>
</li>
<li>
<p>计算属性缓存结果时<strong>每次都会重新创建变量</strong>，而侦听器是<strong>直接计算</strong>，不会创建变量保存结果。也就意味着，<strong>数据如果会反复的发生变化，计算很多次的情况下，计算属性的开销将会更大</strong>，也就意味着这种情况不适合使用计算属性，适合使用侦听器。如果一个数据反复会被使用，但是它计算依赖的内容很少发生变化的情况下，计算属性会<strong>缓存</strong>结果，就更加适合这种情况。</p>
</li>
</ol>
<blockquote>
<p>如果 this.num 或者 this.price 没有发生变化，直接获取缓存的总结88作为计算属性的结果。<br />
如果 this.num 或者 this.price 任何一项发生了变化，那么就会重新计算并得到一个总结结果，并重新将结果进行缓存。</p>
</blockquote>
<ol start="3">
<li>
<p><code>computed</code> 的结果是通过return返回的，而 <code>watch</code> 不需要return。</p>
</li>
<li>
<p><code>watch</code> 中的参数可以得到侦听属性改变的最新结果，而<code>computed</code>函数没有这种参数。</p>
</li>
</ol>
<p>补充：</p>
<ul>
<li><code>computed</code>是一个对象时，有 <strong>get</strong> 和 <strong>set</strong> 两个选项。</li>
<li><code>computed</code>与 <code>methods</code>相比：<code>methods</code> 是一个方法，它可以接受参数，而 <code>computed</code>不能；<code>computed</code>是可以<strong>缓存</strong>的，<code>methods</code> 不会；一般在 <code>v-for</code> 里，需要根据当前项动态绑定值时，只能用 <code>methods</code> 而不能用 <code>computed</code>，因为 <code>computed</code> 不能传参。</li>
<li><code>computed</code> 可以依赖其它 <code>computed</code>，甚至是其它组件的数据(data)。</li>
<li><code>watch</code>是一个对象时，常用的配置有：<code>handler</code>(执行的函数)、<code>deep</code>(是否深度)、<code>immediate</code>(是否立即执行)</li>
<li><code>computed</code>默认深度依赖，<code>watch</code> 默认浅度观测</li>
</ul>
<p>参考链接：</p>
<div class="tag link"><a class="link-card" title="Vue计算属性和watch的区别有哪些?" href="https://www.php.cn/vuejs/464220.html"><div class="left"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/link.png"/></div><div class="right"><p class="text">Vue计算属性和watch的区别有哪些?</p><p class="url">https://www.php.cn/vuejs/464220.html</p></div></a></div>
<div class="tag link"><a class="link-card" title="计算属性(computed)和监听器(watch)的区别" href="https://blog.csdn.net/itcast_cs/article/details/102802310"><div class="left"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/link.png"/></div><div class="right"><p class="text">计算属性(computed)和监听器(watch)的区别</p><p class="url">https://blog.csdn.net/itcast_cs/article/details/102802310</p></div></a></div>
<h2 id="事件修饰符"><a class="markdownIt-Anchor" href="#事件修饰符"></a> 事件修饰符</h2>
<p>常见的事件修饰符:  <code>.stop</code>、<code>.prevent</code>、<code>.capture</code>、<code>.self</code>、<code>.once</code>、<code>.passive</code></p>
<p>举例提问：如何给下面这个自定义组件绑定一个<strong>原生</strong>的<code>click</code>事件</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">custom-component</span>&gt;</span>内容<span class="tag">&lt;/<span class="name">custom-component</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>注意： <code>@click</code> 是自定义事件 click，并不是原生事件 click。绑定原生的 click 是 <code>@click.native=&quot;xxx&quot;</code>，同时补充说明 <code>.exact</code>会有加分。</p>
<p><code>.exact</code> 修饰符允许你控制由精确的系统修饰符组合触发的事件。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 即使 Alt 或 Shift 被一同按下时也会触发 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click.ctrl</span>=<span class="string">&quot;onClick&quot;</span>&gt;</span>A<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 有且只有 Ctrl 被按下的时候才触发 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click.ctrl.exact</span>=<span class="string">&quot;onCtrlClick&quot;</span>&gt;</span>A<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 没有任何系统修饰符被按下的时候才触发 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click.exact</span>=<span class="string">&quot;onClick&quot;</span>&gt;</span>A<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>参考链接:</p>
<div class="tag link"><a class="link-card" title="vue3-事件修饰符" href="https://v3.cn.vuejs.org/guide/events.html#%E4%BA%8B%E4%BB%B6%E4%BF%AE%E9%A5%B0%E7%AC%A6"><div class="left"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/link.png"/></div><div class="right"><p class="text">vue3-事件修饰符</p><p class="url">https://v3.cn.vuejs.org/guide/events.html#%E4%BA%8B%E4%BB%B6%E4%BF%AE%E9%A5%B0%E7%AC%A6</p></div></a></div>
<div class="tag link"><a class="link-card" title="vue3-exact修饰符" href="https://v3.cn.vuejs.org/guide/events.html#exact-%E4%BF%AE%E9%A5%B0%E7%AC%A6"><div class="left"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/link.png"/></div><div class="right"><p class="text">vue3-exact修饰符</p><p class="url">https://v3.cn.vuejs.org/guide/events.html#exact-%E4%BF%AE%E9%A5%B0%E7%AC%A6</p></div></a></div>
<h2 id="单页应用spa-vs-多页应用mpa"><a class="markdownIt-Anchor" href="#单页应用spa-vs-多页应用mpa"></a> 单页应用(SPA) VS 多页应用(MPA)</h2>
<p>SPA（single-page application），翻译过来就是单页应用<code>SPA</code>，是一种网络应用程序或网站的模型。</p>
<p>它通过<strong>动态重写当前页面</strong>来与用户交互，这种方法避免了页面之间切换时，打断用户体验。在单页应用中，所有必要的代码（<code>HTML</code>、<code>JavaScript</code>和<code>CSS</code>）都通过单个页面的加载而检索，或者根据需要（通常是为响应用户操作）动态装载适当的资源，并添加到页面。</p>
<p>页面在任何时间点都不会重新加载，也不会将控制转移到其他页面。举个例子来讲，一个杯子，早上装的牛奶，中午装的是开水，晚上装的是茶，我们发现，变的始终是杯子里的内容，而杯子始终是那个杯子。再通俗一点，就是局部刷新。我们熟知的JS框架如<code>react</code>,<code>vue</code>,<code>angular</code>,<code>ember</code>都属于<code>SPA</code></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://static.vue-js.com/df14a5a0-3ac6-11eb-85f6-6fac77c0c9b3.png" alt="杯子结构" /></p>
<p>MPA（MultiPage-page application），翻译过来就是多页应用。在<code>MPA</code>中，每个页面都是一个独立的主页面。当我们在访问另一个页面的时候，都需要重新加载<code>html</code>、<code>css</code>、<code>js</code>文件，公共文件则根据需求按需加载。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://static.vue-js.com/eeb13aa0-3ac6-11eb-85f6-6fac77c0c9b3.png" alt="多页应用" /></p>
<p><strong>单页应用和多页应用的区别</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left"></th>
<th>单页应用（SPA）</th>
<th style="text-align:left">多页应用（MPA）</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">组成</td>
<td>一个主页面和多个页面片段</td>
<td style="text-align:left">多个主页面</td>
</tr>
<tr>
<td style="text-align:left">刷新方式</td>
<td>局部刷新</td>
<td style="text-align:left">整页刷新</td>
</tr>
<tr>
<td style="text-align:left">url模式</td>
<td>哈希模式</td>
<td style="text-align:left">历史模式</td>
</tr>
<tr>
<td style="text-align:left">SEO搜索引擎优化</td>
<td>难实现，可使用SSR方式改善</td>
<td style="text-align:left">容易实现</td>
</tr>
<tr>
<td style="text-align:left">数据传递</td>
<td>容易</td>
<td style="text-align:left">通过url、cookie、localStorage等传递</td>
</tr>
<tr>
<td style="text-align:left">页面切换</td>
<td>速度快，用户体验良好</td>
<td style="text-align:left">切换加载资源，速度慢，用户体验差</td>
</tr>
<tr>
<td style="text-align:left">维护成本</td>
<td>相对容易</td>
<td style="text-align:left">相对复杂</td>
</tr>
<tr>
<td style="text-align:left">优点</td>
<td>具有桌面应用的即时性、网站的可移植性和可访问性；<br />内容的改变不需要重新加载整个页面；<br />良好的前后端分离，分工更明确</td>
<td style="text-align:left">首屏加载较快，SEO优化较好。</td>
</tr>
<tr>
<td style="text-align:left">缺点</td>
<td>不利于搜索引擎的抓取；<br />首次渲染速度相对较慢(加载整个项目使用的css、js)</td>
<td style="text-align:left">页面跳转较慢</td>
</tr>
</tbody>
</table>
<p>参考链接：</p>
<div class="tag link"><a class="link-card" title="说说你对SPA的理解" href="https://vue3js.cn/interview/vue/spa.html"><div class="left"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/link.png"/></div><div class="right"><p class="text">说说你对SPA的理解</p><p class="url">https://vue3js.cn/interview/vue/spa.html</p></div></a></div>
<div class="tag link"><a class="link-card" title="vue单页面(spa)多页面(mpa)优缺点" href="https://blog.csdn.net/rgpbrave/article/details/108533825"><div class="left"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/link.png"/></div><div class="right"><p class="text">vue单页面(spa)多页面(mpa)优缺点</p><p class="url">https://blog.csdn.net/rgpbrave/article/details/108533825</p></div></a></div>
<h2 id="如何解决spa首屏加载速度慢"><a class="markdownIt-Anchor" href="#如何解决spa首屏加载速度慢"></a> 如何解决SPA首屏加载速度慢</h2>
<p>首屏时间（First Contentful Paint），指的是浏览器从响应用户输入网址地址，到首屏内容渲染完成的时间，此时整个网页不一定要全部渲染完成，但需要展示当前视窗需要的内容。首屏加载可以说是用户体验中<strong>最重要</strong>的环节。</p>
<p>在页面渲染的过程，<strong>导致加载速度慢的原因</strong>是：网络延时问题、资源文件体积过大、重复发送请求以加载资源、加载脚本的时候，渲染内容堵塞了。</p>
<p>常见的几种SPA首屏优化方式</p>
<ol>
<li>减小入口文件体积</li>
<li>静态资源本地缓存</li>
<li>UI框架按需加载</li>
<li>图片资源的压缩</li>
<li>组件重复打包</li>
<li>开启GZip压缩</li>
<li>使用SSR</li>
</ol>
<p>参考链接：</p>
<div class="tag link"><a class="link-card" title="SPA首屏加载速度慢的怎么解决" href="https://vue3js.cn/interview/vue/first_page_time.html"><div class="left"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/link.png"/></div><div class="right"><p class="text">SPA首屏加载速度慢的怎么解决</p><p class="url">https://vue3js.cn/interview/vue/first_page_time.html</p></div></a></div>
<h2 id="v-if和v-for的优先级"><a class="markdownIt-Anchor" href="#v-if和v-for的优先级"></a> v-if和v-for的优先级</h2>
<blockquote>
<p>为什么不建议v-if和v-for一起使用？</p>
</blockquote>
<p>vue在官方文档中明确指出，<strong>永远不要把 <code>v-if</code> 和 <code>v-for</code> 同时用在同一个元素上</strong></p>
<p>在 <code>Vue 2</code> 中，<code>v-for</code> 优先于 <code>v-if</code> 被解析，即先执行循环，后判断条件。</p>
<h3 id="举例说明"><a class="markdownIt-Anchor" href="#举例说明"></a> 举例说明</h3>
<p>编写一个<code>p</code>标签，同时使用<code>v-if</code>与 <code>v-for</code></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-if</span>=<span class="string">&quot;isShow&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;item in items&quot;</span>&gt;</span></span><br><span class="line">        &#123;&#123; item.title &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>创建<code>vue</code>实例，存放<code>isShow</code>与<code>items</code>数据</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&quot;#app&quot;</span>,</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">items</span>: [</span><br><span class="line">        &#123; <span class="attr">title</span>: <span class="string">&quot;foo&quot;</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">title</span>: <span class="string">&quot;baz&quot;</span> &#125;]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">computed</span>: &#123;</span><br><span class="line">    <span class="title function_">isShow</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">items</span> &amp;&amp; <span class="variable language_">this</span>.<span class="property">items</span>.<span class="property">length</span> &gt; <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>模板指令的代码都会生成在<code>render</code>函数中，通过<code>app.$options.render</code>就能得到渲染函数</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">ƒ <span class="title function_">anonymous</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">with</span> (<span class="variable language_">this</span>) &#123; <span class="keyword">return</span> </span><br><span class="line">    <span class="title function_">_c</span>(<span class="string">&#x27;div&#x27;</span>, &#123; <span class="attr">attrs</span>: &#123; <span class="string">&quot;id&quot;</span>: <span class="string">&quot;app&quot;</span> &#125; &#125;, </span><br><span class="line">    <span class="title function_">_l</span>((items), <span class="keyword">function</span> (<span class="params">item</span>) </span><br><span class="line">    &#123; <span class="keyword">return</span> (isShow) ? <span class="title function_">_c</span>(<span class="string">&#x27;p&#x27;</span>, [<span class="title function_">_v</span>(<span class="string">&quot;\n&quot;</span> + <span class="title function_">_s</span>(item.<span class="property">title</span>) + <span class="string">&quot;\n&quot;</span>)]) : <span class="title function_">_e</span>() &#125;), <span class="number">0</span>) &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>_l</code>是<code>vue</code>的列表渲染函数，函数内部都会进行一次<code>if</code>判断</p>
<p>初步得到结论：<code>v-for</code>优先级是比<code>v-if</code>高</p>
<p>再将<code>v-for</code>与<code>v-if</code>置于不同标签</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-if</span>=<span class="string">&quot;isShow&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-for</span>=<span class="string">&quot;item in items&quot;</span>&gt;</span>&#123;&#123;item.title&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>再输出下<code>render</code>函数</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">ƒ <span class="title function_">anonymous</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title function_">with</span>(<span class="params"><span class="variable language_">this</span></span>)&#123;<span class="keyword">return</span> </span><br><span class="line">    <span class="title function_">_c</span>(<span class="string">&#x27;div&#x27;</span>,&#123;<span class="attr">attrs</span>:&#123;<span class="string">&quot;id&quot;</span>:<span class="string">&quot;app&quot;</span>&#125;&#125;,</span><br><span class="line">    [(isShow)?[<span class="title function_">_v</span>(<span class="string">&quot;\n&quot;</span>),</span><br><span class="line">    <span class="title function_">_l</span>((items),<span class="keyword">function</span>(<span class="params">item</span>)&#123;<span class="keyword">return</span> <span class="title function_">_c</span>(<span class="string">&#x27;p&#x27;</span>,[<span class="title function_">_v</span>(<span class="title function_">_s</span>(item.<span class="property">title</span>))])&#125;)]:<span class="title function_">_e</span>()],<span class="number">2</span>)&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这时候我们可以看到，<code>v-for</code>与<code>v-if</code>作用在不同标签时候，是先进行判断，再进行列表的渲染</p>
<h3 id="注意"><a class="markdownIt-Anchor" href="#注意"></a> 注意</h3>
<ol>
<li>永远不要把 <code>v-if</code> 和 <code>v-for</code> 同时用在同一个元素上，带来性能方面的浪费（每次渲染都会先循环再进行条件判断）</li>
<li>如果避免出现这种情况，则在外层嵌套<code>template</code>（页面渲染不生成<code>dom</code>节点），在这一层进行v-if判断，然后在内部进行v-for循环</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;template v-<span class="keyword">if</span>=<span class="string">&quot;isShow&quot;</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-for</span>=<span class="string">&quot;item in items&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<ol start="3">
<li>如果条件出现在循环内部，可通过计算属性<code>computed</code>提前过滤掉那些不需要显示的项</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">computed</span>: &#123;</span><br><span class="line">    <span class="attr">items</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">list</span>.<span class="title function_">filter</span>(<span class="keyword">function</span> (<span class="params">item</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> item.<span class="property">isShow</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>参考链接：</p>
<div class="tag link"><a class="link-card" title="v-if和v-for哪个优先级更高" href="https://github.com/57code/vue-interview/blob/master/public/01-vif-vfor/README.md"><div class="left"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/link.png"/></div><div class="right"><p class="text">v-if和v-for哪个优先级更高</p><p class="url">https://github.com/57code/vue-interview/blob/master/public/01-vif-vfor/README.md</p></div></a></div>
<div class="tag link"><a class="link-card" title="为什么Vue中的v-if和v-for不建议一起用?" href="https://vue3js.cn/interview/vue/if_for.html"><div class="left"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/link.png"/></div><div class="right"><p class="text">为什么Vue中的v-if和v-for不建议一起用?</p><p class="url">https://vue3js.cn/interview/vue/if_for.html</p></div></a></div>
<h2 id="相关文章"><a class="markdownIt-Anchor" href="#相关文章"></a> 相关文章</h2>
<ul>
<li><a href="https://www.kzmqvq.com/posts/a3e1ba6c.html">vue面试题-01</a></li>
<li><a href="https://www.kzmqvq.com/posts/479daafb.html">vue面试题-02</a></li>
<li><a href="https://www.kzmqvq.com/posts/309a9a6d.html">vue面试题-03</a></li>
</ul>
]]></content>
      <categories>
        <category>Web</category>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Web</tag>
        <tag>Vue</tag>
        <tag>面试题</tag>
        <tag>基础知识</tag>
      </tags>
  </entry>
  <entry>
    <title>散点图</title>
    <url>/posts/f5e8960.html</url>
    <content><![CDATA[<h2 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言</h2>
<p>源数据是一个<code>data.txt</code></p>
<p>某憨憨用的matlab，不会导出为xls、csv等pandas库可以处理的文件，我对你很无语……</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">xlswrite(<span class="string">&#x27;test.csv&#x27;</span>)</span><br><span class="line">csvwrite(<span class="string">&#x27;test.csv&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h2 id="操作步骤"><a class="markdownIt-Anchor" href="#操作步骤"></a> 操作步骤</h2>
<p>转换为csv文件后，会得到如下的一个表格；</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/gnHWkymrQqp1tJl.png">
<h3 id="读取数据"><a class="markdownIt-Anchor" href="#读取数据"></a> 读取数据</h3>
<p>如果直接读取data.txt的话，可以使用如下代码：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">df = pd.read_table(<span class="string">&#x27;data2010.txt&#x27;</span>, names=[<span class="string">&#x27;time&#x27;</span>, <span class="string">&#x27;test&#x27;</span>,<span class="string">&#x27;formal&#x27;</span>, <span class="string">&#x27;color&#x27;</span>], header=<span class="literal">None</span>, sep=<span class="string">&quot; &quot;</span>) </span><br></pre></td></tr></table></figure>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/EKAmZPhxOvIl9bi.png" width=400>
<p>如果是在test.csv的基础上操作，可使用如下代码：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">df = pd.read_csv(<span class="string">&#x27;test.csv&#x27;</span>)</span><br></pre></td></tr></table></figure>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src='https://s2.loli.net/2022/03/25/3qG1CypOIZdLowx.png' height=400>
<h3 id="需求分析"><a class="markdownIt-Anchor" href="#需求分析"></a> 需求分析</h3>
<ul>
<li>需要计算标准数据与实际测量数据的偏差（bias）、均方根误差（RMSE）、散射指数（SI）三个值</li>
</ul>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src='https://s2.loli.net/2022/03/25/tNPF2EIJ7gjYmT8.jpg' width=800>
<ul>
<li>
<p>需要根据点坐标（标准值，实际值）绘制散点图</p>
</li>
<li>
<p>需要根据点密度绘制不同颜色的散点分布图</p>
<p>效果应如下图所示：</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src='https://s2.loli.net/2022/03/25/FpHVa9Z7hwlnOso.png' height=400>
</li>
</ul>
<h3 id="具体实现"><a class="markdownIt-Anchor" href="#具体实现"></a> 具体实现</h3>
<ul>
<li>
<p>三个公式的计算</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 分别对 测量值 和 标准值 求和</span></span><br><span class="line">ans_test = <span class="built_in">sum</span>(df[<span class="string">&#x27;test&#x27;</span>])</span><br><span class="line">ans_formal = <span class="built_in">sum</span>(df[<span class="string">&#x27;formal&#x27;</span>])</span><br><span class="line"><span class="comment"># bias</span></span><br><span class="line">DelBias = ans_test - ans_formal</span><br><span class="line">bias = DelBias / <span class="built_in">len</span>(df)</span><br><span class="line"></span><br><span class="line"><span class="comment"># rmse</span></span><br><span class="line">rmse = np.sqrt(<span class="built_in">sum</span>((df[<span class="string">&#x27;test&#x27;</span>] - df[<span class="string">&#x27;formal&#x27;</span>])**<span class="number">2</span>) / <span class="built_in">len</span>(df))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 测量值均值</span></span><br><span class="line">test_mean = ans_test / <span class="built_in">len</span>(df)</span><br><span class="line"><span class="comment"># 标准值均值</span></span><br><span class="line">formal_mean = ans_formal / <span class="built_in">len</span>(df)</span><br><span class="line"></span><br><span class="line"><span class="comment"># SI</span></span><br><span class="line">SI = np.sqrt(<span class="built_in">sum</span>(((df[<span class="string">&#x27;test&#x27;</span>] - test_mean) - (df[<span class="string">&#x27;formal&#x27;</span>] - formal_mean)) ** <span class="number">2</span>) / <span class="built_in">len</span>(df)) / formal_mean</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>坐标轴的格式规范</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 正确显示中文和负号</span></span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>]=[<span class="string">&#x27;SimHei&#x27;</span>] <span class="comment"># 用来正常显示中文标签</span></span><br><span class="line">plt.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>]=<span class="literal">True</span> <span class="comment"># 用来正常显示负号</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成图的设置 包括坐标轴、色块范围、间距等</span></span><br><span class="line">plt.xlabel(<span class="string">&#x27;浮标数据&#x27;</span>, fontsize=<span class="number">14</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;卫星检测数据&#x27;</span>, fontsize=<span class="number">14</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;Data2010&#x27;</span>, fontsize=<span class="number">14</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置刻度间距</span></span><br><span class="line">x_major_locator = MultipleLocator(<span class="number">1</span>)</span><br><span class="line">y_major_locator = MultipleLocator(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ax为两条坐标轴的实例</span></span><br><span class="line">ax = plt.gca()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示主刻度 均为1的倍数</span></span><br><span class="line">ax.xaxis.set_major_locator(x_major_locator)</span><br><span class="line">ax.yaxis.set_major_locator(y_major_locator)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 规定x y 轴的刻度范围</span></span><br><span class="line">plt.xlim(<span class="number">0</span>, <span class="number">10</span>)</span><br><span class="line">plt.ylim(<span class="number">0</span>, <span class="number">10</span>)</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>普通散点图</p>
 <figure class="highlight python"><table><tr><td class="code"><pre><span class="line">df.plot.scatter(x=<span class="string">&#x27;formal&#x27;</span>, y=<span class="string">&#x27;test&#x27;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>彩色散点图</p>
<ul>
<li>根据每对数据的偏差，人为划分颜色</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 已知 数据的偏差 绝对值为 0.08</span></span><br><span class="line">bias = <span class="built_in">abs</span>(bias)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(df)):</span><br><span class="line">    delData = <span class="built_in">abs</span>(df[<span class="string">&#x27;test&#x27;</span>][i] - df[<span class="string">&#x27;formal&#x27;</span>][i])</span><br><span class="line">    <span class="comment"># 人为划定范围 10倍、20倍等 可自定义修改 </span></span><br><span class="line">    <span class="keyword">if</span> delData == <span class="number">0</span>:	</span><br><span class="line">        df[<span class="string">&#x27;color&#x27;</span>][i] = <span class="number">0</span></span><br><span class="line">    <span class="keyword">elif</span>(delData &lt;= <span class="number">10</span> * bias):</span><br><span class="line">        df[<span class="string">&#x27;color&#x27;</span>][i] = <span class="number">1</span></span><br><span class="line">    <span class="keyword">elif</span> delData &lt;= <span class="number">20</span> * bias:</span><br><span class="line">        df[<span class="string">&#x27;color&#x27;</span>][i] = <span class="number">2</span></span><br><span class="line">    <span class="keyword">elif</span> delData &lt;= <span class="number">30</span> * bias:</span><br><span class="line">        df[<span class="string">&#x27;color&#x27;</span>][i] = <span class="number">3</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        df[<span class="string">&#x27;color&#x27;</span>][i] = <span class="number">4</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 由偏差 绘制散点图</span></span><br><span class="line">df.plot.scatter(<span class="string">&#x27;formal&#x27;</span>, <span class="string">&#x27;test&#x27;</span>, c=<span class="string">&#x27;color&#x27;</span>, colormap=<span class="string">&#x27;jet&#x27;</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li>根据点密度绘制散点图</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 将x y转为一维</span></span><br><span class="line">data_test = []</span><br><span class="line">data_formal = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(df)):</span><br><span class="line">    data_test.append(df[<span class="string">&#x27;test&#x27;</span>][i])</span><br><span class="line">    data_formal.append(df[<span class="string">&#x27;formal&#x27;</span>][i])</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 由点密度绘制散点图 hist2d</span></span><br><span class="line">plt.hist2d(data_formal, data_test, bins=<span class="number">100</span>, cmin=<span class="number">1</span>, vmin=<span class="number">1</span>, vmax=<span class="number">10</span>, cmap=<span class="string">&#x27;jet&#x27;</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">- 关于hist2d的参数</span><br><span class="line">plt.hist2d(x, y, bins=<span class="number">100</span>, cmin=<span class="number">1</span>, vmin=<span class="number">1</span>, vmax=<span class="number">10</span>, cmap=<span class="string">&#x27;jet&#x27;</span>)</span><br><span class="line"></span><br><span class="line">x y 为x轴 y轴的数据 且均为一维矩阵 如：[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">bins 表示两个维度的箱数（若bins=<span class="number">40</span>， nx=ny=<span class="built_in">bin</span> | 若bins=[<span class="number">10</span>,<span class="number">20</span>], nx=<span class="number">10</span>,ny=<span class="number">20</span>） </span><br><span class="line">个人认为 可以理解为 x y轴被切割成的份数</span><br><span class="line"></span><br><span class="line">cmin、cmax浮点 所有计数小于cmin或超过cmax 将不显示 这个参数很好理解 筛选一定计数范围的点</span><br><span class="line"></span><br><span class="line">cmap 颜色映射 就是我们所使用的颜色集合 无他 为了好看</span><br><span class="line">具体的映射参数 可查看这位博主的文章 https://blog.csdn.net/weixin_39580795/article/details/<span class="number">102622004</span></span><br><span class="line"></span><br><span class="line">vmin/vmax 官方解释为：vmin/vmax 无或标量，可选 传递给的参数 Normalize 实例。</span><br><span class="line">官方文档：https://www.osgeo.cn/matplotlib/api/_as_gen/matplotlib.pyplot.hist2d.html</span><br><span class="line">个人在调试时 理解为对所生成散点图色彩范围的划分 vmin-vmax的范围越大，各个颜色的划分便越精细</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="效果展示"><a class="markdownIt-Anchor" href="#效果展示"></a> 效果展示</h2>
<div align='center'>
    <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/CFQGeb8Xa2kH6v5.png" >
    <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/kYhxZnuABzKUrVy.png">
    <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/7wdpCvXO9aRQfkz.png" >
</div>
<h2 id="代码"><a class="markdownIt-Anchor" href="#代码"></a> 代码</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> matplotlib.pyplot <span class="keyword">import</span> MultipleLocator</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">df = pd.read_csv(<span class="string">&#x27;test.csv&#x27;</span>)</span><br><span class="line"></span><br><span class="line">ans_test = <span class="built_in">sum</span>(df[<span class="string">&#x27;test&#x27;</span>])</span><br><span class="line">ans_formal = <span class="built_in">sum</span>(df[<span class="string">&#x27;formal&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># bias</span></span><br><span class="line">bias = ans_test - ans_formal</span><br><span class="line">bias = bias / <span class="built_in">len</span>(df)</span><br><span class="line"></span><br><span class="line">bias = <span class="built_in">abs</span>(bias)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(df)):</span><br><span class="line">    delData = <span class="built_in">abs</span>(df[<span class="string">&#x27;test&#x27;</span>][i] - df[<span class="string">&#x27;formal&#x27;</span>][i])</span><br><span class="line">    <span class="keyword">if</span> delData == <span class="number">0</span>:</span><br><span class="line">        df[<span class="string">&#x27;color&#x27;</span>][i] = <span class="number">0</span></span><br><span class="line">    <span class="keyword">elif</span>(delData &lt;= <span class="number">10</span> * bias):</span><br><span class="line">        df[<span class="string">&#x27;color&#x27;</span>][i] = <span class="number">1</span></span><br><span class="line">    <span class="keyword">elif</span> delData &lt;= <span class="number">20</span> * bias:</span><br><span class="line">        df[<span class="string">&#x27;color&#x27;</span>][i] = <span class="number">2</span></span><br><span class="line">    <span class="keyword">elif</span> delData &lt;= <span class="number">30</span> * bias:</span><br><span class="line">        df[<span class="string">&#x27;color&#x27;</span>][i] = <span class="number">3</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        df[<span class="string">&#x27;color&#x27;</span>][i] = <span class="number">4</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 由bias绘制散点图</span></span><br><span class="line">df.plot.scatter(<span class="string">&#x27;formal&#x27;</span>, <span class="string">&#x27;test&#x27;</span>, c=<span class="string">&#x27;color&#x27;</span>, colormap=<span class="string">&#x27;jet&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;formal-test&#x27;</span>)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 由密度绘制散点图 hist2d</span></span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>]=[<span class="string">&#x27;SimHei&#x27;</span>] <span class="comment"># 用来正常显示中文标签</span></span><br><span class="line">plt.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>]=<span class="literal">True</span> <span class="comment"># 用来正常显示负号</span></span><br><span class="line"></span><br><span class="line">data_test = []</span><br><span class="line">data_formal = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(df)):</span><br><span class="line">    data_test.append(df[<span class="string">&#x27;test&#x27;</span>][i])</span><br><span class="line">    data_formal.append(df[<span class="string">&#x27;formal&#x27;</span>][i])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">plt.hist2d(data_formal, data_test, bins=<span class="number">100</span>,</span><br><span class="line">           cmin=<span class="number">1</span>, vmin=<span class="number">1</span>, vmax=<span class="number">10</span>, cmap=<span class="string">&#x27;jet&#x27;</span>)</span><br><span class="line">plt.tick_params(axis=<span class="string">&#x27;both&#x27;</span>, which=<span class="string">&#x27;major&#x27;</span>, labelsize=<span class="number">14</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 坐标轴名称</span></span><br><span class="line">plt.xlabel(<span class="string">&#x27;浮标数据&#x27;</span>, fontsize=<span class="number">14</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;卫星检测数据&#x27;</span>, fontsize=<span class="number">14</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;Data2010&#x27;</span>, fontsize=<span class="number">14</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置刻度间距</span></span><br><span class="line">x_major_locator = MultipleLocator(<span class="number">1</span>)</span><br><span class="line">y_major_locator = MultipleLocator(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ax为两条坐标轴的实例</span></span><br><span class="line">ax = plt.gca()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示主刻度 均为1的倍数</span></span><br><span class="line">ax.xaxis.set_major_locator(x_major_locator)</span><br><span class="line">ax.yaxis.set_major_locator(y_major_locator)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 规定x y 轴的刻度范围</span></span><br><span class="line">plt.xlim(<span class="number">0</span>, <span class="number">10</span>)</span><br><span class="line">plt.ylim(<span class="number">0</span>, <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">plt.colorbar()</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>散点图</tag>
        <tag>Python</tag>
        <tag>数据处理</tag>
      </tags>
  </entry>
  <entry>
    <title>颜色传输</title>
    <url>/posts/7271227.html</url>
    <content><![CDATA[<h2 id="问题"><a class="markdownIt-Anchor" href="#问题"></a> 问题</h2>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/aAVGdmI92bS1DrR.png">
<p>上图是一幅红色树林的图像，左下图是一个蔬菜的图像。</p>
<p>目标：将蔬菜图像的颜色组成换成树林图像的颜色组成。</p>
<p>要求：通过算法完成两个图像之间颜色的映射。</p>
<h2 id="分析"><a class="markdownIt-Anchor" href="#分析"></a> 分析</h2>
<p>下述出自论文**《图像处理中的颜色传递算法_李雅娜》**：</p>
<p>原文链接：<a href="https://kns.cnki.net/kcms/detail/detail.aspx?dbcode=CJFD&amp;dbname=CJFD2012&amp;filename=DNBC201208041&amp;uniplatform=NZKPT&amp;v=JPhdwT3Yv3bBKS%25mmd2B5q4Wx70JmIuHa4vc0xta%25mmd2Bfi3Nn%25mmd2BscqXky6ujnqi%25mmd2FzduGOWFn7">图像处理中的颜色传递算法 - 中国知网 (cnki.net)</a></p>
<p>由于目前图像采用的颜色空间主要为 <strong>RGB</strong> 空间，但 <strong>RGB</strong> 颜色空间的各分量之间存在着相关性，这就意味着如果改变一个像素颜色外观的话，必须改变所有的颜色通道，这使得颜色更改过程变得极为复杂。而后 <strong>Ruderman</strong> 等人基于人类视觉对图像数据的感知研究，提出了<strong>lαβ</strong> 颜色空间，与 <strong>RGB</strong> 及其他颜色空间不同的是在 <strong>lαβ</strong> 颜色空间中通道间数据的相关性最小，从而可在不同的通道独立地进行统计信息的传递。</p>
<p>查阅论文，得知</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/kSL9xQJlZ3UV4CO.png" width=500px>
<p>故，我们需要的操作如下：</p>
<ol>
<li>
<p>把源图片和目标图片由RGB转换为Lab颜色空间</p>
</li>
<li>
<p>分别两个计算各个通道的均值和方差，假设<code>s_mean、t_mean、s_std、s_std</code> 分别为源图像和目标图像Lab下某一通道的均值和方差</p>
</li>
<li>
<p>对源图像的每一通道的每个像素点作运算（设p为对应像素值）：<code>p = (p - s_mean) * (t_std / s_std) + t_mean</code></p>
</li>
<li>
<p>把图像由Lab空间转换成RGB空间</p>
</li>
<li>
<p>对转换回的RGB图像作越界检测矫正处理</p>
</li>
</ol>
<h2 id="代码"><a class="markdownIt-Anchor" href="#代码"></a> 代码</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_mean_and_std</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="comment"># 计算矩阵的均值和标准差 以Mat形式返回</span></span><br><span class="line">    x_mean, x_std = cv2.meanStdDev(x)</span><br><span class="line">    <span class="comment"># print(x_mean, x_std) 均为3*1的矩阵</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 将矩阵进行连接 转换成 2*3的矩阵 方便操作</span></span><br><span class="line">    x_mean = np.hstack(np.around(x_mean, <span class="number">2</span>))</span><br><span class="line">    <span class="comment"># print(x_mean)</span></span><br><span class="line">    x_std = np.hstack(np.around(x_std, <span class="number">2</span>))</span><br><span class="line">    <span class="comment"># print(x_std)</span></span><br><span class="line">    <span class="keyword">return</span> x_mean, x_std</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;==读取源图片==&quot;</span>)</span><br><span class="line">s = cv2.imread(<span class="string">&#x27;source.jpg&#x27;</span>)</span><br><span class="line">s = cv2.cvtColor(s, cv2.COLOR_BGR2LAB)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;==读取目标图片==&quot;</span>)</span><br><span class="line">t = cv2.imread(<span class="string">&#x27;target.jpg&#x27;</span>)</span><br><span class="line">t = cv2.cvtColor(t, cv2.COLOR_BGR2LAB)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;==计算源图片的均值和标准差==&quot;</span>)</span><br><span class="line">s_mean, s_std = get_mean_and_std(s)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;==计算目标图片的均值和标准差==&quot;</span>)</span><br><span class="line">t_mean, t_std = get_mean_and_std(t)</span><br><span class="line"></span><br><span class="line">height, width, channel = s.shape</span><br><span class="line"><span class="comment"># print(height, width, channel)</span></span><br><span class="line"><span class="comment"># 385 383 3   (1*3)</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, height):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, width):</span><br><span class="line">        <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, channel):</span><br><span class="line">            x = s[i, j, k]</span><br><span class="line">            <span class="comment"># 归一化处理</span></span><br><span class="line">            x = ((x-s_mean[k]) * (t_std[k] / s_std[k])) + t_mean[k]</span><br><span class="line">            <span class="comment"># 返回最接近的整数</span></span><br><span class="line">            x = <span class="built_in">round</span>(x)</span><br><span class="line">            <span class="comment"># 越界矫正</span></span><br><span class="line">            x = <span class="number">0</span> <span class="keyword">if</span> x &lt; <span class="number">0</span> <span class="keyword">else</span> x</span><br><span class="line">            x = <span class="number">255</span> <span class="keyword">if</span> x &gt; <span class="number">255</span> <span class="keyword">else</span> x</span><br><span class="line">            s[i, j, k] = x</span><br><span class="line"></span><br><span class="line">s = cv2.cvtColor(s, cv2.COLOR_LAB2BGR)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;==保存转换好的图片==&quot;</span>)</span><br><span class="line">cv2.imwrite(<span class="string">&#x27;result.jpg&#x27;</span>, s)</span><br></pre></td></tr></table></figure>
<h2 id="结果"><a class="markdownIt-Anchor" href="#结果"></a> 结果</h2>
<table>
<thead>
<tr>
<th style="text-align:center">source</th>
<th style="text-align:center">target</th>
<th style="text-align:center">result</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/y9vxTGSzpFcgmWb.jpg"></td>
<td style="text-align:center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/Mft5JFeisYIETKH.jpg" width=400px></td>
<td style="text-align:center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/kP6lt2SrefK7DVq.jpg"></td>
</tr>
<tr>
<td style="text-align:center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/l5SLb1qcZeiokMw.jpg"></td>
<td style="text-align:center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/YJpkoNBAGPgfnLr.jpg"></td>
<td style="text-align:center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/FNWdsfCZUR9vLDH.jpg"></td>
</tr>
</tbody>
</table>
]]></content>
      <categories>
        <category>数字图像处理</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>数字图像处理</tag>
        <tag>颜色传递</tag>
      </tags>
  </entry>
  <entry>
    <title>实用工具集合-1</title>
    <url>/posts/ee10a716.html</url>
    <content><![CDATA[<h2 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言</h2>
<p>一篇收集实用工具或网站的博客</p>
<h2 id="网站集合"><a class="markdownIt-Anchor" href="#网站集合"></a> 网站集合</h2>
<h3 id="bigjpg"><a class="markdownIt-Anchor" href="#bigjpg"></a> Bigjpg</h3>
<p><a href="https://bigjpg.com/zh">https://bigjpg.com/zh</a></p>
<p>学生狗每到考试周免不了查阅各种文献以完成期末的大作业，网络上的许多图片或多或少存在噪点，在论文中出现影响论文的美观性。</p>
<p>该网站使用最新人工智能深度学习技术——深度卷积神经网络。它会将噪点和锯齿的部分进行补充，实现图片的无损放大。</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/Hh2cLutBj6zgv1o.png">
<table>
<thead>
<tr>
<th style="text-align:left">处理前</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><img src = "https://s2.loli.net/2022/03/25/SyUPsH1tWeIq8ZG.jpg"    ></td>
</tr>
<tr>
<td style="text-align:left"><strong>处理后</strong></td>
</tr>
<tr>
<td style="text-align:left"><img src = "https://s2.loli.net/2022/03/25/QugXafNzjvO5KSm.jpg"    ></td>
</tr>
</tbody>
</table>
<h3 id="慢慢买"><a class="markdownIt-Anchor" href="#慢慢买"></a> 慢慢买</h3>
<p><a href="http://www.manmanbuy.com/">http://www.manmanbuy.com/</a></p>
<p>学生狗想买键盘，但是预算有限，怎样才能在短时间内得到合适的键盘入手价格？</p>
<p>以京东静音红轴为例</p>
<img src = "https://s2.loli.net/2022/03/25/VaeubhT1G5RsHkS.png">
<p>只需要复制商品的链接至查询页面，进行历史价格的查询</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/ATeNgtxsz6DnwKF.png">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/u4Hz6GLUTKpyf8N.png">
<p>点击最低值查看，近期便可以在349的低价位入手了。</p>
<h3 id="图书互助"><a class="markdownIt-Anchor" href="#图书互助"></a> 图书互助</h3>
<p><a href="https://www.readersteam.com/">https://www.readersteam.com/</a></p>
<p>大学僧每学期免不了购买许多专业书籍，不仅又厚又重，不便携带，而且<strong>花 销 巨 大</strong>。</p>
<p>有电脑或者平板的可以考虑查询课本的电子版，不仅方便，还能节约一部分开支去<s>搭MC服务器</s>恰69折的海底捞。</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/NH5jkGUD41OsEJ2.png">
<p>在搜索栏输入所需要的的书本名或者作者</p>
<img src = "https://s2.loli.net/2022/03/25/K69iFt7Clv48ueW.png">
<p>找到所需要的的书籍，支付一定金额即可获取</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/WhRvCqdB8zfVDm3.png">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/lbA5fSHG1idLcUY.png">
<p>或者可以参考网站的第二种查找方式，安装对应的油猴脚本后，在图书馆联盟中搜寻，如果该书存在资源，那么书籍的下方便会显示对应的图书互助编号，点击即可进入支付页面获取</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/3onUSCWNKu9E7cJ.png">
<h3 id="樱花动漫"><a class="markdownIt-Anchor" href="#樱花动漫"></a> 樱花动漫</h3>
<p><a href="https://www.meixixx.com/">https://www.meixixx.com/</a></p>
<p>域名不唯一，始终在变化，但是网站上的动漫资源全部都是高清无损的（斗罗大陆、斗破苍穹、罗小黑等）。如果网站挂了，在浏览器重新搜一下就好。</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/l15vH6VjoTmcwsG.png">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/zrMBsfwbSD1Jjqd.png">
<p><s>充会员？不可能的</s>我穷，买不起会员 但这并不能阻止我快乐的脚步</p>
<p>习惯了用魔法上油管的xdm，可以直接在油管上搜索动漫。我也不知道什么原因，鹅厂的动漫在油管上都免费，国内最新一集都收费。</p>
]]></content>
      <categories>
        <category>实用工具</category>
      </categories>
      <tags>
        <tag>小工具</tag>
        <tag>Tools</tag>
      </tags>
  </entry>
  <entry>
    <title>『LeetCode』#1刷题日记</title>
    <url>/posts/6e856e1a.html</url>
    <content><![CDATA[<h2 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言 📢</h2>
<p>本日记为个人的刷题学习日记，内容非原创，仅为自己复习知识时，能够看得懂自己<s>写的</s>CV的代码，快速理解题意。另外，👍<a href="https://leetcode-cn.com/u/leetcode-solution/">力扣官方的题解</a>很好用，<a href="https://leetcode-cn.com/u/ac_oier/">三叶姐</a>nb！！！！！</p>
<h2 id="104-二叉树的最大深度"><a class="markdownIt-Anchor" href="#104-二叉树的最大深度"></a> 104. 二叉树的最大深度 ✅</h2>
<h3 id="题意"><a class="markdownIt-Anchor" href="#题意"></a> 题意</h3>
<ul>
<li>给你一个二叉树的根结点<code>root</code>，判断该树的深度（层数）</li>
</ul>
<h3 id="思路"><a class="markdownIt-Anchor" href="#思路"></a> 思路</h3>
<p>递归</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxDepth</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(root == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;   <span class="comment">// 根节点为空 不存在 返回0</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 递归思路</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment">// root的左子树 根节点为root.left 右子树根节点为root.right</span></span><br><span class="line">            <span class="comment">// 找左右子树的层数最大值</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">left</span> <span class="operator">=</span> maxDepth(root.left);</span><br><span class="line">            <span class="type">int</span> <span class="variable">right</span> <span class="operator">=</span> maxDepth(root.right);</span><br><span class="line">            <span class="keyword">return</span> Math.max(left, right) + <span class="number">1</span>;  </span><br><span class="line">            <span class="comment">// 最后一次 返回左子树和右子树中最深的层数+1 （1为根节点层数）</span></span><br><span class="line">            <span class="comment">// 在各个子树递归过程中，最后一层（left==null right==null 0+1=1）返回上一层、层层加一 </span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * 定义了一个二叉树的节点结构</span></span><br><span class="line"><span class="comment"> * public class TreeNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;  当前节点值</span></span><br><span class="line"><span class="comment"> *     TreeNode left; 该节点的左孩子</span></span><br><span class="line"><span class="comment"> *     TreeNode right; 该节点的右孩子</span></span><br><span class="line"><span class="comment"> *     TreeNode() &#123;&#125; </span></span><br><span class="line"><span class="comment"> *     TreeNode(int val) &#123; this.val = val; &#125; this方法 给节点赋值</span></span><br><span class="line"><span class="comment"> *     定义一个二叉树的方法</span></span><br><span class="line"><span class="comment"> *     TreeNode(int val, TreeNode left, TreeNode right) &#123;</span></span><br><span class="line"><span class="comment"> *         this.val = val;</span></span><br><span class="line"><span class="comment"> *         this.left = left;</span></span><br><span class="line"><span class="comment"> *         this.right = right;</span></span><br><span class="line"><span class="comment"> *     &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
</br>
<h2 id="98-验证二叉搜索树"><a class="markdownIt-Anchor" href="#98-验证二叉搜索树"></a> 98. 验证二叉搜索树 ✅</h2>
<h3 id="题意-2"><a class="markdownIt-Anchor" href="#题意-2"></a> 题意</h3>
<ul>
<li>
<p>给你一个二叉树的根节点 <code>root</code> ，判断其是否是一个有效的二叉搜索树</p>
</li>
<li>
<p>二叉搜索树的定义：</p>
<ul>
<li>节点的左子树只包含 <strong>小于</strong> 当前节点的数。</li>
<li>节点的右子树只包含 <strong>大于</strong> 当前节点的数。</li>
<li>所有左子树和右子树自身必须也是二叉搜索树。</li>
</ul>
</li>
<li>
<p>简单说，对于任意一个节点，它的左子树内所有val小于该节点的val，它的右子树内所有val大于该节点的val，同时在左右孩子不为null的情况下，<code>root.left.val &lt; root.val &lt; root.right.val</code></p>
</li>
</ul>
<h3 id="思路-2"><a class="markdownIt-Anchor" href="#思路-2"></a> 思路</h3>
<p>中序遍历(二叉搜索树中序遍历后，得到的是一组严格递增的数)</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="comment">// 注意理解pre的含义 它始终指 当前访问的子树 的根节点的值 </span></span><br><span class="line">    <span class="comment">// 意在保证root.left.val &lt; root.val</span></span><br><span class="line">    <span class="type">long</span> <span class="variable">pre</span> <span class="operator">=</span> Long.MIN_VALUE;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isValidBST</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(root == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 中序遍历 左中右的顺序</span></span><br><span class="line">        <span class="comment">// 左子树</span></span><br><span class="line">        <span class="keyword">if</span>(!isValidBST(root.left)) &#123;    <span class="comment">// 左子树不满足二叉搜索树的条件</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 中 即当前节点</span></span><br><span class="line">        <span class="keyword">if</span>(root.val &lt;= pre) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        pre = root.val;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 访问右子树</span></span><br><span class="line">        <span class="keyword">return</span> isValidBST(root.right);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * public class TreeNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     TreeNode left;</span></span><br><span class="line"><span class="comment"> *     TreeNode right;</span></span><br><span class="line"><span class="comment"> *     TreeNode() &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int val) &#123; this.val = val; &#125;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int val, TreeNode left, TreeNode right) &#123;</span></span><br><span class="line"><span class="comment"> *         this.val = val;</span></span><br><span class="line"><span class="comment"> *         this.left = left;</span></span><br><span class="line"><span class="comment"> *         this.right = right;</span></span><br><span class="line"><span class="comment"> *     &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
<p> </p>
<h2 id="101对称二叉树"><a class="markdownIt-Anchor" href="#101对称二叉树"></a> 101.对称二叉树 ✅</h2>
<h3 id="题意-3"><a class="markdownIt-Anchor" href="#题意-3"></a> 题意</h3>
<ul>
<li>判断给定的二叉树是否轴对称</li>
</ul>
<h3 id="思路-3"><a class="markdownIt-Anchor" href="#思路-3"></a> 思路</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 对于每一层 左子树根节点val == 右子树根节点val</span></span><br><span class="line"><span class="comment">// 同时 左子树的左孩子等于右子树的右孩子 左子树的右孩子等于右子树的左孩子</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isSymmetric</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> dfs(root, root);</span><br><span class="line">        <span class="comment">// 理解 dfs(root, root) 类似于将树根看成一个镜像 树根的左孩子等于树根的右孩子 树根的右孩子等于树根的左孩子</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">dfs</span><span class="params">(TreeNode rootLeft, TreeNode rootRight)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(rootLeft == <span class="literal">null</span> &amp;&amp; rootRight == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(rootLeft == <span class="literal">null</span> || rootRight == <span class="literal">null</span> || rootLeft.val != rootRight.val) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> dfs(rootLeft.left, rootRight.right) &amp;&amp; dfs(rootLeft.right, rootRight.left);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>LeetCode</tag>
        <tag>数据结构与算法</tag>
        <tag>刷题日记</tag>
      </tags>
  </entry>
  <entry>
    <title>实用工具集合-2</title>
    <url>/posts/7719f6ac.html</url>
    <content><![CDATA[<h2 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言</h2>
<p>一篇收集实用工具或网站的博客</p>
<h2 id="工具集合"><a class="markdownIt-Anchor" href="#工具集合"></a> 工具集合</h2>
<h3 id="wox-everything"><a class="markdownIt-Anchor" href="#wox-everything"></a> Wox + Everything</h3>
<p><a href="http://www.wox.one/">http://www.wox.one/</a></p>
<p><a href="https://www.voidtools.com/zh-cn/">https://www.voidtools.com/zh-cn/</a></p>
<p>在Windows平台下，使用Wox+Everything组合工具，可以使你的办公效率提高许多倍，不仅提高了自己在编辑PPT、完成论文时文件的查找效率，甚至可以快速打开网页链接或者翻译。按下Alt+空格 打开高效办公的大门</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/tzFD2HZaAP3GOeK.png">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/FWxhwgJPTIVnsfG.png">
<p>安装及使用方法见CSDN一位博主的博客，链接如下：</p>
<p><a href="https://blog.csdn.net/DoSmall/article/details/104878432">https://blog.csdn.net/DoSmall/article/details/104878432</a></p>
<h3 id="mathpix-snipping-tool"><a class="markdownIt-Anchor" href="#mathpix-snipping-tool"></a> Mathpix Snipping Tool</h3>
<p>一款好用的公式编辑神器，在写论文时，不懂latex公式的人可谓直接裂开，这款公式编辑器可以快速识别公式，并且提供latex和word的对应公式转换，十分的方便快捷。</p>
<p>链接：<a href="https://mathpix.com/">https://mathpix.com/</a></p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/uBQyVJglMdpPKRh.png">
<p>在官网上选择对应的版本，下载安装，注册账户后，便可以使用。免费版每月可以免费使用50次。</p>
<p>使用软件界面的截图工具截取所需公式：</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/L23yYzsg5GlpIQ1.png" width=600>
<p>软件便会自动识别，提供对应的公式，word版本的或者latex版本的 甚至时PNG版本，方便插入word文件</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/lnz9bToOuFtdmJR.png" width=600>
<h3 id="snipaste"><a class="markdownIt-Anchor" href="#snipaste"></a> Snipaste</h3>
<p>一款强大的截图工具，不仅可以在截图上添加各种记号或者模糊，还能像便签一样，让截图贴在屏幕上并且灵活放大缩小</p>
<p>在Windows商店搜索即可快速安装。</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/8qyCXEdFnvT9lNI.png">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/cpI1TB6O8nqS4yx.png" width=600>
<h3 id="稻壳阅读器"><a class="markdownIt-Anchor" href="#稻壳阅读器"></a> 稻壳阅读器</h3>
<p><a href="http://www.daokeyuedu.com/">http://www.daokeyuedu.com/</a></p>
<p>如果你因知网阅读器的臃肿和缓慢而困扰的话，用稻壳阅读器就对了。</p>
<p>它不仅支持PDF文档的阅读，而且提供XDF、EPUB、Mobi、Azw、CAJ、OFD、XPS、DjVu等多种文件的阅读，而且只有5M大小，非常的简便，同时也提供简单的注释功能。</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/625BzYqpi9b7ZXx.png">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/ncjPlIkEQru8VRB.png">
]]></content>
      <categories>
        <category>实用工具</category>
      </categories>
      <tags>
        <tag>小工具</tag>
        <tag>Tools</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue面试题-03</title>
    <url>/posts/309a9a6d.html</url>
    <content><![CDATA[<h2 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言</h2>
<p>马上要秋招了，搜集整理了一些Vue面试题，包括组件、指令、API等相关内容，巩固基础😎秋招冲冲冲！！！本篇包括：</p>
<p>✅keep-alive的理解<br />
✅nextTick的理解<br />
✅vue组件之间的通信方式<br />
✅Vuex的理解及使用场景</p>
<h2 id="keep-alive的理解"><a class="markdownIt-Anchor" href="#keep-alive的理解"></a> keep-alive的理解</h2>
<ul>
<li>
<p><strong>Props：</strong></p>
<ul>
<li><code>include</code> - <code>string | RegExp | Array</code>。只有名称匹配的组件会被缓存。</li>
<li><code>exclude</code> - <code>string | RegExp | Array</code>。任何名称匹配的组件都不会被缓存。</li>
<li><code>max</code> - <code>number | string</code>。最多可以缓存多少组件实例。</li>
</ul>
</li>
<li>
<p><strong>用法：</strong></p>
<p><code>&lt;keep-alive&gt;</code> 包裹动态组件时，会缓存不活动的组件实例，而不是销毁它们。和 <code>&lt;transition&gt;</code> 相似，<code>&lt;keep-alive&gt;</code> 是一个抽象组件：它自身不会渲染一个 DOM 元素，也不会出现在组件的父组件链中。</p>
<p>当组件在 <code>&lt;keep-alive&gt;</code> 内被切换时，它的 <code>mounted</code> 和 <code>unmounted</code> 生命周期钩子不会被调用，取而代之的是 <code>activated</code> 和 <code>deactivated</code>。(这会运用在 <code>&lt;keep-alive&gt;</code> 的直接子节点及其所有子孙节点。)</p>
<p>主要用于保留组件状态或避免重新渲染。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 基本 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">keep-alive</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot;view&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">keep-alive</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 多个条件判断的子组件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">keep-alive</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">comp-a</span> <span class="attr">v-if</span>=<span class="string">&quot;a &gt; 1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">comp-a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">comp-b</span> <span class="attr">v-else</span>&gt;</span><span class="tag">&lt;/<span class="name">comp-b</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">keep-alive</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 和 `&lt;transition&gt;` 一起使用 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">transition</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">keep-alive</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot;view&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">keep-alive</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>注意，<code>&lt;keep-alive&gt;</code> 是用在其一个直属的子组件被切换的情形。如果你在其中有 <code>v-for</code> 则不会工作。如果有上述的多个条件性的子元素，<code>&lt;keep-alive&gt;</code> 要求同时只有一个子元素被渲染。</p>
</li>
<li>
<p><strong><code>include</code> 和 <code>exclude</code></strong></p>
<p><code>include</code> 和 <code>exclude</code> prop 允许组件有条件地缓存。二者都可以用逗号分隔字符串、正则表达式或一个数组来表示：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 逗号分隔字符串 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">keep-alive</span> <span class="attr">include</span>=<span class="string">&quot;a,b&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot;view&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">keep-alive</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- regex (使用 `v-bind`) --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">keep-alive</span> <span class="attr">:include</span>=<span class="string">&quot;/a|b/&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot;view&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">keep-alive</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Array (使用 `v-bind`) --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">keep-alive</span> <span class="attr">:include</span>=<span class="string">&quot;[&#x27;a&#x27;, &#x27;b&#x27;]&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot;view&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">keep-alive</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>匹配首先检查组件自身的 <code>name</code> 选项，如果 <code>name</code> 选项不可用，则匹配它的局部注册名称 (父组件 <code>components</code> 选项的键值)。匿名组件不能被匹配。</p>
</li>
<li>
<p><strong><code>max</code></strong></p>
<p>最多可以缓存多少组件实例。一旦这个数字达到了，在新实例被创建之前，已缓存组件中最久没有被访问的实例会被销毁掉。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">keep-alive</span> <span class="attr">:max</span>=<span class="string">&quot;10&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot;view&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">keep-alive</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>&lt;keep-alive&gt;</code> 不会在函数式组件中正常工作，因为它们没有缓存实例。</p>
</blockquote>
</li>
</ul>
<p>搬运文档链接：</p>
<div class="tag link"><a class="link-card" title="动态组件-keep-alive" href="https://v3.cn.vuejs.org/guide/component-dynamic-async.html#在动态组件上使用-keep-alive"><div class="left"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/link.png"/></div><div class="right"><p class="text">动态组件-keep-alive</p><p class="url">https://v3.cn.vuejs.org/guide/component-dynamic-async.html#在动态组件上使用-keep-alive</p></div></a></div>
<div class="tag link"><a class="link-card" title="API-keep-alive" href="https://v3.cn.vuejs.org/api/built-in-components.html#keep-alive"><div class="left"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/link.png"/></div><div class="right"><p class="text">API-keep-alive</p><p class="url">https://v3.cn.vuejs.org/api/built-in-components.html#keep-alive</p></div></a></div>
<h2 id="nexttick的理解"><a class="markdownIt-Anchor" href="#nexttick的理解"></a> nextTick的理解</h2>
<p>nextTick是Vue提供的一个全局API，由于vue的异步更新策略导致我们对数据的修改不会立刻体现在dom变化上，此时如果想要立即获取更新后的dom状态，就需要使用这个方法。</p>
<p>Vue 在更新 DOM 时是<strong>异步</strong>执行的。只要侦听到数据变化，Vue 将开启一个队列，并缓冲在同一事件循环中发生的所有数据变更。如果同一个 watcher 被多次触发，只会被推入到队列中一次。这种在缓冲时去除重复数据对于避免不必要的计算和 DOM 操作是非常重要的。nextTick方法会在队列中加入一个回调函数，确保该函数在前面的dom操作完成后才调用。</p>
<p>如果我们想在修改数据后立即看到dom执行结果，就需要用到nextTick方法。</p>
<hr />
<p>官方定义如下：</p>
<p>$nextTick</p>
<p><strong>参数：</strong><code>&#123;Function&#125; [callback]</code></p>
<p><strong>用法：</strong> 将回调延迟到下次 DOM 更新循环之后执行。在修改数据之后立即使用它，然后等待 DOM 更新。它跟全局方法 <code>nextTick</code> 一样，不同的是回调的 <code>this</code> 自动绑定到调用它的实例上。</p>
<p><strong>示例：</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">createApp</span>(&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="title function_">example</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="comment">// 修改数据</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">message</span> = <span class="string">&#x27;changed&#x27;</span></span><br><span class="line">      <span class="comment">// DOM 尚未更新</span></span><br><span class="line">      <span class="variable language_">this</span>.$nextTick(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// DOM 现在更新了</span></span><br><span class="line">        <span class="comment">// `this` 被绑定到当前实例</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">doSomethingElse</span>()</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><code>Vue.nextTick()</code> 是一个直接暴露在单个 Vue 对象上的全局 API。实际上，实例方法 <code>$nextTick()</code> 只是一个方便的 <code>Vue.nextTick()</code> 包裹器，将其回调的 <code>this</code> 上下文自动绑定到当前实例上，以方便使用。</p>
<hr />
<p>简单了解nextTick实现，它会在callbacks里面加入我们传入的函数，然后用timerFunc异步方式调用它们，首选的异步方式会是Promise。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> pending=<span class="literal">false</span>;</span><br><span class="line"><span class="keyword">let</span> callBacks=[];<span class="comment">//存放的是回调函数，存放的第一个回调函数是数据更新的回调函数</span></span><br><span class="line"><span class="comment">//调用this.$nextTick时执行的函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">nextTick</span> (cb, ctx) &#123;</span><br><span class="line">    <span class="keyword">var</span> _resolve;</span><br><span class="line">    callbacks.<span class="title function_">push</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (cb) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          cb.<span class="title function_">call</span>(ctx);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">          <span class="title function_">handleError</span>(e, ctx, <span class="string">&#x27;nextTick&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (_resolve) &#123;</span><br><span class="line">        <span class="title function_">_resolve</span>(ctx);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">//在数据首次修改时，pending为false，修改后，pending变成true</span></span><br><span class="line">    <span class="keyword">if</span> (!pending) &#123;</span><br><span class="line">      pending = <span class="literal">true</span>;</span><br><span class="line">      <span class="comment">//在这里用到了事件循环</span></span><br><span class="line">      <span class="title function_">timerFunc</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// $flow-disable-line</span></span><br><span class="line">    <span class="keyword">if</span> (!cb &amp;&amp; <span class="keyword">typeof</span> <span class="title class_">Promise</span> !== <span class="string">&#x27;undefined&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span> (<span class="params">resolve</span>) &#123;</span><br><span class="line">        _resolve = resolve;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//定义eventLoop函数</span></span><br><span class="line"><span class="keyword">let</span> timeFunc=<span class="literal">null</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="title class_">Promise</span> !== <span class="string">&#x27;undefined&#x27;</span> &amp;&amp; <span class="title function_">isNative</span>(<span class="title class_">Promise</span>)) &#123;</span><br><span class="line">    <span class="keyword">var</span> p = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>();</span><br><span class="line">    timerFunc = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      p.<span class="title function_">then</span>(flushCallbacks);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (isIOS) &#123; <span class="built_in">setTimeout</span>(noop); &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    isUsingMicroTask = <span class="literal">true</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!isIE &amp;&amp; <span class="keyword">typeof</span> <span class="title class_">MutationObserver</span> !== <span class="string">&#x27;undefined&#x27;</span> &amp;&amp; (</span><br><span class="line">    <span class="title function_">isNative</span>(<span class="title class_">MutationObserver</span>) ||</span><br><span class="line">    <span class="comment">// PhantomJS and iOS 7.x</span></span><br><span class="line">    <span class="title class_">MutationObserver</span>.<span class="title function_">toString</span>() === <span class="string">&#x27;[object MutationObserverConstructor]&#x27;</span></span><br><span class="line">  )) &#123;</span><br><span class="line">    <span class="keyword">var</span> counter = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">var</span> observer = <span class="keyword">new</span> <span class="title class_">MutationObserver</span>(flushCallbacks);</span><br><span class="line">    <span class="keyword">var</span> textNode = <span class="variable language_">document</span>.<span class="title function_">createTextNode</span>(<span class="title class_">String</span>(counter));</span><br><span class="line">    observer.<span class="title function_">observe</span>(textNode, &#123;</span><br><span class="line">      <span class="attr">characterData</span>: <span class="literal">true</span></span><br><span class="line">    &#125;);</span><br><span class="line">    timerFunc = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      counter = (counter + <span class="number">1</span>) % <span class="number">2</span>;</span><br><span class="line">      textNode.<span class="property">data</span> = <span class="title class_">String</span>(counter);</span><br><span class="line">    &#125;;</span><br><span class="line">    isUsingMicroTask = <span class="literal">true</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> setImmediate !== <span class="string">&#x27;undefined&#x27;</span> &amp;&amp; <span class="title function_">isNative</span>(setImmediate)) &#123;</span><br><span class="line">    timerFunc = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="title function_">setImmediate</span>(flushCallbacks);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// Fallback to setTimeout.</span></span><br><span class="line">    timerFunc = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="built_in">setTimeout</span>(flushCallbacks, <span class="number">0</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//清空事件队列中的回调函数，第一个回调函数是flushSchedulerQueue ()</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">flushCallbacks</span> () &#123;</span><br><span class="line">    pending = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">var</span> copies = callbacks.<span class="title function_">slice</span>(<span class="number">0</span>);</span><br><span class="line">    callbacks.<span class="property">length</span> = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; copies.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        copies[i]();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//flushSchedulerQueue的核心代码，执行数据更新操作</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">flushSchedulerQueue</span> () &#123;</span><br><span class="line">    currentFlushTimestamp = <span class="title function_">getNow</span>();</span><br><span class="line">    flushing = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">var</span> watcher, id;</span><br><span class="line">    queue.<span class="title function_">sort</span>(<span class="keyword">function</span> (<span class="params">a, b</span>) &#123; <span class="keyword">return</span> a.<span class="property">id</span> - b.<span class="property">id</span>; &#125;);</span><br><span class="line">    <span class="keyword">for</span> (index = <span class="number">0</span>; index &lt; queue.<span class="property">length</span>; index++) &#123;</span><br><span class="line">      watcher = queue[index];</span><br><span class="line">      <span class="keyword">if</span> (watcher.<span class="property">before</span>) &#123;</span><br><span class="line">        <span class="comment">//调用beforeUpdate()钩子函数</span></span><br><span class="line">        watcher.<span class="title function_">before</span>();</span><br><span class="line">      &#125;</span><br><span class="line">      id = watcher.<span class="property">id</span>;</span><br><span class="line">      has[id] = <span class="literal">null</span>;</span><br><span class="line">      <span class="comment">//执行更新</span></span><br><span class="line">      watcher.<span class="title function_">run</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>参考链接：</p>
<div class="tag link"><a class="link-card" title="nextTick实现原理" href="https://zhuanlan.zhihu.com/p/195531049"><div class="left"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/link.png"/></div><div class="right"><p class="text">nextTick实现原理</p><p class="url">https://zhuanlan.zhihu.com/p/195531049</p></div></a></div>
<div class="tag link"><a class="link-card" title="实例方法$nextTick" href="https://v3.cn.vuejs.org/api/instance-methods.html#nexttick"><div class="left"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/link.png"/></div><div class="right"><p class="text">实例方法$nextTick</p><p class="url">https://v3.cn.vuejs.org/api/instance-methods.html#nexttick</p></div></a></div>
<div class="tag link"><a class="link-card" title="API-nextTick" href="https://v3.cn.vuejs.org/api/global-api.html#nexttick"><div class="left"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/link.png"/></div><div class="right"><p class="text">API-nextTick</p><p class="url">https://v3.cn.vuejs.org/api/global-api.html#nexttick</p></div></a></div>
<h2 id="vue组件之间的通信方式"><a class="markdownIt-Anchor" href="#vue组件之间的通信方式"></a> vue组件之间的通信方式</h2>
<ol>
<li>组件通信方式大体有以下8种：</li>
</ol>
<ul>
<li>props</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>e</mi><mi>m</mi><mi>i</mi><mi>t</mi><mi mathvariant="normal">/</mi></mrow><annotation encoding="application/x-tex">emit/</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">e</span><span class="mord mathdefault">m</span><span class="mord mathdefault">i</span><span class="mord mathdefault">t</span><span class="mord">/</span></span></span></span>on</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>c</mi><mi>h</mi><mi>i</mi><mi>l</mi><mi>d</mi><mi>r</mi><mi>e</mi><mi>n</mi><mi mathvariant="normal">/</mi></mrow><annotation encoding="application/x-tex">children/</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">c</span><span class="mord mathdefault">h</span><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">d</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">e</span><span class="mord mathdefault">n</span><span class="mord">/</span></span></span></span>parent</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi><mi>t</mi><mi>t</mi><mi>r</mi><mi>s</mi><mi mathvariant="normal">/</mi></mrow><annotation encoding="application/x-tex">attrs/</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">a</span><span class="mord mathdefault">t</span><span class="mord mathdefault">t</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">s</span><span class="mord">/</span></span></span></span>listeners</li>
<li>ref</li>
<li>$root</li>
<li>eventbus</li>
<li>vuex</li>
</ul>
<ol start="2">
<li>根据组件之间关系讨论组件通信最为清晰有效</li>
</ol>
<ul>
<li>父子组件
<ul>
<li><code>props</code></li>
<li><code>$emit</code>/<code>$on</code></li>
<li><code>$parent</code> / <code>$children</code></li>
<li><code>ref</code></li>
<li><code>$attrs</code> / <code>$listeners</code></li>
</ul>
</li>
<li>兄弟组件
<ul>
<li><code>$parent</code></li>
<li><code>eventbus</code></li>
<li><code>vuex</code></li>
</ul>
</li>
<li>跨层级关系
<ul>
<li><code>provide</code>/<code>inject</code></li>
<li><code>$root</code></li>
<li><code>eventbus</code></li>
<li><code>vuex</code></li>
</ul>
</li>
</ul>
<p>搬运链接：</p>
<div class="tag link"><a class="link-card" title="vue中组件之间的通信方式？" href="https://github.com/57code/vue-interview/blob/master/public/05-communication/README.md"><div class="left"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/link.png"/></div><div class="right"><p class="text">vue中组件之间的通信方式？</p><p class="url">https://github.com/57code/vue-interview/blob/master/public/05-communication/README.md</p></div></a></div>
<h2 id="vuex的理解及使用场景"><a class="markdownIt-Anchor" href="#vuex的理解及使用场景"></a> Vuex的理解及使用场景</h2>
<p>Vuex 是一个专为 Vue 应用程序开发的状态管理模式。每一个 Vuex 应用的核心就是 store（仓库）。</p>
<ol>
<li>Vuex 的状态存储是响应式的；当 Vue 组件从 store 中读取状态的时候，</li>
</ol>
<p>若 store 中的状态发生变化，那么相应的组件也会相应地得到高效更新 2. 改变 store 中的状态的唯一途径就是显式地提交 (commit) mutation， 这样使得我们可以方便地跟踪每一个状态的变化 Vuex主要包括以下几个核心模块：</p>
<ol>
<li>State：定义了应用的状态数据</li>
<li>Getter：在 store 中定义“getter”（可以认为是 store 的计算属性），</li>
</ol>
<p>就像计算属性一样，getter 的返回值会根据它的依赖被缓存起来， 且只有当它的依赖值发生了改变才会被重新计算 3. Mutation：是唯一更改 store 中状态的方法，且必须是同步函数 4. Action：用于提交 mutation，而不是直接变更状态，可以包含任意异步操作 5. Module：允许将单一的 Store 拆分为多个 store 且同时保存在单一的状态树中</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2022/08/10/Z1hBUGz2LIp7slc.png" alt="vuex的理解" style="zoom:80%;" />
<p>搬运链接：</p>
<div class="tag link"><a class="link-card" title="Vuex的理解及使用场景" href="https://juejin.cn/post/7016593221815910408#heading-69"><div class="left"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/link.png"/></div><div class="right"><p class="text">Vuex的理解及使用场景</p><p class="url">https://juejin.cn/post/7016593221815910408#heading-69</p></div></a></div>
]]></content>
      <categories>
        <category>Web</category>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Web</tag>
        <tag>Vue</tag>
        <tag>面试题</tag>
        <tag>基础知识</tag>
      </tags>
  </entry>
  <entry>
    <title>『LeetCode』#3刷题日记</title>
    <url>/posts/ed9db51.html</url>
    <content><![CDATA[<h2 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言 📢</h2>
<p>本日记为个人的刷题学习日记，内容非原创，仅为自己复习知识时，能够看得懂自己<s>写的</s>CV的代码，快速理解题意。另外，👍<a href="https://leetcode-cn.com/u/leetcode-solution/">力扣官方的题解</a>很好用，<a href="https://leetcode-cn.com/u/ac_oier/">三叶姐</a>🍭nb！！！！！</p>
<h2 id="1990-寻找数组中心索引"><a class="markdownIt-Anchor" href="#1990-寻找数组中心索引"></a> 1990. 寻找数组中心索引 ✅</h2>
<h3 id="题意"><a class="markdownIt-Anchor" href="#题意"></a> 题意</h3>
<ul>
<li>
<p>给你一个数组<code>nums</code>，请计算数组的中心下标；</p>
</li>
<li>
<p>相当于一个天平，寻找数组中的一个元素为天平轴(不计算)，使得天平左右两端数字和相等</p>
</li>
</ul>
<h3 id="思路"><a class="markdownIt-Anchor" href="#思路"></a> 思路</h3>
  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 计算数组的总和，把中心点当做滑动块，左右两边重量为left、right</span></span><br><span class="line"><span class="comment">// 每次滑动一格， left加上新增的元素， right等于sum - left - 减少的元素</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">pivotIndex</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> nums.length;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;nums.length; i++) &#123;</span><br><span class="line">            sum += nums[i];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">left</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> right;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;len; i++) &#123;</span><br><span class="line">            right = sum - left - nums[i];</span><br><span class="line">            <span class="keyword">if</span>(left == right)&#123;</span><br><span class="line">                <span class="keyword">return</span> i;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                left = left + nums[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="35-搜索插入位置"><a class="markdownIt-Anchor" href="#35-搜索插入位置"></a> 35. 搜索插入位置 ✅</h2>
<h3 id="题意-2"><a class="markdownIt-Anchor" href="#题意-2"></a> 题意</h3>
<ul>
<li>给定一个严格递增数组和一个目标值，返回该数组中目标值的下标，如果不含该值，返回顺序插入的位置</li>
</ul>
<h3 id="思路-2"><a class="markdownIt-Anchor" href="#思路-2"></a> 思路</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 二分法</span></span><br><span class="line"><span class="comment">// 最后跳出循环的模拟 假设 此时在下标为3 4 的区间 数值分别是9和12 target为10 数值应当插入下标4的位置</span></span><br><span class="line"><span class="comment">// mid = 3; nums[mid] &lt; target  (9&lt;10); left = mid + 1;  此时left==right==4 </span></span><br><span class="line"><span class="comment">// 再一次循环 nums[mid] &gt; target  (12&gt;10) right = mid - 1; 此时right为3 left为4 返回left</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">searchInsert</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> nums.length;</span><br><span class="line">        <span class="type">int</span> <span class="variable">left</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">right</span> <span class="operator">=</span> len - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(left &lt;= right) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> left + ((right - left) &gt;&gt; <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">if</span>(target == nums[mid]) &#123;</span><br><span class="line">                <span class="keyword">return</span> mid;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(target &lt; nums[mid]) &#123;</span><br><span class="line">                right = mid - <span class="number">1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                left = mid + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> left;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="面试题0107-旋转矩阵"><a class="markdownIt-Anchor" href="#面试题0107-旋转矩阵"></a> 面试题01.07 旋转矩阵 ✅</h2>
<h3 id="题意-3"><a class="markdownIt-Anchor" href="#题意-3"></a> 题意</h3>
<ul>
<li>给你一个N*N大小的矩阵，将其顺时针旋转90°，得到旋转后的数组</li>
</ul>
<h3 id="思路-3"><a class="markdownIt-Anchor" href="#思路-3"></a> 思路</h3>
<ul>
<li>在使用额外空间的情况下，可以考虑观察旋转后的规律：
<ul>
<li>新矩阵的行 对应原矩阵的列</li>
<li>举例说明：新矩阵从左到右的一行为<code>7,4,1</code>，原矩阵从下往上数第一列为<code>7,4,1</code></li>
<li>按照对应的顺序，给新矩阵赋值即可</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">rotate</span><span class="params">(<span class="type">int</span>[][] matrix)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> matrix.length;</span><br><span class="line">        <span class="type">int</span>[][] matrix_new = <span class="keyword">new</span> <span class="title class_">int</span>[n][n];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; len; j++) &#123;</span><br><span class="line">                matrix_new[j][len - i - <span class="number">1</span>] = matrix[i][j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; len; ++i) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; len; ++j) &#123;</span><br><span class="line">                matrix[i][j] = matrix_new[i][j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>在不使用额外空间的情况下，将数组上下翻转，再沿对角线交换对称元素即可</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">rotate</span><span class="params">(<span class="type">int</span>[][] matrix)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> matrix[<span class="number">0</span>].length;</span><br><span class="line">        <span class="type">int</span> temp;</span><br><span class="line">        <span class="comment">// 先上下翻转</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span><span class="number">0</span>; i&lt;len/<span class="number">2</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>; j&lt;len; j++) &#123;</span><br><span class="line">                temp = matrix[i][j];</span><br><span class="line">                matrix[i][j] = matrix[len-<span class="number">1</span>-i][j];</span><br><span class="line">                matrix[len-<span class="number">1</span>-i][j] = temp;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 再沿对角线翻转</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;len; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>; j&lt;i; j++) &#123;</span><br><span class="line">                temp = matrix[i][j];</span><br><span class="line">                matrix[i][j] = matrix[j][i];</span><br><span class="line">                matrix[j][i] = temp;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>LeetCode</tag>
        <tag>数据结构与算法</tag>
        <tag>刷题日记</tag>
      </tags>
  </entry>
  <entry>
    <title>『LeetCode』#2刷题日记</title>
    <url>/posts/d34f02d4.html</url>
    <content><![CDATA[<h2 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言 📢</h2>
<p>本日记为个人的刷题学习日记，内容非原创，仅为自己复习知识时，能够看得懂自己<s>写的</s>CV的代码，快速理解题意。另外，👍<a href="https://leetcode-cn.com/u/leetcode-solution/">力扣官方的题解</a>很好用，<a href="https://leetcode-cn.com/u/ac_oier/">三叶姐</a>🍭nb！！！！！</p>
<h2 id="6034-数组三角形的和"><a class="markdownIt-Anchor" href="#6034-数组三角形的和"></a> 6034、数组三角形的和 ✅</h2>
<h3 id="题意"><a class="markdownIt-Anchor" href="#题意"></a> 题意</h3>
<ul>
<li>给你一个杨辉三角，计算三角底部的值</li>
<li>每一层 <code>newNums[i] = nums[i] + nums[i+1]</code></li>
</ul>
<h3 id="思路"><a class="markdownIt-Anchor" href="#思路"></a> 思路</h3>
<ul>
<li>因为每次操作，新的值总是居于前，所以如果覆盖给原数组后，不影响<code>nums[i+1]</code>所决定的下一层值；</li>
<li>直接在原数组上操作覆盖即可；</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">triangularSum</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> nums.length;</span><br><span class="line">        <span class="keyword">while</span>(len &gt; <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;len-<span class="number">1</span>; i++) &#123;</span><br><span class="line">                nums[i] = (nums[i] + nums[i+<span class="number">1</span>]) % <span class="number">10</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            len--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> nums[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="6033-转换数字的最少位翻转次数"><a class="markdownIt-Anchor" href="#6033-转换数字的最少位翻转次数"></a> 6033、转换数字的最少位翻转次数 ✅</h2>
<h3 id="题意-2"><a class="markdownIt-Anchor" href="#题意-2"></a> 题意</h3>
<ul>
<li>给定一次位翻转的定义：一个数的二进制，其中一位由原本的值变为非后的值，为一次位翻转</li>
<li>求：给定一个数<code>start</code>、一个数<code>goal</code>，需要将<code>start</code>翻转多少次，才能使<code>start == goal</code></li>
</ul>
<h3 id="思路-2"><a class="markdownIt-Anchor" href="#思路-2"></a> 思路</h3>
<ul>
<li>翻转的次数等于两个数二进制不同的位数</li>
<li>异或运算：相同为0，不同为1，将<code>start</code>、和<code>goal</code>进行异或后，结果位上有几个1，就需要翻转几次</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">minBitFlips</span><span class="params">(<span class="type">int</span> start, <span class="type">int</span> goal)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> start ^ goal;</span><br><span class="line">        <span class="type">int</span> <span class="variable">cnt</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;<span class="number">32</span>; i++) &#123;	<span class="comment">// 遍历所有位数</span></span><br><span class="line">            cnt += (result &amp; <span class="number">1</span>);	<span class="comment">// 与1进行与运算，确定当前最左位是否是1</span></span><br><span class="line">            result = result &gt;&gt; <span class="number">1</span>;	<span class="comment">// 右移一位 最高位补0 最低位丢弃</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> cnt;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>LeetCode</tag>
        <tag>数据结构与算法</tag>
        <tag>刷题日记</tag>
      </tags>
  </entry>
  <entry>
    <title>『LeetCode』#5刷题日记</title>
    <url>/posts/ae3c048c.html</url>
    <content><![CDATA[<h2 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言 📢</h2>
<p>本日记为个人的刷题学习日记，内容非原创，仅为自己复习知识时，能够看得懂自己<s>写的</s>CV的代码，快速理解题意。另外，👍<a href="https://leetcode-cn.com/u/leetcode-solution/">力扣官方的题解</a>很好用，<a href="https://leetcode-cn.com/u/ac_oier/">三叶姐</a>🍭nb！！！！！</p>
<br>
<h2 id="821-字符的最短距离"><a class="markdownIt-Anchor" href="#821-字符的最短距离"></a> 821 字符的最短距离</h2>
<h3 id="题意"><a class="markdownIt-Anchor" href="#题意"></a> 题意</h3>
<ul>
<li>
<p>给你一个字符串 <code>s</code> 和一个字符 <code>c</code> ，且 <code>c</code> 是 <code>s</code> 中出现过的字符。</p>
</li>
<li>
<p>返回一个整数数组 <code>answer</code> ，其中 <code>answer.length == s.length</code> 且 <code>answer[i]</code> 是 <code>s</code> 中从下标 <code>i</code> 到离它 <strong>最近</strong> 的字符 <code>c</code> 的 <strong>距离</strong> 。两个下标 <code>i</code> 和 <code>j</code> 之间的 <strong>距离</strong> 为 <code>abs(i - j)</code> ，其中 <code>abs</code> 是绝对值函数。</p>
</li>
<li>
<p>简单说，从字符串<code>s</code>中找一定出现的字符<code>c</code>，并且记录<code>s</code>中每个字符距离<code>c</code>的最短距离（因为<code>c</code>可能出现多次），返回记录距离的数组</p>
</li>
</ul>
<br>
<h3 id="思路"><a class="markdownIt-Anchor" href="#思路"></a> 思路</h3>
<ul>
<li>暴力 遍历一遍字符数组，找出该字符<code>c</code>的位置，记录为<code>position[]</code></li>
<li>再遍历一遍，计算当前字符与<code>position</code>数组中距离的最小值</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[] shortestToChar(String s, <span class="type">char</span> c) &#123;</span><br><span class="line">        <span class="type">char</span>[] strs = s.toCharArray();</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> strs.length;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span>[] answer = <span class="keyword">new</span> <span class="title class_">int</span>[len];</span><br><span class="line">        <span class="type">int</span>[] position = <span class="keyword">new</span> <span class="title class_">int</span>[len];</span><br><span class="line">        </span><br><span class="line">        <span class="type">int</span> <span class="variable">cnt</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(strs[i] == c) &#123;</span><br><span class="line">                position[cnt] = i;</span><br><span class="line">                <span class="comment">// System.out.println(i);</span></span><br><span class="line">                cnt++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> len+<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>; j&lt;cnt; j++) &#123;</span><br><span class="line">                temp = temp &gt; Math.abs(i - position[j]) ? Math.abs(i - position[j]) : temp;</span><br><span class="line">            &#125;</span><br><span class="line">            answer[i] = temp;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> answer;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<br>
<h2 id="6041-多个数组求交集"><a class="markdownIt-Anchor" href="#6041-多个数组求交集"></a> 6041 多个数组求交集</h2>
<h3 id="题意-2"><a class="markdownIt-Anchor" href="#题意-2"></a> 题意</h3>
<ul>
<li>给你一个二维整数数组 <code>nums</code> ，其中 <code>nums[i]</code> 是由 <strong>不同</strong> 正整数组成的一个非空数组，</li>
<li>按 <strong>升序排列</strong> 返回一个数组，数组中的每个元素在 <code>nums</code> <strong>所有数组</strong> 中都出现过。</li>
</ul>
<br>
<h3 id="思路-2"><a class="markdownIt-Anchor" href="#思路-2"></a> 思路</h3>
<ul>
<li>由于<strong>每个数组</strong>中，<strong>数字各不相同</strong>，因此<strong>所有数组中均出现的数字，其出现的次数等于数组个数</strong></li>
<li>用哈希表统计所有数字出现的次数，次数等于数组个数的数字，即为我们所要找的</li>
<li>将这些数字添加入列表后排序，返回</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;Integer&gt; <span class="title function_">intersection</span><span class="params">(<span class="type">int</span>[][] nums)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">row</span> <span class="operator">=</span> nums.length;</span><br><span class="line">        Map&lt;Integer, Integer&gt; cntMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">// 哈希表统计数字出现的次数</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;row; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>; j&lt;nums[i].length; j++) &#123;</span><br><span class="line">                cntMap.put(nums[i][j], cntMap.getOrDefault(nums[i][j], <span class="number">0</span>) + <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 新建数组列表</span></span><br><span class="line">        List&lt;Integer&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">// int[] list = new int[row];</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">cnt</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> y : cntMap.keySet()) &#123;</span><br><span class="line">            <span class="comment">// 将出现次数等于数组数的数字 添加进列表</span></span><br><span class="line">            <span class="keyword">if</span>(cntMap.get(y) == row) &#123;</span><br><span class="line">                <span class="comment">// System.out.println(key);</span></span><br><span class="line">                list.add(y);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 排序后返回</span></span><br><span class="line">        Collections.sort(list);</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<br>
<h3 id="知识点"><a class="markdownIt-Anchor" href="#知识点"></a> 知识点</h3>
<ul>
<li><a href="https://kzmqvq.com/posts/73aadd09.html">哈希表</a></li>
<li><a href="https://blog.csdn.net/zhyt710/article/details/83363808">数组列表排序</a></li>
</ul>
<br>
<h2 id="剑指-offer-ii-119-最长连续序列"><a class="markdownIt-Anchor" href="#剑指-offer-ii-119-最长连续序列"></a> 剑指 Offer II 119. 最长连续序列</h2>
<h3 id="题意-3"><a class="markdownIt-Anchor" href="#题意-3"></a> 题意</h3>
<ul>
<li>给定一个未排序的整数数组 <code>nums</code> ，找出数字连续的最长序列（不要求序列元素在原数组中连续）的长度。</li>
</ul>
<br>
<h3 id="思路-3"><a class="markdownIt-Anchor" href="#思路-3"></a> 思路</h3>
<ul>
<li>双指针</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">longestConsecutive</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="comment">// 排除特殊情况 长度0或1的数组</span></span><br><span class="line">        <span class="keyword">if</span>(nums.length == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(nums.length == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 数组排序 从小到大满足数组连续</span></span><br><span class="line">        Arrays.sort(nums);</span><br><span class="line">        <span class="type">int</span> i=<span class="number">0</span>, j=<span class="number">1</span>;</span><br><span class="line">        <span class="comment">// 双指针</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">tmpLen</span> <span class="operator">=</span> <span class="number">1</span>, maxLen = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(j &lt; nums.length) &#123;</span><br><span class="line">            <span class="comment">// 当两数连续的情况 两个指针均向前移动一位 </span></span><br><span class="line">            <span class="comment">// 暂时最大长度增加一位</span></span><br><span class="line">            <span class="keyword">if</span>(nums[i] == nums[j] - <span class="number">1</span>) &#123;</span><br><span class="line">                tmpLen++;</span><br><span class="line">                i++;</span><br><span class="line">                j++;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(nums[i] == nums[j]) &#123;</span><br><span class="line">                <span class="comment">// 解决两数相同的情况 </span></span><br><span class="line">                <span class="comment">// i必须随着j的移动而移动 不然会出现 [0, 1, 2, 2, 2, 3, 8] nums[2] == nums[6] - 1的情况</span></span><br><span class="line">                i++;    <span class="comment">// i = j</span></span><br><span class="line">                j++;    </span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// 两数不连续 暂时最大长度初始化</span></span><br><span class="line">                i++;    <span class="comment">// i = j</span></span><br><span class="line">                j++;    <span class="comment">// j = i + 1</span></span><br><span class="line">                maxLen = tmpLen &gt; maxLen ? tmpLen : maxLen;</span><br><span class="line">                tmpLen = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 最后再比较一次 避免 [1, 2, 3, 4, 5, 6, 7]这类情况</span></span><br><span class="line">        maxLen = tmpLen &gt; maxLen ? tmpLen : maxLen;</span><br><span class="line">        <span class="keyword">return</span> maxLen;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>LeetCode</tag>
        <tag>数据结构与算法</tag>
        <tag>刷题日记</tag>
        <tag>力扣周赛</tag>
      </tags>
  </entry>
  <entry>
    <title>『LeetCode』#4刷题日记</title>
    <url>/posts/73aadd09.html</url>
    <content><![CDATA[<h2 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言 📢</h2>
<p>本日记为个人的刷题学习日记，内容非原创，仅为自己复习知识时，能够看得懂自己<s>写的</s>CV的代码，快速理解题意。另外，👍<a href="https://leetcode-cn.com/u/leetcode-solution/">力扣官方的题解</a>很好用，<a href="https://leetcode-cn.com/u/ac_oier/">三叶姐</a>🍭nb！！！！！</p>
<br>
<h2 id="15-三数之和"><a class="markdownIt-Anchor" href="#15-三数之和"></a> 15. 三数之和 ✅</h2>
<h3 id="题意"><a class="markdownIt-Anchor" href="#题意"></a> 题意</h3>
<ul>
<li>给你一个包含<code>n</code>个整数的数组<code>nums</code></li>
<li>判断<code>nums</code>中是否存在a，b，c，使得<code>a + b + c == 0</code></li>
<li>找出所有满足条件的三数组合<code>[a, b, c]</code>，不可以包含重复的数组</li>
</ul>
<br>
<h3 id="思路"><a class="markdownIt-Anchor" href="#思路"></a> 思路</h3>
<ul>
<li>排序 + 双指针</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; <span class="title function_">threeSum</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; lists = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">// 排序</span></span><br><span class="line">        Arrays.sort(nums);</span><br><span class="line">        <span class="comment">// 双指针</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> nums.length;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">            <span class="comment">// 如果当前 第一个数大于0 那么 后续第二第三个数一定也大于零 </span></span><br><span class="line">            <span class="comment">// 三数之和一定大于零 不存在可能组合 跳出</span></span><br><span class="line">            <span class="keyword">if</span>(nums[i] &gt; <span class="number">0</span>)     <span class="keyword">return</span> lists;</span><br><span class="line">            <span class="comment">// 如果当前第一个数 和 移动前第一个数相等 那么会出现重复组合 跳过</span></span><br><span class="line">            <span class="keyword">if</span>(i &gt; <span class="number">0</span> &amp;&amp; nums[i] == nums[i-<span class="number">1</span>]) <span class="keyword">continue</span>;</span><br><span class="line">			</span><br><span class="line">            </span><br><span class="line">            <span class="type">int</span> <span class="variable">curr</span> <span class="operator">=</span> nums[i];</span><br><span class="line">            <span class="type">int</span> <span class="variable">L</span> <span class="operator">=</span> i + <span class="number">1</span>, R = len - <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">while</span>(L &lt; R) &#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">tmp</span> <span class="operator">=</span> curr + nums[R] + nums[L];</span><br><span class="line">                <span class="keyword">if</span>(tmp == <span class="number">0</span>) &#123;</span><br><span class="line">                    List&lt;Integer&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">                    list.add(curr);</span><br><span class="line">                    list.add(nums[L]);</span><br><span class="line">                    list.add(nums[R]);</span><br><span class="line">                    lists.add(list);</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">while</span>(L &lt; R &amp;&amp; nums[L+<span class="number">1</span>] == nums[L]) L++; 	<span class="comment">// 第二个数前移 如果相等就再移动一位</span></span><br><span class="line">                    <span class="keyword">while</span>(L &lt; R &amp;&amp; nums[R-<span class="number">1</span>] == nums[R]) R--;	<span class="comment">// 第三个数后移 如果相等就再移动</span></span><br><span class="line">                    <span class="comment">// 针对数值不同的情况 二数左移 三数右移一位</span></span><br><span class="line">                    L++;</span><br><span class="line">                    R--;</span><br><span class="line"></span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (tmp &lt; <span class="number">0</span>) &#123;</span><br><span class="line">                    L++;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    R--;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> lists;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<br>
<h2 id="6060-找到最接近零的数字"><a class="markdownIt-Anchor" href="#6060-找到最接近零的数字"></a> 6060 找到最接近零的数字 ✅</h2>
<h3 id="题意-2"><a class="markdownIt-Anchor" href="#题意-2"></a> 题意</h3>
<ul>
<li>给你一个长度为n的数组，返回这个数组中离0最近的数字</li>
<li>如果出现距离相同的情况，返回数值大的一方，如1和-1 返回1</li>
</ul>
<br>
<h3 id="思路-2"><a class="markdownIt-Anchor" href="#思路-2"></a> 思路</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 根据题意进行模拟即可 一次for循环，记录当前值与存储值举例0的距离</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">findClosestNumber</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> Integer.MAX_VALUE;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> nums.length;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">            <span class="comment">// 如果距离小 替换存储值</span></span><br><span class="line">            <span class="keyword">if</span>(Math.abs(nums[i]) &lt; Math.abs(temp)) &#123;</span><br><span class="line">                temp = nums[i];</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(Math.abs(nums[i]) == Math.abs(temp)) &#123;	<span class="comment">// 如果距离相等 返回数值大的一方</span></span><br><span class="line">                temp = temp &gt; nums[i] ? temp : nums[i];</span><br><span class="line">            &#125; </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> temp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<br>
<h2 id="6061-买钢笔和铅笔的方案数"><a class="markdownIt-Anchor" href="#6061-买钢笔和铅笔的方案数"></a> 6061 买钢笔和铅笔的方案数 ✅</h2>
<h3 id="题意-3"><a class="markdownIt-Anchor" href="#题意-3"></a> 题意</h3>
<ul>
<li>给你一个整数total表示拥有的总钱数，分别用cost1和cost2表示钢笔和铅笔的单价</li>
<li>可以花费部分或者全部的金钱，买任意数目的两张笔</li>
<li><code>1 &lt;= total, cost1, cost2 &lt;= 1e6</code></li>
</ul>
<br>
<h3 id="思路-3"><a class="markdownIt-Anchor" href="#思路-3"></a> 思路</h3>
<ul>
<li>这里的任意数目可以为零，即 可以一分不花什么都不买回家，算作一种方案</li>
<li>根据题意模拟，注意特殊情况 <code>1e6, 1, 1</code></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">waysToBuyPensPencils</span><span class="params">(<span class="type">int</span> total, <span class="type">int</span> cost1, <span class="type">int</span> cost2)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> total / cost1;</span><br><span class="line">        <span class="comment">// 避免特殊情况 总方案数溢出 int</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// 总钱数不够 直接回家</span></span><br><span class="line">        <span class="keyword">if</span>(total &lt; cost1 &amp;&amp; total &lt; cost2) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">	</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt;= m; i++) &#123;</span><br><span class="line">            <span class="comment">// 由于不买也算一种方案 故遍历 cnt的初始值为 1</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">cnt</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">            cnt += (total - cost1 * i) / cost2;</span><br><span class="line">            sum += cnt;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<br>
<h2 id="6080-计算字符串的数字和"><a class="markdownIt-Anchor" href="#6080-计算字符串的数字和"></a> 6080 计算字符串的数字和 ✅</h2>
<h3 id="题意-4"><a class="markdownIt-Anchor" href="#题意-4"></a> 题意</h3>
<ul>
<li>
<p>给你一个由若干数字（<code>0</code> - <code>9</code>）组成的字符串 <code>s</code> ，和一个整数。如果 <code>s</code> 的长度大于 <code>k</code> ，则可以执行一轮操作。在一轮操作中，需要完成以下工作：</p>
<ul>
<li>将 <code>s</code> <strong>拆分</strong> 成长度为 <code>k</code> 的若干 <strong>连续数字组</strong> ，使得前 <code>k</code> 个字符都分在第一组，接下来的 <code>k</code> 个字符都分在第二组，依此类推。<strong>注意</strong>，最后一个数字组的长度可以小于 <code>k</code> 。</li>
<li>用表示每个数字组中所有数字之和的字符串来 <strong>替换</strong> 对应的数字组。例如，<code>&quot;346&quot;</code> 会替换为 <code>&quot;13&quot;</code> ，因为 <code>3 + 4 + 6 = 13</code> 。</li>
<li><strong>合并</strong> 所有组以形成一个新字符串。如果新字符串的长度大于 <code>k</code> 则重复第一步。</li>
</ul>
</li>
<li>
<p>返回在完成所有轮操作后的 <code>s</code> 。</p>
</li>
<li>
<p><strong>简单说</strong>，给你一个字符串，需要不停地把它切分成长度为 <code>k</code> 的小段，最后一小段可以长度小于 <code>k</code>，每次切分好后，需要<strong>计算每小段的代数和</strong>，然后把它们<strong>作为字符串按顺序拼接起来</strong>，继续操作，知道拼接后的字符串小于 <code>k</code></p>
</li>
</ul>
<br>
<h3 id="思路-4"><a class="markdownIt-Anchor" href="#思路-4"></a> 思路</h3>
<ul>
<li>使用递归的方法，说明每次相同的操作及结束条件</li>
<li>巩固字符串不熟悉的知识</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 小切片的操作是重复的 使用递归的思路</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">digitSum</span><span class="params">(String s, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">        <span class="comment">// 返回判断 如果当前字符串的长度 小于 所给定的长度k 返回</span></span><br><span class="line">        <span class="keyword">if</span>(s.length() &lt;= k) &#123;</span><br><span class="line">            <span class="keyword">return</span> s;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// java 新建一个string的函数 StringBuilder</span></span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">        <span class="comment">// 定义 数字串的长度 len</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> s.length();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; len; i+=k) &#123;</span><br><span class="line">            <span class="comment">// 定义 长度为k的小切片的和 sum</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; k &amp;&amp; j + i &lt; len; j++) &#123;</span><br><span class="line">                <span class="comment">// 计算切片和</span></span><br><span class="line">                sum += (s.charAt(j + i) - <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            sb.append(sum);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 递归 整体合并为一个字符串 继续进行切片处理</span></span><br><span class="line">        <span class="keyword">return</span> digitSum(sb.toString(), k);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<br>
<h3 id="知识点"><a class="markdownIt-Anchor" href="#知识点"></a> 知识点</h3>
<ul>
<li>StringBuilder</li>
</ul>
<ol>
<li>此类提供与<code>StringBuffer</code>兼容的API，但<strong>不保证同步</strong>。 此类设计用作<code>StringBuffer</code>替代品，用于单个线程使用字符串缓冲区的位置（通常情况下）。 在可能的情况下，建议使用此类优先于<code>StringBuffer</code>，因为在大多数实现中它会更快。<code>StringBuilder</code>上的主要操作是<code>append</code>和<code>insert</code>方法，它们被重载以便接受任何类型的数据。 每个都有效地将给定的数据转换为字符串，然后将该字符串的字符追加或插入到字符串构建器中。 <code>append</code>方法始终在构建器的末尾添加这些字符; <code>insert</code>方法在指定点添加字符。</li>
<li>简单说，它与<code>StringBuffer</code>的构造方法相似，并且单个线程比其更快。就是<code>StringBuild</code>不能同步访问。</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2022/04/25/IoZz2NQtqaMfbGs.png" alt="知识点1" /></p>
<br>
<h2 id="6071-完成所有任务所需要的最小轮数"><a class="markdownIt-Anchor" href="#6071-完成所有任务所需要的最小轮数"></a> 6071 完成所有任务所需要的最小轮数 ✅</h2>
<h3 id="题意-5"><a class="markdownIt-Anchor" href="#题意-5"></a> 题意</h3>
<ul>
<li>给你一个下标从 <strong>0</strong> 开始的整数数组 <code>tasks</code> ，其中 <code>tasks[i]</code> 表示任务的难度级别。在每一轮中，你可以完成 2 个或者 3 个 <strong>相同难度级别</strong> 的任务。</li>
<li>返回完成所有任务需要的 <strong>最少</strong> 轮数，如果无法完成所有任务，返回 <code>-1</code> 。</li>
</ul>
<br>
<h3 id="思路-5"><a class="markdownIt-Anchor" href="#思路-5"></a> 思路</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 哈希表 + 贪心</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">minimumRounds</span><span class="params">(<span class="type">int</span>[] tasks)</span> &#123;</span><br><span class="line">        <span class="comment">// 累加器 统计总和</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">ans</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 用哈希表记录 相同难度级别任务的个数</span></span><br><span class="line">        Map&lt;Integer, Integer&gt; cntMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> task : tasks) &#123;</span><br><span class="line">            cntMap.put(task, cntMap.getOrDefault(task, <span class="number">0</span>) + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> val : cntMap.values()) &#123;</span><br><span class="line">            <span class="keyword">if</span>(val == <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 遇到刚好被三整除的情况 相除的结果等于方案数</span></span><br><span class="line">            <span class="keyword">if</span>(val % <span class="number">3</span> == <span class="number">0</span>) &#123;</span><br><span class="line">                ans += val / <span class="number">3</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;    </span><br><span class="line">                <span class="comment">// 不能被三整除的情况 比如 4 5 7 8 他们的方案数 都是 商的值加1</span></span><br><span class="line">                ans += val / <span class="number">3</span> + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<br>
<h3 id="知识点-2"><a class="markdownIt-Anchor" href="#知识点-2"></a> 知识点</h3>
<ul>
<li>
<p>哈希表</p>
<ol>
<li>
<p>HashMap 的 key 与 value 类型<strong>可以相同也可以不同</strong>，可以是字符串（String）类型的 key 和 value，也可以是整型（Integer）的 key 和字符串（String）类型的 value。它和python的字典有些相似，但它们仍有区别。</p>
</li>
<li>
<p>可以使用 for-each 来迭代 HashMap 中的元素。如果你只想获取 key，可以使用 keySet() 方法，然后可以通过 get(key) 获取对应的 value，如果你只想获取 value，可以使用 values() 方法。与本题哈希表的遍历相同。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RunoobTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 创建 HashMap 对象 Sites</span></span><br><span class="line">        HashMap&lt;Integer, String&gt; Sites = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;Integer, String&gt;();</span><br><span class="line">        <span class="comment">// 添加键值对</span></span><br><span class="line">        Sites.put(<span class="number">1</span>, <span class="string">&quot;Google&quot;</span>);</span><br><span class="line">        Sites.put(<span class="number">2</span>, <span class="string">&quot;Runoob&quot;</span>);</span><br><span class="line">        Sites.put(<span class="number">3</span>, <span class="string">&quot;Taobao&quot;</span>);</span><br><span class="line">        Sites.put(<span class="number">4</span>, <span class="string">&quot;Zhihu&quot;</span>);</span><br><span class="line">        <span class="comment">// 输出 key 和 value</span></span><br><span class="line">        <span class="keyword">for</span> (Integer i : Sites.keySet()) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;key: &quot;</span> + i + <span class="string">&quot; value: &quot;</span> + Sites.get(i));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 返回所有 value 值</span></span><br><span class="line">        <span class="keyword">for</span>(String value: Sites.values()) &#123;</span><br><span class="line">          <span class="comment">// 输出每一个value</span></span><br><span class="line">          System.out.print(value + <span class="string">&quot;, &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ul>
]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>LeetCode</tag>
        <tag>数据结构与算法</tag>
        <tag>刷题日记</tag>
        <tag>力扣周赛</tag>
      </tags>
  </entry>
  <entry>
    <title>【Bug周刊】Vol.1</title>
    <url>/posts/fb9c6449.html</url>
    <content><![CDATA[<h2 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言</h2>
<p>最近开发中遇到很多相同的问题，下意识去翻自己的历史记录，但又没能快速定位。我的<code>trilium</code>一直用来记录自己的周报和相关教程，对于常见的bug和修复方案也找不到合适的地方，只能穿插在日报的历史中，随时间沉没。无意间翻到子舒的奇趣周刊，Bug周刊也由此而生。</p>
<h2 id="hexo-command-not-found"><a class="markdownIt-Anchor" href="#hexo-command-not-found"></a> Hexo command not found</h2>
<h3 id="问题描述"><a class="markdownIt-Anchor" href="#问题描述"></a> 问题描述</h3>
<p>一段时间没有更新hexo博客，使用hexo的命令行时警告没有改命令，由于在几个月前配置过新电脑的环境并验证，所以可以排除是原来hexo博客迁移的问题，查找教程后，将博客文件目录下的 <code>/node_modules/.bin</code> 文件夹加入 <code>环境变量-&gt;系统变量-&gt;path</code> 中即可解决。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.sa.net/2024/02/27/ZxsaiSdHVEGPBy3.png" alt="" /></p>
<div class="note info flat"><p>注意：是<strong>博客源码文件夹</strong>下的<code>node_moudles/.bin</code> 不是安装nodejs的node_moudles，</p>
</div>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.sa.net/2024/02/27/RIxoUY6f1tLBOn3.png" alt="" /></p>
<h3 id="参考链接"><a class="markdownIt-Anchor" href="#参考链接"></a> 参考链接</h3>
<div class="tag link"><a class="link-card" title="完美解决 bash: hexo: command not found" href="https://blog.csdn.net/qq_36759224/article/details/100411949"><div class="left"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/link.png"/></div><div class="right"><p class="text">完美解决 bash: hexo: command not found</p><p class="url">https://blog.csdn.net/qq_36759224/article/details/100411949</p></div></a></div>
<h2 id="清理winsxs出错"><a class="markdownIt-Anchor" href="#清理winsxs出错"></a> 清理WinSxS出错</h2>
<h3 id="问题描述-2"><a class="markdownIt-Anchor" href="#问题描述-2"></a> 问题描述</h3>
<p>使用dism++进行空间回收时，勾选“被取代的WinSxS组件”出错，无法正常进行清理，这是版本的bug，<strong>更新版本至10.1.1002.1或更高版本</strong>。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.sa.net/2024/02/27/nBQjzp39yS84Aei.png" alt="" /></p>
<h3 id="参考链接-2"><a class="markdownIt-Anchor" href="#参考链接-2"></a> 参考链接</h3>
<div class="tag link"><a class="link-card" title="dism++ issues" href="https://github.com/Chuyu-Team/Dism-Multi-language/issues/867"><div class="left"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/link.png"/></div><div class="right"><p class="text">dism++ issues</p><p class="url">https://github.com/Chuyu-Team/Dism-Multi-language/issues/867</p></div></a></div>
<div class="tag link"><a class="link-card" title="【Dism++】“被取代的WinSxS组件”清理出错怎么办" href="https://zhuanlan.zhihu.com/p/675305615"><div class="left"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/link.png"/></div><div class="right"><p class="text">【Dism++】“被取代的WinSxS组件”清理出错怎么办</p><p class="url">https://zhuanlan.zhihu.com/p/675305615</p></div></a></div>
<h2 id="neterr_blocked_by_client"><a class="markdownIt-Anchor" href="#neterr_blocked_by_client"></a> net::ERR_BLOCKED_BY_CLIENT</h2>
<h3 id="问题描述-3"><a class="markdownIt-Anchor" href="#问题描述-3"></a> 问题描述</h3>
<p>自己的博客f12后查看命令行，总是有几个插件报出<code>net::ERR_BLOCKED_BY_CLIENT</code>的错误，一直没有解决，但是打开纯净模式的edge后没有任何问题，于是推断是谷歌拓展插件的问题。</p>
<p>在workflow上了解到， AdBlockers 有一些规则，即它们将 URI 与某种类型的表达式进行匹配，对我插件的链接产生了误报。<br />
最常见的方式就是将博客的地址加入<code>AdBlockers</code>的<strong>白名单</strong>中即可解决。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.sa.net/2024/02/27/a6KqAb9f5rGcBuO.png" alt="" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.sa.net/2024/02/27/zSy6ZD5EbfJFNUL.png" alt="" /></p>
<h3 id="参考链接-3"><a class="markdownIt-Anchor" href="#参考链接-3"></a> 参考链接</h3>
<div class="tag link"><a class="link-card" title="workflow: net::ERR_BLOCKED_BY_CLIENT" href="https://stackoverflow.com/questions/23341765/getting-neterr-blocked-by-client-error-on-some-ajax-calls"><div class="left"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/link.png"/></div><div class="right"><p class="text">workflow: net::ERR_BLOCKED_BY_CLIENT</p><p class="url">https://stackoverflow.com/questions/23341765/getting-neterr-blocked-by-client-error-on-some-ajax-calls</p></div></a></div>
<h2 id="修改yarn全局安装和缓存位置"><a class="markdownIt-Anchor" href="#修改yarn全局安装和缓存位置"></a> 修改yarn全局安装和缓存位置</h2>
<h3 id="问题描述-4"><a class="markdownIt-Anchor" href="#问题描述-4"></a> 问题描述</h3>
<p>最近c盘一下子少了20g，<code>SpaceSniffer</code> 检查扫描后发现页面休眠文件过大，教程解释c盘分配的虚拟内存过大，可我最近玩幻兽帕鲁防止虚幻5崩溃特意调高的虚拟内存，得，不能动。</p>
<p>清理c盘中yarn安装插件包留下的缓存，一下子c盘多了4g，再用dism++清理WinSxS组件，又释放了4个g。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 修改yarn安装包的位置</span></span><br><span class="line">yarn config  <span class="built_in">set</span> global-folder <span class="string">&quot;F:\Program\yarn\global&quot;</span></span><br><span class="line"><span class="comment"># 查看 yarn 全局安装位置</span></span><br><span class="line">yarn global <span class="built_in">dir</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改缓存的位置</span></span><br><span class="line">yarn config <span class="built_in">set</span> cache-folder <span class="string">&quot;F:\Program\yarn\cache&quot;</span></span><br><span class="line"><span class="comment"># 查看 yarn 全局cache位置</span></span><br><span class="line">yarn cache <span class="built_in">dir</span></span><br></pre></td></tr></table></figure>
<h2 id="mindoc本地部署"><a class="markdownIt-Anchor" href="#mindoc本地部署"></a> minDoc本地部署</h2>
<h3 id="问题描述-5"><a class="markdownIt-Anchor" href="#问题描述-5"></a> 问题描述</h3>
<p>需要一个管理产品文档的工具，同时具有<strong>权限管理、成员管理</strong>的功能，可根据文件（夹）结构自动生成侧边栏。</p>
<h3 id="参考链接-4"><a class="markdownIt-Anchor" href="#参考链接-4"></a> 参考链接</h3>
<div class="tag link"><a class="link-card" title="minDoc部署文档" href="https://mindoc.com.cn/docs/mindochelp"><div class="left"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/link.png"/></div><div class="right"><p class="text">minDoc部署文档</p><p class="url">https://mindoc.com.cn/docs/mindochelp</p></div></a></div>
<h2 id="css实现hover后的渐变效果"><a class="markdownIt-Anchor" href="#css实现hover后的渐变效果"></a> css实现hover后的渐变效果</h2>
<h3 id="问题描述-6"><a class="markdownIt-Anchor" href="#问题描述-6"></a> 问题描述</h3>
<p>通过css实现鼠标悬停后图片逐渐放大的效果，增加页面的交互感。<br />
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.sa.net/2024/03/07/xm6CcJ5NiKILj7y.gif" alt="" /></p>
<h3 id="代码"><a class="markdownIt-Anchor" href="#代码"></a> 代码</h3>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>鼠标悬停图片逐渐放大<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    * &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">box-sizing</span>: border-box;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.container</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">width</span>: <span class="number">100vw</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">height</span>: <span class="number">100vh</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.card</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">width</span>: <span class="number">400px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">flex-direction</span>: row;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">justify-content</span>: space-evenly;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">left</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">top</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);</span></span><br><span class="line"><span class="language-css">      <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">3px</span> <span class="number">8px</span> <span class="number">6px</span> <span class="built_in">rgba</span>(<span class="number">7</span>, <span class="number">17</span>, <span class="number">27</span>, <span class="number">0.05</span>);</span></span><br><span class="line"><span class="language-css">      <span class="attribute">transition</span>: transform <span class="number">0.3s</span> ease;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">overflow</span>: hidden;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.card</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">3px</span> <span class="number">8px</span> <span class="number">6px</span> <span class="built_in">rgba</span>(<span class="number">7</span>, <span class="number">17</span>, <span class="number">27</span>, <span class="number">0.09</span>);</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.card</span> <span class="selector-tag">img</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">height</span>: <span class="number">180px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">transition</span>: transform <span class="number">0.3s</span> ease;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    </span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.card</span><span class="selector-pseudo">:hover</span> <span class="selector-tag">img</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.05</span>)</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.card</span> <span class="selector-class">.content</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">display</span>: inline-block;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.sa.net/2024/03/05/nmOrdsI4N9KebGi.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span>这是测试文本<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="patch-package-给插件打补丁"><a class="markdownIt-Anchor" href="#patch-package-给插件打补丁"></a> patch-package 给插件打补丁</h2>
<h3 id="问题描述-7"><a class="markdownIt-Anchor" href="#问题描述-7"></a> 问题描述</h3>
<p>使用vuepress 1.8 版本搭建说明文档，想实现一个加密的效果，使用npm仓库的<code>vuepress-plugin-posts-encrypt</code>插件，但是部署后访问缓慢，打开控制台查看资源加载速度后，发现该插件引入的静态资源使用的是jsd加速？？？？？</p>
<p>果断在插件内全局替换<code>iview.min.js</code>、<code>iview.css</code>和<code>vue.min.js</code>的链接为字节的静态资源库加速，丝滑访问，为了避免每次npm install后又要重新替换，引入了<code>patch-package</code>。安装步骤见参考链接。</p>
<p>需要注意，在执行 <code>npx patch-package vuepress-plugin-posts-encrypt(修改包的名字)</code>前需要修改源码，执行命令后可能会等待一段时间才会显示出对应的patch文件，<code>be patient please 😊</code></p>
<h3 id="参考链接-5"><a class="markdownIt-Anchor" href="#参考链接-5"></a> 参考链接</h3>
<div class="tag link"><a class="link-card" title="字节跳动静态资源库 加快资源访问速度" href="https://cdn.bytedance.com/"><div class="left"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/link.png"/></div><div class="right"><p class="text">字节跳动静态资源库 加快资源访问速度</p><p class="url">https://cdn.bytedance.com/</p></div></a></div>
<div class="tag link"><a class="link-card" title="给修改的 node_modules 下源码“打补丁”" href="https://blog.csdn.net/IAIPython/article/details/130571222"><div class="left"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/link.png"/></div><div class="right"><p class="text">给修改的 node_modules 下源码“打补丁”</p><p class="url">https://blog.csdn.net/IAIPython/article/details/130571222</p></div></a></div>
<h2 id="gitlab-ci"><a class="markdownIt-Anchor" href="#gitlab-ci"></a> gitlab-ci</h2>
<h3 id="问题描述-8"><a class="markdownIt-Anchor" href="#问题描述-8"></a> 问题描述</h3>
<p>需要对一个<code>maven</code>项目进行自动化构建，要求每次提交都会触发构建，减少运维的工作量，将构建好的jar包打包成docker镜像并推送至私有的镜像仓库</p>
<p>详情如下：</p>
<p>1、自定义开发的<code>common</code>模块并不完善，也没有上传至私有的<code>nexus</code>仓库，需要打包的功能模块依赖于<code>common</code></p>
<p>2、项目依赖的部分<code>jar</code>包需要从私有的<code>nexus</code>仓库下载，需要配置对应的仓库地址</p>
<p>3、构建时间的优化、提升</p>
<h3 id="解决方案"><a class="markdownIt-Anchor" href="#解决方案"></a> 解决方案</h3>
<p>1、在代码仓库中增加 <code>.m2/settings.xml</code> 文件，配置对应的私有nexus仓库地址、阿里云或者腾讯云的nexus地址提升下载速度</p>
<p>2、增加 <code>localReposity</code> 配置，告诉maven在找不到对应<code>jar</code> 包时，从本地读取，完成<code>common</code>模块的引入。由于common模块是独立开发的，故和其他模块的pom父类并不一致，各个模块也有不同的配置，在原项目根目录下并没有pom文件，所以不能通过构建根pom文件的方式完成项目的打包。</p>
<p>3、引入cache</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">variables:</span></span><br><span class="line">  <span class="attr">RELEASE_TAG:</span> <span class="string">&quot;1.0.0&quot;</span></span><br><span class="line">  <span class="attr">MAVEN_CLI_OPTS:</span> <span class="string">&quot;../.m2/settings.xml --batch-mode -Dmaven.repo.local=$CI_PROJECT_DIR/.m2/repository&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">cache:</span></span><br><span class="line">  <span class="attr">key:</span> <span class="string">$&#123;CI_COMMIT_REF_SLUG&#125;</span> <span class="comment"># cache键值对 减少mvn下载jar包的时间 key指向当前项目分支</span></span><br><span class="line">  <span class="attr">paths:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">~/.m2/repository/</span> <span class="comment"># 缓存地址 镜像根目录下的 .m2/repository/ 文件夹</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">target/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># CI构建两步</span></span><br><span class="line"><span class="attr">stages:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">package</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">release</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 在maven镜像中构建jar包</span></span><br><span class="line"><span class="attr">package:</span></span><br><span class="line">  <span class="attr">image:</span> <span class="string">maven:3.6.1-jdk-8-alpine</span></span><br><span class="line">  <span class="attr">stage:</span> <span class="string">package</span></span><br><span class="line">  <span class="attr">only:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">master</span> <span class="comment"># 触发构建的分支</span></span><br><span class="line">  <span class="attr">tags:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">docker</span></span><br><span class="line">  <span class="attr">script:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">cd</span> <span class="string">test-common</span> <span class="comment"># 进入common模块打包</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">mvn</span> <span class="string">-s</span> <span class="string">$MAVEN_CLI_OPTS</span> <span class="string">-e</span> <span class="string">package</span> <span class="string">install</span> <span class="comment"># 打包 并将打包后生成的jar下载至 镜像根目录.m2/repository/路径下(本地仓库)</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">cd</span> <span class="string">../test-app</span> <span class="comment"># 切出common 打包其他模块</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">mvn</span> <span class="string">-s</span> <span class="string">$MAVEN_CLI_OPTS</span> <span class="string">-e</span> <span class="string">package</span></span><br><span class="line">  <span class="attr">artifacts:</span> <span class="comment"># 构建好的jar文件上传 并设置过期时间</span></span><br><span class="line">    <span class="attr">paths:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">test-app/target/test-app-application-exec.jar</span></span><br><span class="line">    <span class="attr">expire_in:</span> <span class="number">1</span> <span class="string">hours</span></span><br><span class="line"></span><br><span class="line"><span class="attr">release:</span> <span class="comment"># docker in docker 在docker中构建jar为docker镜像</span></span><br><span class="line">  <span class="attr">image:</span> <span class="string">docker:20-dind</span></span><br><span class="line">  <span class="attr">stage:</span> <span class="string">release</span></span><br><span class="line">  <span class="attr">only:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">master</span></span><br><span class="line">  <span class="attr">tags:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">docker-slim</span></span><br><span class="line">  <span class="attr">before_script:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">docker</span> <span class="string">login</span> <span class="string">--username=username</span> <span class="string">-p</span> <span class="string">$REPOS_PASSWORD</span> <span class="string">test.com</span> <span class="comment"># 配置私有镜像仓库的账号 密码 地址</span></span><br><span class="line">  <span class="attr">script:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">df</span> <span class="string">-h</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">docker</span> <span class="string">build</span> <span class="string">-t</span> <span class="string">test/test-app:$RELEASE_TAG</span> <span class="string">.</span> <span class="comment"># docker镜像标签</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">docker</span> <span class="string">push</span> <span class="string">test.com/test-image/test-app:$RELEASE_TAG</span> <span class="comment"># 推送</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Bug周刊</category>
      </categories>
      <tags>
        <tag>Bug周刊</tag>
        <tag>随手记</tag>
      </tags>
  </entry>
  <entry>
    <title>『LeetCode』#6刷题日记</title>
    <url>/posts/13f66842.html</url>
    <content><![CDATA[<h2 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言 📢</h2>
<p>本日记为个人的刷题学习日记，内容非原创，仅为自己复习知识时，能够看得懂自己<s>写的</s>CV的代码，快速理解题意。另外，👍<a href="https://leetcode-cn.com/u/leetcode-solution/">力扣官方的题解</a>很好用，<a href="https://leetcode-cn.com/u/ac_oier/">三叶姐</a>🍭nb！！！！！</p>
<br>
<h2 id="448-找到数组中消失的数字"><a class="markdownIt-Anchor" href="#448-找到数组中消失的数字"></a> 448 找到数组中消失的数字📝</h2>
<h3 id="题意"><a class="markdownIt-Anchor" href="#题意"></a> 题意</h3>
<ul>
<li>给你一个含 <code>n</code> 个整数的数组 <code>nums</code> ，其中 <code>nums[i]</code> 在区间 <code>[1, n]</code> 内。请你找出所有在 <code>[1, n]</code> 范围内但没有出现在 <code>nums</code> 中的数字，并以数组的形式返回结果。</li>
<li>输入: <code>nums = [4, 3, 2, 7, 8, 2, 3, 1]</code> 输出: <code>[5, 6]</code></li>
</ul>
<h3 id="思路"><a class="markdownIt-Anchor" href="#思路"></a> 思路</h3>
<ul>
<li>暴力统计已有的数字，再遍历数组，输出未统计的数字</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;Integer&gt; <span class="title function_">findDisappearedNumbers</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> nums.length;</span><br><span class="line">        <span class="comment">// 数组中 每个数字的值 作为已出现数字的索引 无论出现多少次 均记为1</span></span><br><span class="line">        <span class="type">int</span>[] newNums = <span class="keyword">new</span> <span class="title class_">int</span>[len+<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;len; i++) &#123;</span><br><span class="line">            newNums[nums[i]] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">		<span class="comment">// 新建列表 遍历用于统计的数组 输出出现次数为0的索引值</span></span><br><span class="line">        List&lt;Integer&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;len+<span class="number">1</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(newNums[i] == <span class="number">0</span>) &#123;</span><br><span class="line">                list.add(i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2022/04/27/4M5HpSqveIAb6cP.png" alt="time" /></p>
<ul>
<li>排序、验证递增关系。若数字均出现，则为单调递增的序列，即[1, 2, 3, ,4, 5, …]</li>
<li>只遍历了一遍数组，也没有新建任何其他项，只要要求返回的list</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;Integer&gt; <span class="title function_">findDisappearedNumbers</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        Arrays.sort(nums);</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> nums.length;</span><br><span class="line">		<span class="comment">// 首、尾、中间段 均要考虑 就是时间变得好长</span></span><br><span class="line">        List&lt;Integer&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="type">int</span> <span class="variable">start</span> <span class="operator">=</span> <span class="number">1</span>, end = len;</span><br><span class="line">        <span class="comment">// [4, 4, 4, 4]</span></span><br><span class="line">        <span class="keyword">if</span>(nums[<span class="number">0</span>] != <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">while</span>(start &lt; nums[<span class="number">0</span>]) &#123;</span><br><span class="line">                list.add(start);</span><br><span class="line">                start++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// [1, 1, 1, 1]</span></span><br><span class="line">        <span class="keyword">if</span>(nums[len - <span class="number">1</span>] &lt; len) &#123;</span><br><span class="line">            <span class="keyword">while</span>(nums[len-<span class="number">1</span>] &lt; end) &#123;</span><br><span class="line">                list.add(end);</span><br><span class="line">                end--;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// [1, 2, 2, 2, 4, 6]</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;len; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[i] == nums[i-<span class="number">1</span>] || nums[i] == nums[i-<span class="number">1</span>] + <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">while</span>(nums[i-<span class="number">1</span>] + <span class="number">1</span> &lt; nums[i]) &#123;</span><br><span class="line">                    list.add(nums[i-<span class="number">1</span>] + <span class="number">1</span>);</span><br><span class="line">                    nums[i-<span class="number">1</span>]++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip1.loli.io/2022/04/27/SH7CD6q3QtZKYwl.png" alt="space" /></p>
<h2 id="179-最大数"><a class="markdownIt-Anchor" href="#179-最大数"></a> 179 最大数📝</h2>
<h3 id="题意-2"><a class="markdownIt-Anchor" href="#题意-2"></a> 题意</h3>
<ul>
<li>给定一组非负整数 <code>nums</code>，重新排列每个数的顺序（每个数不可拆分）使之组成一个最大的整数。</li>
<li>输出结果可能非常大，所以你需要返回一个字符串而不是整数。 <code>return String</code></li>
</ul>
<h3 id="思路-2"><a class="markdownIt-Anchor" href="#思路-2"></a> 思路</h3>
<ul>
<li>贪心、字符串拼接</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">largestNumber</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> nums.length;</span><br><span class="line">        String[] str = <span class="keyword">new</span> <span class="title class_">String</span>[len];</span><br><span class="line">        <span class="comment">// 转换为字符串数组</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;len; i++) &#123;</span><br><span class="line">            str[i] = <span class="string">&quot;&quot;</span> + nums[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 比较两个字符串拼接后的大小排序 a + b和 b + a</span></span><br><span class="line">        Arrays.sort(str, (a, b) -&gt; &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">sa</span> <span class="operator">=</span> a + b, sb = b + a;</span><br><span class="line">            <span class="keyword">return</span> sb.compareTo(sa);</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">// StringBUilder拼接 会更快</span></span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">        <span class="keyword">for</span>(String aStr : str) &#123;</span><br><span class="line">            sb.append(aStr);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len2</span> <span class="operator">=</span> sb.length();</span><br><span class="line">        <span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// 注意 避免 零开头项</span></span><br><span class="line">        <span class="keyword">while</span>(k &lt; len - <span class="number">1</span> &amp;&amp; sb.charAt(k) == <span class="string">&#x27;0&#x27;</span>) k++;</span><br><span class="line">        <span class="keyword">return</span> sb.substring(k);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>LeetCode</tag>
        <tag>数据结构与算法</tag>
        <tag>刷题日记</tag>
        <tag>力扣周赛</tag>
      </tags>
  </entry>
  <entry>
    <title>『知识巩固#1』Html、Css基础整理</title>
    <url>/posts/4d6aa436.html</url>
    <content><![CDATA[<h2 id="html"><a class="markdownIt-Anchor" href="#html"></a> Html</h2>
<h3 id="标签学习"><a class="markdownIt-Anchor" href="#标签学习"></a> 标签学习</h3>
<ul>
<li>
<p>排版标签</p>
<ul>
<li>
<p>标题</p>
<ul>
<li><code>h1、h2、h3、h4、h5、h6</code>只有这六个</li>
</ul>
</li>
<li>
<p>段落标签</p>
<ul>
<li><code>p</code>标签 段落之间有空隙换行</li>
</ul>
</li>
<li>
<p>换行标签</p>
<ul>
<li><code>br</code> 空换行</li>
<li><code>hr</code> 下划线换行</li>
</ul>
</li>
</ul>
</li>
<li>
<p>文本格式化标签 根据语境区分</p>
<ul>
<li><code>b</code>、<code>strong</code> 加粗</li>
<li><code>u</code>、<code>ins</code> 下划线</li>
<li><code>i</code>、<code>em</code> 倾斜</li>
<li><code>s</code>、<code>del</code> 删除线</li>
</ul>
</li>
<li>
<p>媒体标签</p>
<ul>
<li>图片标签<code>img</code>
<ul>
<li>属性名、属性值</li>
<li><code>alt</code>属性值作为替换文本、<code>src</code>属性作为图片链接、<code>title</code>属性在鼠标悬停时显示</li>
<li><code>width</code>、<code>height</code> 很容易理解，控制图片宽高</li>
</ul>
</li>
<li>路径
<ul>
<li>相对路径</li>
<li>绝对路径</li>
</ul>
</li>
<li>音频标签<code>audio</code>
<ul>
<li><code>controls</code> 显示播放的空间</li>
<li><code>autoplay</code> 自动播放(部分浏览器不支持)</li>
<li><code>loop</code> 循环播放</li>
</ul>
</li>
<li>视频标签<code>video</code>
<ul>
<li>谷歌浏览器需要配合<code>muted</code>实现静音播放</li>
</ul>
</li>
</ul>
</li>
<li>
<p>链接标签<code>a</code></p>
<ul>
<li><code>href</code></li>
<li><code>target</code> 目标网页的打开形式
<ul>
<li><code>_blank</code> 在新窗口中跳转 保留原网页</li>
<li><code>_self</code> 在当前窗口中跳转(覆盖原网页) 不打开新的网页窗口</li>
</ul>
</li>
</ul>
</li>
</ul>
<br>
<blockquote>
<p>h5 不再支持 div盒子 align: center 的属性</p>
</blockquote>
<br>
<h3 id="列表标签"><a class="markdownIt-Anchor" href="#列表标签"></a> 列表标签</h3>
<ul>
<li><code>ul</code>无序列表
<ul>
<li>只能包含<code>li</code>标签</li>
<li><code>li</code>标签可以包含任意内容</li>
</ul>
</li>
<li><code>ol</code> 有序列表 可以认为是 <code>order list</code>: 有顺序的列表
<ul>
<li><code>ol</code> 列表中只允许包含<code>li</code>标签</li>
<li><code>li</code> 标签可以包含任意内容</li>
</ul>
</li>
<li><code>dl</code>自定义列表  <code>diy list</code>
<ul>
<li><code>dt</code> 自定义列表的主题</li>
<li><code>dd</code>自定义列表的内容 注意<code>dd</code>会默认显示缩进效果</li>
<li><code>dl</code>标签中只允许包含<code>dt</code>/<code>dd</code>标签</li>
<li><code>dt</code>/<code>dd</code>标签可以包含任意内容</li>
</ul>
</li>
</ul>
<h3 id="表格"><a class="markdownIt-Anchor" href="#表格"></a> 表格</h3>
<ul>
<li><code>table</code>
<ul>
<li><code>tr</code> 行 可以理解为<code>table row</code> 可以包含<code>n</code>个<code>td</code></li>
<li><code>td</code> 单元格</li>
<li><code>th</code> 表头 <code>table head</code> 放在<code>tr</code>中</li>
<li><code>caption</code> 书写在<code>table</code>标签内容 表示表格大标题 一般居中</li>
</ul>
</li>
<li>表格的结构标签 (了解)
<ul>
<li><code>thead</code></li>
<li><code>tbody</code></li>
<li><code>tfoot</code></li>
<li>语义化的标签 易于后期维护 及浏览器理解渲染</li>
</ul>
</li>
<li>合并单元格
<ul>
<li>不能跨结构标签合并(不能跨<code>thead、tbody、tfoot</code>)</li>
<li>跨行合并<code>rowspan</code>、跨列合并<code>colspan</code>
<ul>
<li>明确合并哪几个单元格</li>
<li>通过左上原则，确定保留谁，删除谁</li>
<li>给保留的单元格设置属性</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="表单"><a class="markdownIt-Anchor" href="#表单"></a> 表单</h3>
<ul>
<li>
<p><code>input</code>系列 <code>type</code>属性值如下：</p>
<ul>
<li><code>text</code> 文本框，用于输入单行文本 <strong>不换行</strong> 即写代码需要<code>br</code>手动换行</li>
<li><code>password</code> 密码框 用于输入密码</li>
<li><code>radio</code> 单选框 用于多选一</li>
<li><code>checkbox</code> 多选框</li>
<li><code>file</code> 用于之后上传文件</li>
<li><code>submit</code> 提交按钮 用于提交</li>
<li><code>reset</code> 重制按钮 重制和提交生效 必须要有父级标签表单域</li>
<li><code>button</code> 普通按钮 可以配合<code>js</code>添加功能</li>
</ul>
</li>
<li>
<p><code>input</code> 其他属性</p>
<ul>
<li><code>placehold</code> 给输入框提示文字</li>
<li><code>name</code> 用name属性分组，相同name属性的单选框为一组</li>
<li><code>checked</code> 表示默认选中 指选项的默认值</li>
<li><code>multiple</code> 上传文件时实现多选</li>
<li><code>value</code> 给按钮添加或修改按键文字，包括<code>submit</code>、<code>reset</code>、<code>button</code></li>
</ul>
</li>
<li>
<p>单独的<code>button</code>标签 也可以作为按钮使用</p>
<ul>
<li>由于 <code>button</code> 本身不具有功能，因此可以灵活地给 <code>button</code> 添加功能，拓展性极高</li>
<li>与 <code>js</code> 搭配使用有奇效</li>
</ul>
</li>
<li>
<p><code>select</code> 下拉菜单</p>
<ul>
<li>组成：
<ul>
<li><code>select</code> 标签，下拉菜单的整体，需要包裹住<code>option</code></li>
<li><code>option</code> 下拉的选项</li>
</ul>
</li>
<li>默认选中：value的值设置为 <code>selected</code>，不设置默认为第一项</li>
</ul>
</li>
<li>
<p><code>textarea</code> 文本域标签</p>
<ul>
<li>一般通过<code>css</code>给其添加行列，即宽高</li>
<li>禁用文本域的拖拽改变大小</li>
</ul>
</li>
<li>
<p><code>label</code>标签</p>
<ul>
<li>实现点击固定区域便可选中单选框、多选框</li>
<li>使用方法①
<ul>
<li>用<code>label</code>标签把内容包裹起来</li>
<li>在表单标签上添加 <code>id</code> 属性</li>
<li>在 <code>label</code> 标签的<code>for</code>属性中设置对应的<code>id</code>值</li>
</ul>
</li>
<li>使用方法②
<ul>
<li>直接使用<code>label</code>标签把内容和表单标签一起包裹起来</li>
<li>需要把<code>label</code>标签的<code>for</code>属性删除</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="语义化标签"><a class="markdownIt-Anchor" href="#语义化标签"></a> 语义化标签</h3>
<ul>
<li>无语义
<ul>
<li><code>div</code></li>
<li><code>span</code></li>
</ul>
</li>
<li>有语义(了解)
<ul>
<li>用于手机端的开发</li>
<li><code>header</code>、<code>nav</code>、<code>footer</code>、<code>aside</code>、<code>section</code>、<code>article</code></li>
</ul>
</li>
</ul>
<h3 id="字符实体"><a class="markdownIt-Anchor" href="#字符实体"></a> 字符实体</h3>
<ul>
<li><code>html</code>中空格合并的现象
<ul>
<li><code>&amp;nsbp</code> 空格</li>
<li><code>&amp;copy</code> 网页的版权 copyright</li>
</ul>
</li>
</ul>
<br>
<h2 id="css"><a class="markdownIt-Anchor" href="#css"></a> Css</h2>
<h3 id="基础认知"><a class="markdownIt-Anchor" href="#基础认知"></a> 基础认知</h3>
<ul>
<li>
<p><code>css</code>的引入方式</p>
<ul>
<li>
<p>内嵌式</p>
<ul>
<li><code>css</code>写入<code>style</code>标签中，通常约定为<code>html</code>文件中的<code>head</code>标签内</li>
</ul>
</li>
<li>
<p>外联式</p>
<ul>
<li>写入单独的<code>.css</code>文件中</li>
<li>通过<code>link</code>引入<code>link</code>中</li>
</ul>
</li>
<li>
<p>行内式</p>
<ul>
<li><code>css</code> 写在标签的<code>style</code>属性中</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="基础选择器"><a class="markdownIt-Anchor" href="#基础选择器"></a> 基础选择器</h3>
<ul>
<li>标签选择器
<ul>
<li>标签名 {css属性名: 属性值;}</li>
</ul>
</li>
<li>类选择器
<ul>
<li><code>.class</code> 通过类名 指定标签的<code>style</code></li>
<li>一个标签需要多个类名，用空格隔开即可</li>
</ul>
</li>
<li><code>id</code> 选择器
<ul>
<li>配合<code>js</code> 诞生，在一个页面中式唯一的，不可替代的</li>
<li><code>#id</code> {属性名: 属性值}</li>
<li>所有标签上都有<code>id</code> 属性</li>
<li>每一个标签只能有一个<code>id</code>属性值</li>
<li>一个<code>id</code> 选择器只能选中一个标签</li>
</ul>
</li>
<li>通配符选择器
<ul>
<li>使用<code>*</code> 号可以匹配所有的标签</li>
<li>一般用其清除<code>margin</code>、<code>padding</code>属性</li>
</ul>
</li>
</ul>
<h3 id="字体和文本样式"><a class="markdownIt-Anchor" href="#字体和文本样式"></a> 字体和文本样式</h3>
<h4 id="字体"><a class="markdownIt-Anchor" href="#字体"></a> 字体</h4>
<ul>
<li>字体大小
<ul>
<li><code>font-size</code></li>
<li>浏览器有默认值 <code>16px</code></li>
</ul>
</li>
<li>字体粗细
<ul>
<li><code>font-weight</code></li>
<li>取值
<ul>
<li>关键字: 正常<code>normal</code> 加粗 <code>blod</code></li>
<li>纯数字: 正常400 加粗 800</li>
</ul>
</li>
</ul>
</li>
<li>字体样式
<ul>
<li><code>font-style</code> 字体是否倾斜</li>
<li>正常 <code>normal</code> 倾斜 <code>italic</code></li>
</ul>
</li>
<li>字体系列
<ul>
<li><code>font-family</code></li>
<li>雅黑、宋体、黑体之类的</li>
<li><code>windows</code>电脑 默认是微软雅黑</li>
<li>一般网页会提供多个字体，用逗号隔开，表示按顺序显示，避免出现用户电脑上没有安装字体的情况</li>
</ul>
</li>
<li>常见字体系列
<ul>
<li>无衬线字体 <code>sans-serif</code> 均匀 无笔锋 一般网页都用这种类型</li>
<li>衬线字体 <code>serif</code> 不均匀 有笔锋</li>
<li>等宽字体 <code>monospace</code> 所有文字占相同宽度</li>
</ul>
</li>
<li>样式的层叠问题
<ul>
<li>层叠性: 后面的覆盖前面的属性</li>
<li>样式以最后覆盖的为准</li>
</ul>
</li>
<li><code>font</code> 相关属性的连写
<ul>
<li><code>font: style weight size family</code></li>
<li>只能省略前两个，省略相当于默认值</li>
<li>一个属性冒号后面书写多个值的写法，属于复合属性</li>
</ul>
</li>
</ul>
<h4 id="文本"><a class="markdownIt-Anchor" href="#文本"></a> 文本</h4>
<ul>
<li>文本缩进
<ul>
<li><code>text-indent</code></li>
<li>取值为 数字+<code>px</code> 或者 数字+<code>em</code>; <code>1em</code>为当前font-size的大小</li>
</ul>
</li>
<li>文本水平对齐
<ul>
<li><code>text-align</code></li>
<li>左对齐、右对齐、居中对齐</li>
<li>能让哪些元素水平居中
<ul>
<li>文本</li>
<li><code>span</code> 标签</li>
<li><code>input</code>标签、<code>imp</code>标签</li>
</ul>
</li>
</ul>
</li>
<li>文本修饰
<ul>
<li><code>text-decoration</code></li>
<li>属性值有:
<ul>
<li><code>underline</code>下划线 常用</li>
<li><code>line-through</code> 删除线 不常用</li>
<li><code>overline</code> 上划线 不常用</li>
<li><code>none</code> 无装饰线 常用</li>
</ul>
</li>
</ul>
</li>
<li>行高
<ul>
<li><code>line-height</code> 取值为<code>px</code> 或者<code>font-size</code>的倍数</li>
<li>行高 = 上间距 + 文本高度 + 下间距</li>
<li>应用
<ul>
<li>单行文本垂直居中 可以设置为<code>line-height</code>: 文字父元素高度</li>
</ul>
</li>
<li>注意点
<ul>
<li>如果同时设置了行高和font连写，注意覆盖问题</li>
<li><code>font: style weight size/line-height family</code></li>
</ul>
</li>
</ul>
</li>
<li>颜色常见取值 网页设计时直接取色器吸就好啦qvq
<ul>
<li>关键词</li>
<li>rgb</li>
<li>rgba</li>
<li>十六进制</li>
</ul>
</li>
<li>标签水平居中
<ul>
<li><code>margin: 0 auto</code></li>
</ul>
</li>
</ul>
<h3 id="选择器进阶"><a class="markdownIt-Anchor" href="#选择器进阶"></a> 选择器进阶</h3>
<ul>
<li>后代选择器: 空格
<ul>
<li><code>选择器1 选择器2 &#123;css&#125;</code></li>
<li>只要是后代，儿子、孙子等都会被选中</li>
</ul>
</li>
<li>子选择器: &gt;
<ul>
<li><code>选择器1 &gt; 选择器2 &#123;css&#125;</code></li>
<li>只选择儿子，不选其他</li>
</ul>
</li>
<li>并集选择器: ,
<ul>
<li><code>选择器1, 选择器2 &#123;css&#125;</code></li>
<li>两者均包括</li>
</ul>
</li>
<li>交集选择器：紧挨着
<ul>
<li>作用 选中页面中同时满足多个选择器的标签</li>
<li><code>选择器1.选择器2 &#123;css&#125;</code> 满足既又原则</li>
</ul>
</li>
<li>伪类选择器 <code>hover</code>
<ul>
<li>当鼠标放置到目标上时，样式改变</li>
<li>任何一个标签都可以写<code>hover</code></li>
</ul>
</li>
</ul>
<h3 id="背景属性"><a class="markdownIt-Anchor" href="#背景属性"></a> 背景属性</h3>
<ul>
<li>background-color 略过 英语够用就行</li>
<li>background-image
<ul>
<li><code>background-image: url()</code></li>
</ul>
</li>
<li>background-repeat</li>
<li>background-position
<ul>
<li>两个参数分别控制左右和上下（水平方向、垂直方向）</li>
<li>可以用数字如<code>100px</code>控制、也可以用方向right、left、center控制</li>
</ul>
</li>
<li>复合属性
<ul>
<li>color、image、repeat、position</li>
<li>不分先后顺序，但是推荐上述顺序</li>
<li>如果需要单独的设置与连写，要么把单独的样式写到连写的后面，要么写到连写的里面</li>
<li>背景图位置如果是英文单词 可以不分先后顺序；数字写法 默认第一个是水平位置 第二个是竖直位置</li>
</ul>
</li>
<li>图案<code>img</code> 、<code>background-image</code>: 重要的图片用<code>img</code> 不重要的图片用<code>background-image</code></li>
</ul>
<h3 id="元素显示模式"><a class="markdownIt-Anchor" href="#元素显示模式"></a> 元素显示模式</h3>
<ul>
<li>块级元素
<ul>
<li>独占一行</li>
<li>宽度默认是父元素的宽度 高度默认由内容展开</li>
<li>可以设置宽高</li>
<li><code>div、h系列、p、ul、li、dl、dt、dd、form、header、nav、footer</code></li>
</ul>
</li>
<li>行内元素
<ul>
<li>一行可以显示多个</li>
<li>宽高默认由内容撑起</li>
<li>不可以设置宽高</li>
<li><code>a、span、b、u、i、s、strong、ins、em、del</code></li>
</ul>
</li>
<li>行内块元素
<ul>
<li>一行可以设置多个</li>
<li>可以设置宽高</li>
<li><code>input、textarea、button、select</code></li>
<li><code>img</code> 有行内块的特点 但是chrome调试后显示有inline</li>
</ul>
</li>
<li>元素显示模式转换
<ul>
<li><code>display: block</code> 转换为块级元素</li>
<li><code>display: inline-block</code> 转换为行内块元素</li>
<li><code>display: inline</code> 极少……</li>
<li>转换规范：
<ul>
<li>块级元素作为大容器，可以嵌套很多元素，但是不能用小范围的元素嵌套大范围元素 如p标签不能嵌套div、p、h</li>
<li>a标签内部可以嵌套任意元素，除了a标签</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="css特性"><a class="markdownIt-Anchor" href="#css特性"></a> css特性</h3>
<ul>
<li>继承性
<ul>
<li>子元素没有的 从父元素处继承；子元素有的，不继承</li>
<li>可以理解为 父元素的样式先赋给子元素 子元素自己的样式又赋给自己 后者覆盖前者 故显示子元素的样式</li>
</ul>
</li>
<li>层叠性
<ul>
<li>给同一个标签设置不同的样式 → 此时样式会层叠叠加 → 会共同作用在标签上</li>
<li>给同一个标签设置相同的样式 → 此时样式会层叠覆盖 → 最终写在最后的样式会生效</li>
<li>当样式冲突时，只有当<strong>选择器优先级</strong>相同时，才能通过层叠性判断结果</li>
</ul>
</li>
<li>优先级 最复杂</li>
</ul>
<h3 id="css三大特性"><a class="markdownIt-Anchor" href="#css三大特性"></a> css三大特性</h3>
<ul>
<li>
<p>优先级的介绍</p>
<ul>
<li>
<p>不同的选择器具有不同的优先级，优先级高的选择器样式会夫噶优先级低的样式</p>
</li>
<li>
<p>优先级公式 <code>继承 &lt; 通配符选择器 &lt; 标签选择器 &lt; 类选择器 &lt; id选择器 &lt; 行内样式 &lt; !important</code></p>
</li>
<li>
<p><code>!important</code>不能提升继承的优先级，且实际开发中不建议使用</p>
</li>
<li>
<p>标签的范围越广，其优先级越低，个人认为可简记为 远水解不了近渴</p>
</li>
</ul>
</li>
<li>
<p>权重叠加计算</p>
<ul>
<li>场景：复合选择器 需要通过权重叠加计算 判断最终哪个选择器优先级会生效</li>
<li>权重叠加计算公式
<ul>
<li>(0, 0, 0, 0) (行内，id，类名，标签) 之间无进位</li>
<li>只是统计每个复合选择器的对应选项个数 如果都相同 谁在后面谁生效</li>
<li>如果第一级数字相同 再去比较其他 需要结合例子理解</li>
<li>对于<code>!important</code> 如果不是继承，则权重最高</li>
</ul>
</li>
</ul>
</li>
<li>
<p>排错</p>
<ul>
<li>使用谷歌F12找错误 开发者常用</li>
<li>常用单词拼写错误 我自己就经常犯 <code>main</code>函数都能搞成<code>mian</code></li>
<li>上一行出错的代码可能会导致下一行代码失效</li>
</ul>
</li>
</ul>
<h3 id="盒子模型"><a class="markdownIt-Anchor" href="#盒子模型"></a> 盒子模型</h3>
<ul>
<li>概念
<ul>
<li>每一个标签都是一个盒子</li>
<li>浏览器在网页渲染时，会将网页中的元素看作是一个个的矩形区域，我们也称其为盒子</li>
</ul>
</li>
<li>内容
<ul>
<li><code>content内容区域、padding内边距、border边框、margin外边距</code></li>
<li>官方的联想模型为 苹果电脑的包装盒，个人理解为箱装盒式牛奶</li>
</ul>
</li>
<li>边框
<ul>
<li>简写为 <code>bd</code>后按<code>tab</code>键</li>
<li>border: 粗细 线条样式 颜色 不分先后顺序 <a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/border-style">MDN官网上</a>线条的样式如下</li>
<li>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src='https://vip1.loli.io/2022/04/25/q1zDHh5SUFV3NCT.png' width=600px>
</li>
<li>可拆分单个属性 <code>border-width</code>、 <code>border-style</code>、 <code>border-color</code></li>
<li>也可以拆分为单个方向 属性名为: <code>borde-方位名词</code> 属性值连写</li>
</ul>
</li>
<li>大小计算
<ul>
<li>盒子宽度 = 左边框 + 内容宽度 + 右边框</li>
<li>盒子高度 = 上边框 + 内容高度 + 下边框</li>
</ul>
</li>
<li>设置
<ul>
<li>顺序
<ul>
<li>从外往内，从上往下</li>
</ul>
</li>
<li>盒子的样式：
<ul>
<li>宽高</li>
<li>辅助的背景颜色</li>
<li>盒子模型的部分：border、padding、margin</li>
<li>其他样式：color、font-、text-、……</li>
</ul>
</li>
</ul>
</li>
<li>内边距
<ul>
<li>上右下左旋转设置padding的值</li>
<li>注意：
<ul>
<li>① 设置width和height是内容的宽高！</li>
<li>② 设置border会撑大盒子</li>
<li>③ 设置padding会撑大盒子</li>
</ul>
</li>
<li>优化计算公式
<ul>
<li>盒子宽度 = 左边框 + 左padding + 内容宽度 + 右padding + 右边框</li>
<li>盒子高度 = 上边框 + 上padding + 内容宽度 + 下padding + 下边框</li>
</ul>
</li>
</ul>
</li>
<li>css3模型自动内减
<ul>
<li>加上<code>box-sizing: border-box</code></li>
<li>浏览器会自动计算多余大小，自动在内容中减去</li>
</ul>
</li>
<li>外边距
<ul>
<li>与内边距设置写法一样，只是不计入盒子的大小中</li>
</ul>
</li>
<li>清除默认边距
<ul>
<li>浏览器会默认给部分标签设置默认的margin和padding，但一般在项目开始前需要先清除这些标签默认的margin和padding，后续自己设置</li>
<li>常用 <code>* &#123;margin: 0; padding: 0;&#125;</code>清除内边距</li>
</ul>
</li>
<li>外边距折叠现象
<ul>
<li>合并现象
<ul>
<li>相邻的两个盒子，<code>margin-bottom</code> 和 <code>margin-top</code> 会合并 取最大值 而不是相加</li>
</ul>
</li>
<li>塌陷现象
<ul>
<li>发生在互相嵌套的块标签</li>
<li>给子元素添加<code>margin</code>值，会使父标签子标签都下移， 坑爹现象</li>
<li>解决方法(四种)：
<ul>
<li>给父元素设置<code>border-top</code> 或者 <code>padding-top</code>（分隔父子元素的 <code>margin-top</code>）</li>
<li>给父元素设置<code>overflow：hidden</code>  <strong>这个方法最完美</strong></li>
<li>转换成行内块元素</li>
<li>设置浮动</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>行内元素、行内块元素的<code>padding</code>、<code>margin</code>无效情况
<ul>
<li>给行内元素设置<code>margin</code>和<code>padding</code>
<ul>
<li><strong>水平方向</strong>的margin和padding布局中<strong>有效</strong></li>
<li><strong>垂直方向</strong>的margin和padding布局中<strong>无效</strong></li>
</ul>
</li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>Web</category>
        <category>Html</category>
      </categories>
      <tags>
        <tag>Web</tag>
        <tag>Html</tag>
        <tag>Css</tag>
        <tag>前端</tag>
        <tag>知识巩固</tag>
        <tag>速查</tag>
      </tags>
  </entry>
  <entry>
    <title>【JavaWeb】maven依赖管理</title>
    <url>/posts/63fd83a3.html</url>
    <content><![CDATA[<h2 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言</h2>
<p>记录学习JavaWeb课程中的部分知识点，包括maven依赖管理、maven高阶、Mybatis、SpringBoot自动配置等。本篇是关于maven对依赖包管理的内容。</p>
<h2 id="maven依赖管理"><a class="markdownIt-Anchor" href="#maven依赖管理"></a> maven依赖管理</h2>
<h3 id="依赖配置"><a class="markdownIt-Anchor" href="#依赖配置"></a> 依赖配置</h3>
<p>在项目的 <code>pom.xml</code> 中配置对应的依赖（当前项目运行需要的 <code>jar</code> 包），包括项目组织名、依赖包名及对应版本。</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupld</span>&gt;</span>ch.qos.logback<span class="tag">&lt;/<span class="name">groupld</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactld</span>&gt;</span>logback-classic<span class="tag">&lt;/<span class="name">artifactld</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupld</span>&gt;</span>...<span class="tag">&lt;/<span class="name">groupld</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactld</span>&gt;</span>...<span class="tag">&lt;/<span class="name">artifactld</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>...<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>
<p><code>groupid</code>和<code>artifactId</code>被统称为“坐标”，是为了保证项目唯一性而提出的，如果你要把你项目弄到maven本地仓库去，你想要找到你的项目就必须根据这两个id去查找。</p>
</li>
<li>
<p><code>groupId</code>：<code>groupId</code>分为几个字段，例如 <code>org.apache.tomcat</code> ，前面的 org 叫做域，后面的是项目组织者起的域名，<code>tomcat.apache.org</code>正是<code>tomcat</code>的官网。</p>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/09/19/Slk68WdXzsixbH3.png" alt="tomcat依赖" /></p>
<ul>
<li><code>artifactId</code>：<code>artifactId</code>一般是项目名或者模块名。（可以浅显地理解为 依赖包的名称）</li>
</ul>
<blockquote>
<p>域又分为org、com、cn等等许多，其中org为非营利组织，com为商业组织。举个apache公司的tomcat项目例子：这个项目的groupId是org.apache.tomcat，它的域是org（因为tomcat是非营利项目），公司名称是apache，artigactId是tomcat。</p>
</blockquote>
<div class="note primary flat"><p>一般来说，包名根目录 = groupId + artifactId。这个是不允许和别人重复的，尤其是需要上线的项目。一般公司为了不重复都会注册一个域名（URL用的那种），这样就肯定不会重复了。</p>
</div>
<p>配置完成后，点击maven管理的刷新按钮，即可载入对应依赖（从本地仓库引入 或者 从远程仓库下载后引入）</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/09/19/Y5g4FX82Uw7SyNo.png" alt="载入依赖注意事项" /></p>
<h3 id="依赖传递"><a class="markdownIt-Anchor" href="#依赖传递"></a> 依赖传递</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/09/19/JRhEjGUtq8aByp3.png" alt="依赖传递" /></p>
<p>依赖具有传递性</p>
<ul>
<li>直接依赖：在当前项目中通过依赖配置建立的依赖关系</li>
<li>间接依赖：被依赖的资源如果依赖其他资源，当前项目间接依赖其他资源</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/09/19/dAI5ueLH1jZUwXa.png" alt="排除依赖" /></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">depencies</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.junit.vintage<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit-vintage-engine<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">depencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这里将Spring Boot测试启动器<code>spring-boot-starter-test</code>添加到项目的依赖项中，并在该依赖项中排除Junit Vintage引擎依赖项<code>junit-vintage-engine</code>，以便使用其他测试框架，其中<code>scope</code>的含义见<strong>依赖范围</strong>。</p>
<h3 id="依赖范围"><a class="markdownIt-Anchor" href="#依赖范围"></a> 依赖范围</h3>
<p><code>scope</code>参数含义：</p>
<ul>
<li><code>compile</code>：参与程序的运行、测试及打包，留空时默认为compile</li>
<li><code>test</code>：只在测试程序范围有效，不参与主程序和打包</li>
<li><code>provided</code>：不参与打包</li>
<li><code>runtime</code>：不参与主程序</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/09/19/v6JoRNS2pIqAzMh.png" alt="依赖作用范围" /></p>
<h3 id="生命周期"><a class="markdownIt-Anchor" href="#生命周期"></a> 生命周期</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/09/19/vq3QwFJ9IyEKp1A.png" alt="三套生命周期" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/09/19/reENSADGMtYcQ9q.png" alt="各生命周期阶段" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/09/19/hlcmGf9vaBu1ObD.png" alt="生命周期阶段" /></p>
<blockquote>
<p>当点击<code>install</code>时，maven会自动运行 <code>compile、test、package、install</code> 整个阶段。</p>
</blockquote>
]]></content>
      <categories>
        <category>JavaWeb</category>
      </categories>
      <tags>
        <tag>JavaWeb</tag>
        <tag>后端</tag>
      </tags>
  </entry>
  <entry>
    <title>【demo50】倒计时动画</title>
    <url>/posts/4b589b23.html</url>
    <content><![CDATA[<h2 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 📢前言</h2>
<p>代码取自开源项目<a href="https://github.com/bradtraversy/50projects50days">50projects50days</a>，用作个人学习和巩固三件套的知识，增加了注释，可能会有小改动。</p>
<p><a href="https://demo.kzmqvq.com/02/index.html">在线演示地址</a></p>
<h2 id="实现思路及效果"><a class="markdownIt-Anchor" href="#实现思路及效果"></a> 📝实现思路及效果</h2>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2022/09/02/lwLuYAfqQXVp5eR.jpg" alt="20220902123330.jpg" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2022/09/02/FyhBsTQLkI2XZHq.jpg" alt="QQ截图20220902123341.jpg" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2022/09/02/bsJdwgA1WH4vrpa.jpg" alt="QQ截图20220902123358.jpg" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2022/09/02/eVjgQsRkIhCNFw1.jpg" alt="QQ截图20220902123407.jpg" /></p>
<h2 id="代码"><a class="markdownIt-Anchor" href="#代码"></a> 💻代码</h2>
<h3 id="indexhtml"><a class="markdownIt-Anchor" href="#indexhtml"></a> index.html</h3>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>倒计时动画<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;shortcut icon&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../logo.svg&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;style.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 计数 倒数3 2 1 的盒子 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;counter&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;nums&quot;</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 初始化 第一个数一定是倒计时的第一个数 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;in&quot;</span>&gt;</span>3<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span>&gt;</span>2<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span>&gt;</span>1<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span>&gt;</span>0<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h4</span>&gt;</span>Get Ready<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- 添加js交互 点击replay按钮 重新倒计时 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;final&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>GO<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;replay&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span>&gt;</span>Replay<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;script.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="stylecss"><a class="markdownIt-Anchor" href="#stylecss"></a> style.css</h3>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@import</span> url(<span class="string">&#x27;https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&amp;display=swap&#x27;</span>);</span><br><span class="line"></span><br><span class="line">* &#123;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">&#x27;Roboto&#x27;</span>, sans-serif;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">h4</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="comment">/* 文本大小写转换  uppercase 强制该文本全部大写 */</span></span><br><span class="line">    <span class="attribute">text-transform</span>: uppercase;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.counter</span> &#123;</span><br><span class="line">    <span class="comment">/* 经典的 盒子在网页的 中心位置显示设置 */</span></span><br><span class="line">    <span class="attribute">position</span>: fixed;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.counter</span><span class="selector-class">.hide</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>) <span class="built_in">scale</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="comment">/* 动画 淡出(慢速结束) 控制 3 2 1 倒计时的转换和隐藏*/</span></span><br><span class="line">    <span class="attribute">animation</span>: hide <span class="number">0.2s</span> ease-out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> hide &#123;</span><br><span class="line">    <span class="number">0%</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>) <span class="built_in">scale</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">100%</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>) <span class="built_in">scale</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.final</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: fixed;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>) <span class="built_in">scale</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.final</span><span class="selector-class">.show</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>) <span class="built_in">scale</span>(<span class="number">1</span>);</span><br><span class="line">    <span class="attribute">animation</span>: show <span class="number">0.2s</span> ease-out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> show &#123;</span><br><span class="line">    <span class="number">0%</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>) <span class="built_in">scale</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="number">30%</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>) <span class="built_in">scale</span>(<span class="number">1.5</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="number">100%</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>) <span class="built_in">scale</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.nums</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#3498db</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">widows</span>: <span class="number">250px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.nums</span> <span class="selector-tag">span</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>) <span class="built_in">rotate</span>(<span class="number">120deg</span>);</span><br><span class="line">    <span class="attribute">transform-origin</span>: bottom center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.nums</span> <span class="selector-tag">span</span><span class="selector-class">.in</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>) <span class="built_in">rotate</span>(<span class="number">0deg</span>);</span><br><span class="line">    <span class="attribute">animation</span>: goIn <span class="number">0.5s</span> ease-in-out;</span><br><span class="line">    <span class="comment">/* 淡入淡出 */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.nums</span> <span class="selector-tag">span</span><span class="selector-class">.out</span> &#123;</span><br><span class="line">    <span class="attribute">animation</span>: goOut <span class="number">0.5s</span> ease-in-out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 实现旋转 左右摆动的视觉效果 */</span></span><br><span class="line"><span class="keyword">@keyframes</span> goIn &#123;</span><br><span class="line">    <span class="number">0%</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>) <span class="built_in">rotate</span>(<span class="number">120deg</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">30%</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>) <span class="built_in">rotate</span>(-<span class="number">20deg</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">60%</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>) <span class="built_in">rotate</span>(<span class="number">10deg</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">100%</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>) <span class="built_in">rotate</span>(<span class="number">0deg</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> goOut &#123;</span><br><span class="line">    <span class="number">0%</span> &#123;</span><br><span class="line">      <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>) <span class="built_in">rotate</span>(<span class="number">0deg</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="number">60%</span> &#123;</span><br><span class="line">      <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>) <span class="built_in">rotate</span>(<span class="number">20deg</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="number">100%</span> &#123;</span><br><span class="line">      <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>) <span class="built_in">rotate</span>(-<span class="number">120deg</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#replay</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#3498db</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">    <span class="attribute">border</span>: none;</span><br><span class="line">    <span class="attribute">color</span>: aliceblue;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">    <span class="attribute">transition</span>: all <span class="number">0.3s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#replay</span> <span class="selector-tag">span</span> &#123;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">transition</span>: <span class="number">0.3s</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="scriptjs"><a class="markdownIt-Anchor" href="#scriptjs"></a> script.js</h3>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> nums = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;.nums span&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> counter = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.counter&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> finalMessage = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.final&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> replay = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#replay&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="title function_">runAnimation</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">resetDOM</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 使用元素的 classList 属性可以访问或添加、删除及修改元素的 class 属性。需注意的是，支持 classList 属性的浏览器主要是一些较新版的，例如：IE10+、Firefox3.6+。使用 classList 属性访问 class 属性的格式如下：element.classList</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// classList 是一个只读属性，其返回的值为 DOMTokenList，其中包含了元素的所有 class 属性，不同的 class 属性之间使用一空格分隔。</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//  classList 调用 add()、remove() 和 toggle() 等方法可以添加、移除或修改元素 class 属性</span></span><br><span class="line">  counter.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;hide&quot;</span>);</span><br><span class="line">  finalMessage.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;show&quot;</span>);</span><br><span class="line"></span><br><span class="line">  nums.<span class="title function_">forEach</span>(<span class="function">(<span class="params">num</span>) =&gt;</span> &#123;</span><br><span class="line">    num.<span class="property">classList</span>.<span class="property">value</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">  &#125;);</span><br><span class="line">  nums[<span class="number">0</span>].<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;in&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">runAnimation</span>(<span class="params"></span>) &#123;</span><br><span class="line">  nums.<span class="title function_">forEach</span>(<span class="function">(<span class="params">num, idx</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> nextToLast = nums.<span class="property">length</span> - <span class="number">1</span>;</span><br><span class="line">    <span class="comment">// nextElementSibling 返回当前元素在其父元素的子元素节点中的后一个元素节点,如果该元素已经是最后一个元素节点,则返回null,该属性是只读的.</span></span><br><span class="line">    num.<span class="title function_">addEventListener</span>(<span class="string">&quot;animationend&quot;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (e.<span class="property">animationName</span> === <span class="string">&quot;goIn&quot;</span> &amp;&amp; idx !== nextToLast) &#123;</span><br><span class="line">        num.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;in&quot;</span>);</span><br><span class="line">        num.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;out&quot;</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (e.<span class="property">animationName</span> === <span class="string">&quot;goOut&quot;</span> &amp;&amp; num.<span class="property">nextElementSibling</span>) &#123;</span><br><span class="line">        num.<span class="property">nextElementSibling</span>.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;in&quot;</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 隐藏计数 显示replay按钮</span></span><br><span class="line">        counter.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;hide&quot;</span>);</span><br><span class="line">        finalMessage.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;show&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">replay.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">resetDOM</span>();</span><br><span class="line">  <span class="title function_">runAnimation</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Web</category>
        <category>实现50个小功能</category>
      </categories>
      <tags>
        <tag>Web</tag>
        <tag>html</tag>
        <tag>css</tag>
        <tag>JavaScript</tag>
        <tag>js</tag>
        <tag>开源项目</tag>
        <tag>demo</tag>
      </tags>
  </entry>
  <entry>
    <title>【demo50】3D盒子背景</title>
    <url>/posts/36271ee5.html</url>
    <content><![CDATA[<h2 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 📢前言</h2>
<p>代码取自开源项目<a href="https://github.com/bradtraversy/50projects50days">50projects50days</a>，用作个人学习和巩固三件套的知识，增加了注释，可能会有小改动。</p>
<p><a href="https://demo.kzmqvq.com/01/index.html">在线演示地址</a></p>
<h2 id="实现思路及效果"><a class="markdownIt-Anchor" href="#实现思路及效果"></a> 📝实现思路及效果</h2>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2022/09/01/jngDcO6l2aKN1e3.jpg" alt="20220901204155.jpg" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2022/09/01/6VFXeNiybk4T2rl.jpg" alt="20220901204206.jpg" /></p>
<h2 id="代码"><a class="markdownIt-Anchor" href="#代码"></a> 💻代码</h2>
<h3 id="indexhtml"><a class="markdownIt-Anchor" href="#indexhtml"></a> index.html</h3>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>3d盒子背景<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 引入一个字体样式 并检验是否安全 --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- integrity 为了防止 CDN 篡改 javascript 而引入的XSS 风险。--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 可以用在&lt;script&gt; 或者 &lt;link&gt;元素上，用来开启浏览器对获取的资源进行检查，它允许你为script或者link提供一个hash，用来进行验签，检验加载的JavaScript文件或者CSS问卷是否完整。如果检验 两者签名不同 则不会执行该资源 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css&quot;</span> <span class="attr">integrity</span>=<span class="string">&quot;sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">crossorigin</span>=<span class="string">&quot;anonymous&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- crossorigin 该枚举属性指定在加载相关图片时是否必须使用CORS。可取的值包括以下两个：</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    anonymous：会发起一个跨域请求（即包含Origin: HTTP头）。但不会发送任何认证信息（即不发送cookie, X.509证书和HTTP基本认证信息）。如果服务器没有给出源站凭证（不设置Access-Control-Allow-Origin: HTTP头），这张图片就会被污染并限制使用。</span></span><br><span class="line"><span class="comment">    use-credentials：会发起一个带有认证信息 (发送 cookie, X.509 证书和 HTTP 基本认证信息) 的跨域请求 (即&gt;包含 Origin: HTTP 头). 如果服务器没有给出源站凭证 (不设置 Access-Control-Allow-Origin: HTTP 头), 这张图片就会被污染并限制使用.</span></span><br><span class="line"><span class="comment">    </span></span><br><span class="line"><span class="comment">    当不设置该属性时, 资源将会不使用 CORS 加载 (即不发送 Origin: HTTP 头), 这将阻止其在 元素中进行使用. 若设置了非法的值, 则视为使用 anonymous.</span></span><br><span class="line"><span class="comment">		</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;style.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span> <span class="attr">class</span>=<span class="string">&quot;change&quot;</span>&gt;</span> change style <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 默认状态下是一个 包括4*4格子 的大盒子 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;boxes&quot;</span> <span class="attr">class</span>=<span class="string">&quot;boxes big&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;script.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="stylecss"><a class="markdownIt-Anchor" href="#stylecss"></a> style.css</h3>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* @import 引入样式 注意加上分号 */</span></span><br><span class="line"><span class="keyword">@import</span> url(<span class="string">&#x27;https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&amp;display=swap&#x27;</span>);</span><br><span class="line"><span class="keyword">@import</span> url(<span class="string">&#x27;https://fonts.googleapis.com/css2?family=Poppins&amp;display=swap&#x27;</span>);</span><br><span class="line">* &#123;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#fafafa</span>;</span><br><span class="line">    <span class="comment">/* sans-serif 无衬线字体 */</span></span><br><span class="line">    <span class="comment">/* font-family最后加上sans-serif，也是为了保证能够调用这个字体族里面的字体，因为大多数计算机里都有这种字体。 */</span></span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">&#x27;Roboto&#x27;</span>, sans-serif;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="comment">/* 规定弹性项目的方向 */</span></span><br><span class="line">    <span class="attribute">flex-direction</span>: column;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.change</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#f9ca24</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">&#x27;Poppins&#x27;</span>, sans-serif;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">12px</span> <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">    <span class="attribute">position</span>: fixed;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="comment">/* 设置字与字之间的间距 */</span></span><br><span class="line">    <span class="attribute">letter-spacing</span>: <span class="number">2px</span>;</span><br><span class="line">    <span class="comment">/* box-shadow 给盒子添加阴影; */</span></span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">3px</span> <span class="built_in">rgba</span>(<span class="number">249</span>, <span class="number">202</span>, <span class="number">36</span>, <span class="number">0.5</span>);</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">100</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 按钮 焦点状态 */</span></span><br><span class="line"><span class="selector-class">.change</span><span class="selector-pseudo">:focus</span> &#123;</span><br><span class="line">    <span class="comment">/* 盒子边框样式为空 */</span></span><br><span class="line">    <span class="attribute">outline</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 按钮 点击状态 */</span></span><br><span class="line"><span class="selector-class">.change</span><span class="selector-pseudo">:active</span> &#123;</span><br><span class="line">    <span class="attribute">box-shadow</span>: none;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">2px</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.boxes</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="comment">/* 弹性盒子在需要的时候换行 常用于li标签弹性布局展示商品  */</span></span><br><span class="line">    <span class="attribute">flex-wrap</span>: wrap;</span><br><span class="line">    <span class="attribute">justify-content</span>: space-between;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">500px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">850px</span>;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">28px</span>;</span><br><span class="line">    <span class="comment">/* 动画0.4秒过程 快启动 慢停止 */</span></span><br><span class="line">    <span class="attribute">transition</span>: <span class="number">0.4s</span> ease;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.boxes</span><span class="selector-class">.big</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">950px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">600px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 大图切割成小盒子（小图）的样式设置 */</span></span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&#x27;https://vip1.loli.io/2022/05/05/yaiAdPZeuYRXcL5.jpg&#x27;</span>);</span><br><span class="line">    <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">    <span class="attribute">background-size</span>: <span class="number">850px</span> <span class="number">500px</span>;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">125px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">170px</span>;</span><br><span class="line">    <span class="attribute">transition</span>: <span class="number">0.4s</span> ease;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 小盒子的外侧面 合并后仍会显示在外层 */</span></span><br><span class="line"><span class="selector-class">.box</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#eae5e6</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">8px</span>;</span><br><span class="line">    <span class="attribute">right</span>: -<span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">15px</span>;</span><br><span class="line">    <span class="comment">/* 二维平面上 倾斜45度 显示出立体盒子其他面的背景色 给人立体感*/</span></span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">skewY</span>(<span class="number">45deg</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 小盒子的内侧面 合并后看不到 */</span></span><br><span class="line"><span class="selector-class">.box</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#eae5e6</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">bottom</span>: -<span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">8px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">skewX</span>(<span class="number">45deg</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="scriptjs"><a class="markdownIt-Anchor" href="#scriptjs"></a> script.js</h3>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> boxesContainer = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;boxes&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> btn = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;btn&#x27;</span>)</span><br><span class="line"></span><br><span class="line">btn.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> boxesContainer.<span class="property">classList</span>.<span class="title function_">toggle</span>(<span class="string">&#x27;big&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createBoxes</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; <span class="number">5</span>; j++) &#123;</span><br><span class="line">            <span class="keyword">const</span> box = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line">            box.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;box&#x27;</span>)</span><br><span class="line">            <span class="comment">// 每个小盒子显示图片一个小角 图片移动盒子定长倍数 由下一个盒子显示</span></span><br><span class="line">            box.<span class="property">style</span>.<span class="property">backgroundPosition</span> = <span class="string">`<span class="subst">$&#123;-j * <span class="number">170</span>&#125;</span>px <span class="subst">$&#123;-i * <span class="number">125</span>&#125;</span>px`</span></span><br><span class="line">            boxesContainer.<span class="title function_">appendChild</span>(box)</span><br><span class="line">        &#125;        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">createBoxes</span>()</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Web</category>
        <category>实现50个小功能</category>
      </categories>
      <tags>
        <tag>Web</tag>
        <tag>html</tag>
        <tag>css</tag>
        <tag>JavaScript</tag>
        <tag>js</tag>
        <tag>开源项目</tag>
        <tag>demo</tag>
      </tags>
  </entry>
  <entry>
    <title>【JavaWeb】mybatis基础</title>
    <url>/posts/417eb291.html</url>
    <content><![CDATA[<h2 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言</h2>
<p>记录学习JavaWeb课程中的部分知识点，包括maven依赖管理、maven高阶、Mybatis、SpringBoot自动配置等。本篇是关于mybatis的相关配置，以实现对数据的增删改查功能。</p>
<h2 id="mybatis增删改查"><a class="markdownIt-Anchor" href="#mybatis增删改查"></a> MyBatis增删改查</h2>
<h3 id="相关配置"><a class="markdownIt-Anchor" href="#相关配置"></a> 相关配置</h3>
<ol>
<li>准备数据库表emp，sql代码如下：</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> <span class="keyword">user</span>(</span><br><span class="line">     id <span class="type">int</span> unsigned <span class="keyword">primary</span> key auto_increment comment <span class="string">&#x27;ID&#x27;</span>,</span><br><span class="line">     name <span class="type">varchar</span>(<span class="number">100</span>) comment <span class="string">&#x27;姓名&#x27;</span>,</span><br><span class="line">     age tinyint unsigned comment <span class="string">&#x27;年龄&#x27;</span>,</span><br><span class="line">     gender tinyint unsigned comment <span class="string">&#x27;性别, 1:男, 2:女&#x27;</span>,</span><br><span class="line">     phone <span class="type">varchar</span>(<span class="number">11</span>) comment <span class="string">&#x27;手机号&#x27;</span></span><br><span class="line">) comment <span class="string">&#x27;用户表&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">user</span>(id, name, age, gender, phone) <span class="keyword">VALUES</span> (<span class="keyword">null</span>,<span class="string">&#x27;白眉鹰王&#x27;</span>,<span class="number">55</span>,<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;18800000000&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">user</span>(id, name, age, gender, phone) <span class="keyword">VALUES</span> (<span class="keyword">null</span>,<span class="string">&#x27;金毛狮王&#x27;</span>,<span class="number">45</span>,<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;18800000001&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">user</span>(id, name, age, gender, phone) <span class="keyword">VALUES</span> (<span class="keyword">null</span>,<span class="string">&#x27;青翼蝠王&#x27;</span>,<span class="number">38</span>,<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;18800000002&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">user</span>(id, name, age, gender, phone) <span class="keyword">VALUES</span> (<span class="keyword">null</span>,<span class="string">&#x27;紫衫龙王&#x27;</span>,<span class="number">42</span>,<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;18800000003&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">user</span>(id, name, age, gender, phone) <span class="keyword">VALUES</span> (<span class="keyword">null</span>,<span class="string">&#x27;光明左使&#x27;</span>,<span class="number">37</span>,<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;18800000004&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">user</span>(id, name, age, gender, phone) <span class="keyword">VALUES</span> (<span class="keyword">null</span>,<span class="string">&#x27;光明右使&#x27;</span>,<span class="number">48</span>,<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;18800000005&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 部门管理</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> dept(</span><br><span class="line">     id <span class="type">int</span> unsigned <span class="keyword">primary</span> key auto_increment comment <span class="string">&#x27;主键ID&#x27;</span>,</span><br><span class="line">     name <span class="type">varchar</span>(<span class="number">10</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">unique</span> comment <span class="string">&#x27;部门名称&#x27;</span>,</span><br><span class="line">     create_time datetime <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;创建时间&#x27;</span>,</span><br><span class="line">     update_time datetime <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;修改时间&#x27;</span></span><br><span class="line">) comment <span class="string">&#x27;部门表&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> dept (id, name, create_time, update_time) <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;学工部&#x27;</span>,now(),now()),(<span class="number">2</span>,<span class="string">&#x27;教研部&#x27;</span>,now(),now()),(<span class="number">3</span>,<span class="string">&#x27;咨询部&#x27;</span>,now(),now()), (<span class="number">4</span>,<span class="string">&#x27;就业部&#x27;</span>,now(),now()),(<span class="number">5</span>,<span class="string">&#x27;人事部&#x27;</span>,now(),now());</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 员工管理</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> emp (</span><br><span class="line">     id <span class="type">int</span> unsigned <span class="keyword">primary</span> key auto_increment comment <span class="string">&#x27;ID&#x27;</span>,</span><br><span class="line">     username <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">unique</span> comment <span class="string">&#x27;用户名&#x27;</span>,</span><br><span class="line">     password <span class="type">varchar</span>(<span class="number">32</span>) <span class="keyword">default</span> <span class="string">&#x27;123456&#x27;</span> comment <span class="string">&#x27;密码&#x27;</span>,</span><br><span class="line">     name <span class="type">varchar</span>(<span class="number">10</span>) <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;姓名&#x27;</span>,</span><br><span class="line">     gender tinyint unsigned <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;性别, 说明: 1 男, 2 女&#x27;</span>,</span><br><span class="line">     image <span class="type">varchar</span>(<span class="number">300</span>) comment <span class="string">&#x27;图像&#x27;</span>,</span><br><span class="line">     job tinyint unsigned comment <span class="string">&#x27;职位, 说明: 1 班主任,2 讲师, 3 学工主管, 4 教研主管, 5 咨询师&#x27;</span>,</span><br><span class="line">     entrydate <span class="type">date</span> comment <span class="string">&#x27;入职时间&#x27;</span>,</span><br><span class="line">     dept_id <span class="type">int</span> unsigned comment <span class="string">&#x27;部门ID&#x27;</span>,</span><br><span class="line">     create_time datetime <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;创建时间&#x27;</span>,</span><br><span class="line">     update_time datetime <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;修改时间&#x27;</span></span><br><span class="line">) comment <span class="string">&#x27;员工表&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp(id, username, password, name, gender, image, job, entrydate,dept_id, create_time, update_time) <span class="keyword">VALUES</span></span><br><span class="line">    (<span class="number">1</span>,<span class="string">&#x27;jinyong&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;金庸&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;1.jpg&#x27;</span>,<span class="number">4</span>,<span class="string">&#x27;2000-01-01&#x27;</span>,<span class="number">2</span>,now(),now()),</span><br><span class="line">    (<span class="number">2</span>,<span class="string">&#x27;zhangwuji&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;张无忌&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;2.jpg&#x27;</span>,<span class="number">2</span>,<span class="string">&#x27;2015-01-01&#x27;</span>,<span class="number">2</span>,now(),now()),</span><br><span class="line">    (<span class="number">3</span>,<span class="string">&#x27;yangxiao&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;杨逍&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;3.jpg&#x27;</span>,<span class="number">2</span>,<span class="string">&#x27;2008-05-01&#x27;</span>,<span class="number">2</span>,now(),now()),</span><br><span class="line">    (<span class="number">4</span>,<span class="string">&#x27;weiyixiao&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;韦一笑&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;4.jpg&#x27;</span>,<span class="number">2</span>,<span class="string">&#x27;2007-01-01&#x27;</span>,<span class="number">2</span>,now(),now()),</span><br><span class="line">    (<span class="number">5</span>,<span class="string">&#x27;changyuchun&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;常遇春&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;5.jpg&#x27;</span>,<span class="number">2</span>,<span class="string">&#x27;2012-12-05&#x27;</span>,<span class="number">2</span>,now(),now()),</span><br><span class="line">    (<span class="number">6</span>,<span class="string">&#x27;xiaozhao&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;小昭&#x27;</span>,<span class="number">2</span>,<span class="string">&#x27;6.jpg&#x27;</span>,<span class="number">3</span>,<span class="string">&#x27;2013-09-05&#x27;</span>,<span class="number">1</span>,now(),now()),</span><br><span class="line">    (<span class="number">7</span>,<span class="string">&#x27;jixiaofu&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;纪晓芙&#x27;</span>,<span class="number">2</span>,<span class="string">&#x27;7.jpg&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;2005-08-01&#x27;</span>,<span class="number">1</span>,now(),now()),</span><br><span class="line">    (<span class="number">8</span>,<span class="string">&#x27;zhouzhiruo&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;周芷若&#x27;</span>,<span class="number">2</span>,<span class="string">&#x27;8.jpg&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;2014-11-09&#x27;</span>,<span class="number">1</span>,now(),now()),</span><br><span class="line">    (<span class="number">9</span>,<span class="string">&#x27;dingminjun&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;丁敏君&#x27;</span>,<span class="number">2</span>,<span class="string">&#x27;9.jpg&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;2011-03-11&#x27;</span>,<span class="number">1</span>,now(),now()),</span><br><span class="line">    (<span class="number">10</span>,<span class="string">&#x27;zhaomin&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;赵敏&#x27;</span>,<span class="number">2</span>,<span class="string">&#x27;10.jpg&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;2013-09-05&#x27;</span>,<span class="number">1</span>,now(),now()),</span><br><span class="line">    (<span class="number">11</span>,<span class="string">&#x27;luzhangke&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;鹿杖客&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;11.jpg&#x27;</span>,<span class="number">5</span>,<span class="string">&#x27;2007-02-01&#x27;</span>,<span class="number">3</span>,now(),now()),</span><br><span class="line">    (<span class="number">12</span>,<span class="string">&#x27;hebiweng&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;鹤笔翁&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;12.jpg&#x27;</span>,<span class="number">5</span>,<span class="string">&#x27;2008-08-18&#x27;</span>,<span class="number">3</span>,now(),now()),</span><br><span class="line">    (<span class="number">13</span>,<span class="string">&#x27;fangdongbai&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;方东白&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;13.jpg&#x27;</span>,<span class="number">5</span>,<span class="string">&#x27;2012-11-01&#x27;</span>,<span class="number">3</span>,now(),now()),</span><br><span class="line">    (<span class="number">14</span>,<span class="string">&#x27;zhangsanfeng&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;张三丰&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;14.jpg&#x27;</span>,<span class="number">2</span>,<span class="string">&#x27;2002-08-01&#x27;</span>,<span class="number">2</span>,now(),now()),</span><br><span class="line">    (<span class="number">15</span>,<span class="string">&#x27;yulianzhou&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;俞莲舟&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;15.jpg&#x27;</span>,<span class="number">2</span>,<span class="string">&#x27;2011-05-01&#x27;</span>,<span class="number">2</span>,now(),now()),</span><br><span class="line">    (<span class="number">16</span>,<span class="string">&#x27;songyuanqiao&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;宋远桥&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;16.jpg&#x27;</span>,<span class="number">2</span>,<span class="string">&#x27;2010-01-01&#x27;</span>,<span class="number">2</span>,now(),now()),</span><br><span class="line">    (<span class="number">17</span>,<span class="string">&#x27;chenyouliang&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;陈友谅&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;17.jpg&#x27;</span>,<span class="keyword">NULL</span>,<span class="string">&#x27;2015-03-21&#x27;</span>,<span class="keyword">NULL</span>,now(),now());</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>创建一个新的springboot工程，选择引入对应的依赖，如mybatis、mysql驱动、lombok</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/10/14/oKCfBMvc5jbPN2u.png" alt="image-20231014205542023" /></p>
<p>其实最方便的还是新建一个空的maven项目，直接把依赖配置粘贴上去（pom.xml）</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>02-springboot-mybatis-crud<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">excludes</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">exclude</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">excludes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ol start="3">
<li>application.properties中引入数据库连接信息</li>
</ol>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment">#配置数据库的连接信息 - 四要素</span></span><br><span class="line"><span class="comment">#驱动类名称</span></span><br><span class="line"><span class="attr">spring.datasource.driver-class-name</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="comment">#数据库连接的url</span></span><br><span class="line"><span class="attr">spring.datasource.url</span>=<span class="string">jdbc:mysql://localhost:3306/mybatis</span></span><br><span class="line"><span class="comment">#连接数据库的用户名</span></span><br><span class="line"><span class="attr">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="comment">#连接数据库的密码</span></span><br><span class="line"><span class="attr">spring.datasource.password</span>=<span class="string">123456</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#开启mybatis日志 并输出至控制台</span></span><br><span class="line"><span class="attr">mybatis.configuration.log-impl</span>=<span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br></pre></td></tr></table></figure>
<ol start="4">
<li>创建对应的实体类Emp（实体类属性采用驼峰命名）</li>
</ol>
<p>构造该实体类时使用了lombok中的@Data、@NoArgsConstructor及@AllArgsConstructor，简化了无参和带有各参数的构造，避免重复使用<code>alt + insert</code>生成。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/10/14/evol7HVLYErK2sh.png" alt="" /></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalDate;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Emp</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id; <span class="comment">// ID</span></span><br><span class="line">    <span class="keyword">private</span> String username; <span class="comment">// 用户名</span></span><br><span class="line">    <span class="keyword">private</span> String password; <span class="comment">// 密码</span></span><br><span class="line">    <span class="keyword">private</span> String name; <span class="comment">// 姓名</span></span><br><span class="line">    <span class="keyword">private</span> Short gender; <span class="comment">// 性别, 1 男, 2 女</span></span><br><span class="line">    <span class="keyword">private</span> String image; <span class="comment">// 图像url</span></span><br><span class="line">    <span class="keyword">private</span> Short job; <span class="comment">// 职位, 说明: 1 班主任,2 讲师, 3 学工主管, 4 教研主管, 5 咨询师&#x27;</span></span><br><span class="line">    <span class="keyword">private</span> LocalDate entrydate; <span class="comment">// 入职日期</span></span><br><span class="line">    <span class="keyword">private</span> Integer deptId; <span class="comment">// 部门ID</span></span><br><span class="line">    <span class="keyword">private</span> LocalDateTime createTime; <span class="comment">// 创建时间</span></span><br><span class="line">    <span class="keyword">private</span> LocalDateTime updateTime; <span class="comment">// 修改时间</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="5">
<li>准备Mapper接口 EmpMapper</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itheima.pojo.Emp;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.time.LocalDate;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">EmpMapper</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>完成后的项目结构如下：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/10/14/nkbfitHe5lN4F7X.png" alt="image-20231014204435761" /></p>
<h3 id="增加"><a class="markdownIt-Anchor" href="#增加"></a> 增加</h3>
<p>emp表的内容如下：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/10/14/aqWvY15gdzEP3JK.png" alt="image-20231014224949194" /></p>
<p>如果需要新增数据，sql语句应为：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp(username, name, gender, image, job, entrydate, dept_id, create_time, update_time) <span class="keyword">values</span> (<span class="string">&#x27;songyuanqiao&#x27;</span>,<span class="string">&#x27;宋远桥&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;1.jpg&#x27;</span>,<span class="number">2</span>,<span class="string">&#x27;2012-10-09&#x27;</span>,<span class="number">2</span>,<span class="string">&#x27;2022-10-01 10:00:00&#x27;</span>,<span class="string">&#x27;2022-10-01 10:00:00&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>对应的接口方法为：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">EmpMapper</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Insert(&quot;insert into emp(username, name, gender, image, job, entrydate, dept_id, create_time, update_time) values (#&#123;username&#125;, #&#123;name&#125;, #&#123;gender&#125;, #&#123;image&#125;, #&#123;job&#125;, #&#123;entrydate&#125;, #&#123;deptId&#125;, #&#123;createTime&#125;, #&#123;updateTime&#125;)&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(Emp emp)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="参数占位符"><a class="markdownIt-Anchor" href="#参数占位符"></a> 参数占位符</h4>
<p><code>#&#123;…&#125;</code>为MyBatis的<strong>参数占位符</strong>，还有一种形式为<code>$&#123;…&#125;</code>。需要注意花括号中的名称是<strong>对象的属性名</strong>(采用驼峰命名)，不是数据库中的字段名。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/10/15/9ICRKcPeoz76mvf.png" alt="参数占位符" /></p>
<blockquote>
<p>在项目开发中，建议使用#{…}，生成预编译SQL，防止SQL注入安全。</p>
</blockquote>
<h4 id="预编译sql"><a class="markdownIt-Anchor" href="#预编译sql"></a> 预编译SQL</h4>
<p><strong>预编译SQL</strong>可以提升性能，将sql语句参数化，编译一次之后会将编译后的SQL语句缓存起来，可多次运行，不需要对相同的sql语句做重复编译。同时将敏感字进行转义，保障SQL的安全性。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/10/15/13FLBIPkiKT5RpA.png" alt="" /></p>
<h4 id="主键返回"><a class="markdownIt-Anchor" href="#主键返回"></a> 主键返回</h4>
<p>如果需要在添加数据后，返回该数据对应数据表中的主键(id)，只需要添加如下注解。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//会自动将生成的主键值，赋值给emp对象的id属性</span></span><br><span class="line"><span class="meta">@Options(useGeneratedKeys = true,keyProperty = &quot;id&quot;)</span></span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/10/15/xLZvr6Op7QABYeR.png" alt="" /></p>
<h3 id="删除"><a class="markdownIt-Anchor" href="#删除"></a> 删除</h3>
<p>根据主键删除数据，sql语句如下：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> emp <span class="keyword">where</span> id <span class="operator">=</span> <span class="number">17</span>;</span><br></pre></td></tr></table></figure>
<p>接口方法如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">EmpMapper</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Delete(&quot;delete from emp where id = #&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(Integer id)</span>;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="修改"><a class="markdownIt-Anchor" href="#修改"></a> 修改</h3>
<p>根据主键修改数据，与增加数据的方式相同，sql语句如下：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">update</span> emp <span class="keyword">set</span> username <span class="operator">=</span> <span class="string">&#x27;linghushaoxia&#x27;</span>, name <span class="operator">=</span> <span class="string">&#x27;令狐少侠&#x27;</span>, gender <span class="operator">=</span> <span class="number">1</span> , image <span class="operator">=</span> <span class="string">&#x27;1.jpg&#x27;</span> , job <span class="operator">=</span> <span class="number">2</span>, entrydate <span class="operator">=</span> <span class="string">&#x27;2012-01-01&#x27;</span>, dept_id <span class="operator">=</span> <span class="number">2</span>, update_time <span class="operator">=</span> <span class="string">&#x27;2022-10-01 12:12:12&#x27;</span> <span class="keyword">where</span> id <span class="operator">=</span> <span class="number">18</span>;</span><br></pre></td></tr></table></figure>
<p>接口方法如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">EmpMapper</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Update(&quot;update emp set username = #&#123;username&#125;, name = #&#123;name&#125;, gender = #&#123;gender&#125;, image = #&#123;image&#125;,&quot; + &quot; job = #&#123;job&#125;, entrydate = #&#123;entrydate&#125;, dept_id = #&#123;deptId&#125;,update_time = #&#123;updateTime&#125; where id = #&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(Emp emp)</span>;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="查询"><a class="markdownIt-Anchor" href="#查询"></a> 查询</h3>
<p>根据主键查询数据，sql语句如下：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> id, username, password, name, gender, image, job, entrydate, dept_id, create_time, update_time <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/10/15/Q3BhtMS6G8HmNJ5.png" alt="" /></p>
<p>查询结果中的deptId、createTime、updateTime为空， 因为数据表中的字段与实体类中的属性名不一致，导致mybatis不能自动封装。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/10/15/en1FKW63yc2k8vx.png" alt="" /></p>
<p><strong>解决方案</strong>：</p>
<ol>
<li>字段起别名</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/10/15/QZH7pjTUAfOY5eS.png" alt="" /></p>
<ol start="2">
<li>@Results注解</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/10/15/qkzvNF5KVXa6xyg.png" alt="" /></p>
<ol start="3">
<li>开启mybatis驼峰命名法自动映射开关</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/10/15/aI7eqgLDwn2QJkx.png" alt="" /></p>
<h4 id="条件查询"><a class="markdownIt-Anchor" href="#条件查询"></a> 条件查询</h4>
<p>在实际使用中，我们可能需要根据姓名、性别、入职时间及最后修改时间多项条件对员工表进行模糊查询，</p>
<ul>
<li>
<p>姓名：要求支持模糊匹配</p>
</li>
<li>
<p>性别：要求精确匹配</p>
</li>
<li>
<p>入职时间：要求进行范围查询</p>
</li>
<li>
<p>根据最后修改时间进行降序排序</p>
</li>
</ul>
<p>可能使用的sql语句示例如下：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> id, username, password, name, gender, image, job, entrydate, dept_id, create_time, update_time <span class="keyword">from</span> emp</span><br><span class="line"><span class="keyword">where</span> name <span class="keyword">like</span> <span class="string">&#x27;%张%&#x27;</span> </span><br><span class="line">	<span class="keyword">and</span> gender <span class="operator">=</span> <span class="number">1</span> </span><br><span class="line">	<span class="keyword">and</span> entrydate <span class="keyword">between</span> <span class="string">&#x27;2010-01-01&#x27;</span> <span class="keyword">and</span> <span class="string">&#x27;2020-01-01 &#x27;</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> update_time <span class="keyword">desc</span>;</span><br></pre></td></tr></table></figure>
<p>对应两种可以使用的接口方法：</p>
<p>第一种（使用${…}进行字符串拼接）：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Select(&quot;select * from emp where name like &#x27;%$&#123;name&#125;%&#x27; and gender = #&#123;gender&#125; and &quot; +</span></span><br><span class="line"><span class="meta">       &quot;entrydate between #&#123;begin&#125; and #&#123;end&#125; order by update_time desc &quot;)</span></span><br><span class="line"><span class="keyword">public</span> List&lt;Emp&gt; <span class="title function_">list</span><span class="params">(String name, Short gender, LocalDate begin , LocalDate end)</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>该方法并不是预编译的形式，所以效率不高、且存在sql注入风险。</p>
<p>第二种（使用MySQL提供的字符串拼接函数concat）：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Select(&quot;select * from emp where name like concat(&#x27;%&#x27;,#&#123;name&#125;,&#x27;%&#x27;) and gender = #&#123;gender&#125; and &quot; +</span></span><br><span class="line"><span class="meta">        &quot;entrydate between #&#123;begin&#125; and #&#123;end&#125; order by update_time desc &quot;)</span></span><br><span class="line"><span class="keyword">public</span> List&lt;Emp&gt; <span class="title function_">list</span><span class="params">(String name, Short gender, LocalDate begin , LocalDate end)</span>;</span><br></pre></td></tr></table></figure>
<p>函数：concat(’%’ , ‘关键字’ , ‘%’)，此方法生成的SQL都是预编译的SQL语句（性能高、安全）</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/10/15/gZEuWQJCzhAvXxU.png" alt="image-20231015210307268" /></p>
<blockquote>
<p>需要注意编写代码中的参数名规范，保证接口中方法的形参名和SQL语句中的参数占位符名相同。参数名在不同的SpringBoot版本中，处理方案也不同。</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/10/15/vSCIqElsB5QK739.png" alt="" /></p>
<h4 id="xml映射文件"><a class="markdownIt-Anchor" href="#xml映射文件"></a> xml映射文件</h4>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/10/15/7kwiULE6y8Gpu2V.png" alt="" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/10/15/bhVPWZrYlR2v1d3.png" alt="" /></p>
<p>通过id（对应的方法）找到对应的sql语句 来完成数据库的操作</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/10/15/Rfr6VaqvhS53ELc.png" alt="" /></p>
<p><a href="https://mybatis.net.cn/getting-started.html">https://mybatis.net.cn/getting-started.html</a></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/10/15/ibEdGAg89YL3eVR.png" alt="" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/10/15/j2ao4hYqbekzKZA.jpg" alt="" /></p>
]]></content>
      <categories>
        <category>JavaWeb</category>
      </categories>
      <tags>
        <tag>JavaWeb</tag>
        <tag>后端</tag>
      </tags>
  </entry>
  <entry>
    <title>【demo50】背景图点击切换</title>
    <url>/posts/cb048cf6.html</url>
    <content><![CDATA[<h2 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 📢前言</h2>
<p>代码取自开源项目<a href="https://github.com/bradtraversy/50projects50days">50projects50days</a>，用作个人学习和巩固三件套的知识，增加了注释，可能会有小改动。</p>
<p><a href="https://demo.kzmqvq.com/05/index.html">在线演示地址</a></p>
<h2 id="实现思路及效果"><a class="markdownIt-Anchor" href="#实现思路及效果"></a> 📝实现思路及效果</h2>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2022/09/02/bOch1elQRNGYym4.jpg" alt="QQ截图20220902131338.jpg" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2022/09/02/Njgc2iwdvPUySh4.jpg" alt="QQ截图20220902131349.jpg" /></p>
<h2 id="代码"><a class="markdownIt-Anchor" href="#代码"></a> 💻代码</h2>
<h3 id="indexhtml"><a class="markdownIt-Anchor" href="#indexhtml"></a> index.html</h3>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;style.css&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">integrity</span>=<span class="string">&quot;sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">crossorigin</span>=<span class="string">&quot;anonymous&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>背景图点击切换<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;shortcut icon&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../logo.svg&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 一张大图 背景虚化 作为背景(加透明度蒙版) --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 一张相同图 改变 放置图片容器的视区和视窗 实现蒙版中心透明的效果 --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 两个button 控制图片上一张 下一张切换 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;slide-container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;slide active&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-image: url(https://vip1.loli.io/2022/05/09/P5sNzBUnZ947m6f.jpg)&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;slide&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-image: url(https://vip1.loli.io/2022/05/09/HMJEWiOfaVFGjAI.jpg);&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;slide&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-image: url(https://vip1.loli.io/2022/05/09/oZqalP8McVQR1fd.jpg);&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;slide&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-image: url(https://vip1.loli.io/2022/05/09/NSAprtCDBH1Xd3F.jpg);&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;slide&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-image: url(https://vip2.loli.io/2022/05/09/iCL9GxptQmJ5fB6.jpg);&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;slide&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-image: url(https://vip1.loli.io/2022/05/09/NXQx62jYyERG8FU.jpg);&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;arrow left-arrow&quot;</span> <span class="attr">id</span>=<span class="string">&quot;left&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fas fa-arrow-left&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;arrow right-arrow&quot;</span> <span class="attr">id</span>=<span class="string">&quot;right&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fas fa-arrow-right&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;script.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="stylecss"><a class="markdownIt-Anchor" href="#stylecss"></a> style.css</h3>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@import</span> url(<span class="string">&#x27;https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&amp;display=swap&#x27;</span>);</span><br><span class="line"></span><br><span class="line">* &#123;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: <span class="string">&#x27;Roboto&#x27;</span>, sans-serif;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">background-position</span>: center center;</span><br><span class="line">  <span class="comment">/* 复习知识点 背景图尺寸 cover和contain的区别 */</span></span><br><span class="line">  <span class="attribute">background-size</span>: cover;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="number">0.4s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 伪元素设置大背景(黑色蒙版) 节省一个类名 */</span></span><br><span class="line"><span class="selector-tag">body</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.7</span>);</span><br><span class="line">  <span class="comment">/* 保证背景始终置于底部 */</span></span><br><span class="line">  <span class="attribute">z-index</span>: -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.slide-container</span> &#123;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">3px</span> <span class="number">6px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.16</span>), <span class="number">0</span> <span class="number">3px</span> <span class="number">6px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.23</span>);</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">70vh</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">70vw</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.slide</span> &#123;</span><br><span class="line">  <span class="comment">/* 未切换至该图片前 图片透明 */</span></span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100vw</span>;</span><br><span class="line">  <span class="attribute">background-position</span>: center center;</span><br><span class="line">  <span class="attribute">background-size</span>: cover;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: -<span class="number">15vh</span>;</span><br><span class="line">  <span class="attribute">left</span>: -<span class="number">15vw</span>;</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">0.4s</span> ease;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.slide</span><span class="selector-class">.active</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.arrow</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: fixed;</span><br><span class="line">  <span class="attribute">background-color</span>: transparent;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">2px</span> solid orange;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-<span class="number">50%</span>);</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.arrow</span><span class="selector-pseudo">:focus</span> &#123;</span><br><span class="line">  <span class="attribute">outline</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.left-arrow</span> &#123;</span><br><span class="line">  <span class="attribute">left</span>: <span class="built_in">calc</span>(<span class="number">15vw</span> - <span class="number">65px</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.right-arrow</span> &#123;</span><br><span class="line">  <span class="attribute">right</span>: <span class="built_in">calc</span>(<span class="number">15vw</span> - <span class="number">65px</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="scriptjs"><a class="markdownIt-Anchor" href="#scriptjs"></a> script.js</h3>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> body = <span class="variable language_">document</span>.<span class="property">body</span></span><br><span class="line"><span class="keyword">const</span> slides = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.slide&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> leftBtn = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;left&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> rightBtn = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;right&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> activeSlide = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">rightBtn.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  activeSlide++</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (activeSlide &gt; slides.<span class="property">length</span> - <span class="number">1</span>) &#123;</span><br><span class="line">    activeSlide = <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">setBgToBody</span>()</span><br><span class="line">  <span class="title function_">setActiveSlide</span>()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">leftBtn.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  activeSlide--</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (activeSlide &lt; <span class="number">0</span>) &#123;</span><br><span class="line">    activeSlide = slides.<span class="property">length</span> - <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">setBgToBody</span>()</span><br><span class="line">  <span class="title function_">setActiveSlide</span>()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title function_">setBgToBody</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">setBgToBody</span>(<span class="params"></span>) &#123;</span><br><span class="line">  body.<span class="property">style</span>.<span class="property">backgroundImage</span> = slides[activeSlide].<span class="property">style</span>.<span class="property">backgroundImage</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">setActiveSlide</span>(<span class="params"></span>) &#123;</span><br><span class="line">  slides.<span class="title function_">forEach</span>(<span class="function">(<span class="params">slide</span>) =&gt;</span> slide.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;active&#x27;</span>))</span><br><span class="line"></span><br><span class="line">  slides[activeSlide].<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;active&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Web</category>
        <category>实现50个小功能</category>
      </categories>
      <tags>
        <tag>Web</tag>
        <tag>html</tag>
        <tag>css</tag>
        <tag>JavaScript</tag>
        <tag>js</tag>
        <tag>开源项目</tag>
        <tag>demo</tag>
      </tags>
  </entry>
  <entry>
    <title>【demo50】导航栏最小化</title>
    <url>/posts/f2b39b78.html</url>
    <content><![CDATA[<h2 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 📢前言</h2>
<p>代码取自开源项目<a href="https://github.com/bradtraversy/50projects50days">50projects50days</a>，用作个人学习和巩固三件套的知识，增加了注释，可能会有小改动。</p>
<p><a href="https://demo.kzmqvq.com/03/index.html">在线演示地址</a></p>
<h2 id="实现思路及效果"><a class="markdownIt-Anchor" href="#实现思路及效果"></a> 📝实现思路及效果</h2>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2022/09/02/lEjWk7IswbXBDtr.jpg" alt="QQ截图20220902130920.jpg" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2022/09/02/5t6pzTEAYvwlaVc.jpg" alt="QQ截图20220902130929.jpg" /></p>
<h2 id="代码"><a class="markdownIt-Anchor" href="#代码"></a> 💻代码</h2>
<h3 id="indexhtml"><a class="markdownIt-Anchor" href="#indexhtml"></a> index.html</h3>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>导航栏最小化<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;shortcut icon&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../logo.svg&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;style.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">&quot;active&quot;</span> <span class="attr">id</span>=<span class="string">&quot;nav&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">      &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Home&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="comment">      &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Works&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="comment">      &lt;li&gt;&lt;a href=&quot;#&quot;&gt;About&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="comment">      &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Contact&lt;/a&gt;&lt;/li&gt; </span></span><br><span class="line"><span class="comment">      --&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">      &lt;li&gt;&lt;a href=&quot;#&quot;&gt;kawldkl aakwdmk&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="comment">      &lt;li&gt;&lt;a href=&quot;#&quot;&gt;wndakaj wdikma&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="comment">      &lt;li&gt;&lt;a href=&quot;#&quot;&gt;aiwnif  kajhwndj&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="comment">      &lt;li&gt;&lt;a href=&quot;#&quot;&gt;akwn dkamw&lt;/a&gt;&lt;/li&gt; </span></span><br><span class="line"><span class="comment">      --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 当我转换成汉字后 旋转过程 汉字会出现竖直排列的情况……但英文字符串就没这个问题 但是 如果英文中间添加了空格 就会出现和汉字相同的情况…… 调整a nav li 的宽度无果 --&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">&lt;!-- 问题抽象：弹性盒子在盒子宽度变小时 自动把汉字和多个英文单词换行 --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 解决方案 父级flex显示 子级添加 flex-shrink: 0 取消自动换行 (style.css文件 第60行) --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>分类<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>标签<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>其他<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>关于<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;icon&quot;</span> <span class="attr">id</span>=<span class="string">&quot;toggle&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;line line1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;line line2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;script.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- Dribbble link: https://dribbble.com/shots/2427219-Header-Navigation-Day-053-dailyui --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="stylecss"><a class="markdownIt-Anchor" href="#stylecss"></a> style.css</h3>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@import</span> url(<span class="string">&#x27;https://fonts.googleapis.com/css?family=Muli&amp;display=swap&#x27;</span>);</span><br><span class="line"></span><br><span class="line">* &#123;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#eafbff</span>;</span><br><span class="line">    <span class="comment">/* 设置渐变背景色 使页面为蓝白相间的格式 */</span></span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(</span><br><span class="line">        to bottom,</span><br><span class="line">        <span class="number">#eafbff</span> <span class="number">0%</span>,</span><br><span class="line">        <span class="number">#eafbff</span> <span class="number">50%</span>,</span><br><span class="line">        <span class="number">#5290f9</span> <span class="number">50%</span>,</span><br><span class="line">        <span class="number">#5290f9</span> <span class="number">100%</span></span><br><span class="line">    );</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">&#x27;Muli&#x27;</span>, sans-serif;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 缩小后的导航栏样式 */</span></span><br><span class="line"><span class="selector-tag">nav</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">80px</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">2px</span> <span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.3</span>);</span><br><span class="line">    <span class="comment">/* 宽度变化动画 线性变换(匀速) 0.6s完成 */</span></span><br><span class="line">    <span class="attribute">transition</span>: width <span class="number">0.6s</span> linear;</span><br><span class="line">    <span class="attribute">overflow-x</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 正常情况下 展开的导航栏样式 */</span></span><br><span class="line"><span class="selector-tag">nav</span><span class="selector-class">.active</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">350px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">nav</span> <span class="selector-tag">ul</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">list-style-type</span>: none;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">transition</span>: width <span class="number">0.6s</span> linear;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">nav</span><span class="selector-class">.active</span> <span class="selector-tag">ul</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">nav</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotateY</span>(<span class="number">0deg</span>);</span><br><span class="line">    <span class="attribute">flex-shrink</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">transition</span>: transform <span class="number">0.6s</span> linear, opacity <span class="number">0.6s</span> linear;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 正常情况下 导航栏每一项的样式 */</span></span><br><span class="line"><span class="selector-tag">nav</span><span class="selector-class">.active</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span> &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">    <span class="comment">/* 展开时 绕y轴旋转的过渡动画 */</span></span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotateY</span>(<span class="number">360deg</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">nav</span> <span class="selector-tag">ul</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="comment">/* display: inline-block; */</span></span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#000</span>;</span><br><span class="line">    <span class="attribute">text-decoration</span>: none;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.icon</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.icon</span><span class="selector-pseudo">:focus</span> &#123;</span><br><span class="line">    <span class="attribute">outline</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.icon</span> <span class="selector-class">.line</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#5290f9</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">2px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">transition</span>: transform <span class="number">0.6s</span> linear;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.icon</span> <span class="selector-class">.line2</span> &#123;</span><br><span class="line">    <span class="attribute">top</span>: auto;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 设置关闭 展开导航栏的样式切换动画 由 x 变成 = */</span></span><br><span class="line"><span class="selector-tag">nav</span><span class="selector-class">.active</span> <span class="selector-class">.icon</span> <span class="selector-class">.line1</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(-<span class="number">765deg</span>) <span class="built_in">translateY</span>(<span class="number">5.5px</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">nav</span><span class="selector-class">.active</span> <span class="selector-class">.icon</span> <span class="selector-class">.line2</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">765deg</span>) <span class="built_in">translateY</span>(-<span class="number">5.5px</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="scriptjs"><a class="markdownIt-Anchor" href="#scriptjs"></a> script.js</h3>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> toggle = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;toggle&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> nav = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;nav&#x27;</span>)</span><br><span class="line"></span><br><span class="line">toggle.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> nav.<span class="property">classList</span>.<span class="title function_">toggle</span>(<span class="string">&#x27;active&#x27;</span>))</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Web</category>
        <category>实现50个小功能</category>
      </categories>
      <tags>
        <tag>Web</tag>
        <tag>html</tag>
        <tag>css</tag>
        <tag>JavaScript</tag>
        <tag>js</tag>
        <tag>开源项目</tag>
        <tag>demo</tag>
      </tags>
  </entry>
  <entry>
    <title>【demo50】标题打字输入</title>
    <url>/posts/d15ab8cb.html</url>
    <content><![CDATA[<h2 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 📢前言</h2>
<p>代码取自开源项目<a href="https://github.com/bradtraversy/50projects50days">50projects50days</a>，用作个人学习和巩固三件套的知识，增加了注释，可能会有小改动。</p>
<p><a href="https://demo.kzmqvq.com/04/index.html">在线演示地址</a></p>
<h2 id="实现思路及效果"><a class="markdownIt-Anchor" href="#实现思路及效果"></a> 📝实现思路及效果</h2>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2022/09/02/oEL1DS5eK7Zj2aT.jpg" alt="20220902130959.jpg"/>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2022/09/02/ifNmdEIAaSTUbh7.jpg" alt="20220902131015.jpg">
<h2 id="代码"><a class="markdownIt-Anchor" href="#代码"></a> 💻代码</h2>
<h3 id="indexhtml"><a class="markdownIt-Anchor" href="#indexhtml"></a> index.html</h3>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;style.css&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>标题打字输入<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;shortcut icon&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../logo.svg&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 开始文字 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span> <span class="attr">id</span>=<span class="string">&quot;text&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 控制文字输入动画的速度 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;speed&quot;</span>&gt;</span>Speed:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 设置数字上下限 及 每次增加的大小(步长) --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;number&quot;</span> <span class="attr">name</span>=<span class="string">&quot;speed&quot;</span> <span class="attr">id</span>=<span class="string">&quot;speed&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span> <span class="attr">min</span>=<span class="string">&quot;1&quot;</span> <span class="attr">max</span>=<span class="string">&quot;10&quot;</span> <span class="attr">step</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;script.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="stylecss"><a class="markdownIt-Anchor" href="#stylecss"></a> style.css</h3>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@import</span> url(<span class="string">&#x27;https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&amp;display=swap&#x27;</span>);</span><br><span class="line"></span><br><span class="line">* &#123;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 設置背景色 设置body内的元素水平、垂直对齐 */</span></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: darksalmon;</span><br><span class="line">  <span class="attribute">font-family</span>: <span class="string">&#x27;Roboto&#x27;</span>, sans-serif;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">font-display</span>: column;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 设置显示控制速度 的盒子样式 */</span></span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="comment">/* 背景类似蒙版遮罩 */</span></span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>);</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">18</span>x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 设置速度输入框的样式 */</span></span><br><span class="line"><span class="selector-tag">input</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">background-color</span>: darksalmon;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">input</span><span class="selector-pseudo">:focus</span> &#123;</span><br><span class="line">  <span class="attribute">outline</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="scriptjs"><a class="markdownIt-Anchor" href="#scriptjs"></a> script.js</h3>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> textEl = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;text&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> speedEl = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;speed&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> text = <span class="string">&quot;原来你也玩原神！&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> idx = <span class="number">1</span>;</span><br><span class="line"><span class="comment">// 控制速度</span></span><br><span class="line"><span class="keyword">let</span> speed = <span class="number">300</span> / speedEl.<span class="property">value</span>;</span><br><span class="line"></span><br><span class="line"><span class="title function_">writeText</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">writeText</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 将标题文字切片 每次显示的长度增加1</span></span><br><span class="line">  textEl.<span class="property">innerText</span> = text.<span class="title function_">slice</span>(<span class="number">0</span>, idx);</span><br><span class="line"></span><br><span class="line">  idx++;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 当写入text的索引值 大于 text的长度时 初始化idx为1</span></span><br><span class="line">  <span class="keyword">if</span> (idx &gt; text.<span class="property">length</span>) &#123;</span><br><span class="line">    idx = <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">setTimeout</span>(writeText, speed);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">speedEl.<span class="title function_">addEventListener</span>(<span class="string">&quot;input&quot;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">  speed = <span class="number">300</span> / e.<span class="property">target</span>.<span class="property">value</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Web</category>
        <category>实现50个小功能</category>
      </categories>
      <tags>
        <tag>Web</tag>
        <tag>html</tag>
        <tag>css</tag>
        <tag>JavaScript</tag>
        <tag>js</tag>
        <tag>开源项目</tag>
        <tag>demo</tag>
      </tags>
  </entry>
  <entry>
    <title>【客说闲谈】别拿高中的心态读大学</title>
    <url>/posts/9bc3c82c.html</url>
    <content><![CDATA[<h2 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言</h2>
<p>本篇博客内容来源于<a href="https://www.bilibili.com/video/BV1Qf4y1o7qB">B站视频-up主耐心的钠珀学长</a>，部分内容结合博主个人经历：</p>
<p>高中和大学最显著的三大区别。我一个个和你讲清楚。我回想一下，如果是我刚高考完，甚至到大二，我可能都看不懂这个视频，因为真的有点超越我当时的认知水平。但是回过头来看，如果说我不在大学里面被打肿，不迷茫个一年半载，🤡我根本不可能想通这些问题。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2022/07/13/oGZzMhUqgF3rHC6.jpg" alt="沉船" /></p>
<h2 id="公平与对错"><a class="markdownIt-Anchor" href="#公平与对错"></a> 公平与对错</h2>
<p>高中分对错，讲公平；大学没有对错，别讲公平。</p>
<p>中学时，同学之间告状的对象是老师，内容无非是：谁抄了谁谁谁的作业；老师谁谁上课总说话，都是这些破事。但是上了大学之后，我才知道：原来大部分的人都在抄，从小测到作业、上机，甚至是考试；大家上课也没有认真听讲，<strong>基本都在睡觉、玩手机</strong>。原来励志奖学金也有很大一部分都设置给了<strong>家境本来就很好</strong>的同学。</p>
<p>当我们还在讲对错，讲公平的时候，别人的各种骚操作直接把我们秀翻了呀。当我们会意识到这一点的时候，心态可能就直接崩了。举个例子，大家请跟我思路听一下是不是这个道理：如果说你在玩一场必须要玩下去的游戏，开局了大概一会儿之后，你发现这个游戏百分之三十的玩家都在开挂，他们一开局血量都是满，金币都是无限的，装备都是从父母那边继承管的。</p>
<mark class="hl-label red">那这种情况你最佳的选择是 直接他妈的不玩了吗？</mark>  完全不是！给你三个词告诉你该怎么做。这三个词分别是<mark class="hl-label purple">自私、自省以及自强</mark>  。在大学里面想要进一步提升自己。首先我们必须要做一个自私的人，别人再怎么样走捷径，再如何如何的骚操作，都与你无关！<mark class="hl-label green">少去管别人的闲事，多去思考自己到底应该走哪样一条路而进步。</mark> 最最关键就在于我们要去怎么做自己，最终实现自强。
<h2 id="身体与心理"><a class="markdownIt-Anchor" href="#身体与心理"></a> 身体与心理</h2>
<p>高中的时候，身体在坐牢，心灵是自由的。在大学里我们身体是自由的，但是我们的思想已经被禁锢了。</p>
<p>在高中，就算我从早上六点到晚上十点都在上课，但是有很长一段时间，我的思维都是活跃的。我的脑海中会有各种各样天马行空的想法。那个时候对未来充满各种各样的憧憬。高考前，经常考四百分水平的时候，同学们再怎么想也要冲一个五百分；<strong>可能那些考六百分的同学甚至都想冲一冲清北</strong>。</p>
<p>上大学之后呢，机会遍地都是。虽然我每天看似都在做着一些丰富多彩的事情，但是我的思想越来越束缚。有一个非常宝贵的比赛机会到来。我想一想，哎，时间不太够还是不去了吧；或者说上课的时候有一些很好的跟老师沟通的机会，但是我想了一下，还是决定继续玩手机，刷短视频。最关键的事情其实就是思想的解放。<code>而思想的解放，它的解法根本不在宿舍里，不在短视频里，也不在游戏里。应当是在和各种各样优秀的前辈老师、教授去交流，应该在于去图书馆看各种各样的书籍，然后从书籍中寻找灵感，提炼思路</code>。就算你没有上大学，各种各样子的演讲，各种各样的清北、哈佛、耶鲁的公开课都是触手可及的，只不过绝大多数人都不会去看。因为他觉得看这个课程还不如玩一个小时王者荣耀或者看两个小时短视频。</p>
<h2 id="有关答题和选卷子"><a class="markdownIt-Anchor" href="#有关答题和选卷子"></a> 有关答题和选卷子</h2>
<p>在高中里面我们没得选🙌，因为全国统一都是高考，但是进了大学之后，绝大多数人都还是在答题。</p>
<p>给大家一个适合绝大多数人的解法。如果你发现你的大学很差，专业也不对头，赶紧思考怎么办？不要等到毕业一两年之后，在社会上漂泊着，被吊打去迷茫。转行之所以难，是因为你没有做好充足的准备，哪怕你学的是历史专业，是考古专业，是文物保护专业。在大学四年，你能不能报一些技能型的培训班，你能不能去考一下对应的证书下来，你能不能努力的靠自己去申请到大公司也好，小公司也好的对口的实习机会。如果说你四年都用来做这些努力，毕业之后转行是很自然的事情。</p>
<mark class="hl-label blue">专业不好，永远不是你不进取不努力的理由和借口。</mark> 我以上讲的三点，注定很少有人能够感同身受或者听懂，但是我也要讲，因为我希望它有朝一日可以帮到值得我帮助的人。
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2022/05/25/erTYAV4EwqZ62nx.jpg" alt="星空" /></p>
]]></content>
      <categories>
        <category>客说闲谈</category>
      </categories>
      <tags>
        <tag>客说闲谈</tag>
        <tag>大学</tag>
        <tag>心态</tag>
      </tags>
  </entry>
  <entry>
    <title>【客说闲谈】学历对打工人的意义</title>
    <url>/posts/1b531470.html</url>
    <content><![CDATA[<h2 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言</h2>
<p>本篇博客内容来源于b站视频——<a href="https://www.bilibili.com/video/BV1GM411a7D2">“学历对打工人的意义？这是我听过最通透的答案”</a>，up主–<a href="https://space.bilibili.com/346749212">wrizedm</a>。希望能对即将毕业的大学生一些启迪。谁的青春不迷茫，纵使身后没有灯火，身前白雾茫茫，也要做自己的 太阳！</p>
<h2 id="视频链接"><a class="markdownIt-Anchor" href="#视频链接"></a> 视频链接</h2>
<div align=center class="aspect-ratio">
    <iframe src="https://player.bilibili.com/player.html?aid=522271124&&page=1&as_wide=1&high_quality=1&danmaku=0&autoplay=false" 
    scrolling="no" 
    border="0" 
    frameborder="no" 
    framespacing="0" 
    high_quality=1
    danmaku=1 
    allowfullscreen="true"> 
    </iframe>
</div>
<h2 id="内容"><a class="markdownIt-Anchor" href="#内容"></a> 内容</h2>
<div class="note success flat"><p>学历相当于敲门砖，可能有时候学历并不重要，但是大多时候，学历挺重要的。好的生活是奋斗来的，人在有学历后还是要不断上进的！</p>
</div>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/02/09/ipnFf4CORBqUsM3.jpg" alt="1" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/02/09/ij9qabrhQD48yNP.jpg" alt="2" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/02/09/9Ver5gQ2F6vR3BL.jpg" alt="3" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/02/09/GDHXfy82vI1Yndw.jpg" alt="4" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/02/09/xGRS6LjhUCaZiN1.png" alt="5" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/02/09/g9rXe68THuADPkM.jpg" alt="6" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/02/09/ekpy5XG6TQIRuio.jpg" alt="7" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/02/09/XPa3SToxwuFyizm.jpg" alt="9" /></p>
<div class="note info flat"><p>从来没有天道酬勤，只有更努力更幸运！🌈</p>
</div>
]]></content>
      <categories>
        <category>客说闲谈</category>
      </categories>
      <tags>
        <tag>客说闲谈</tag>
        <tag>学历</tag>
        <tag>打工人</tag>
        <tag>客怎眠qvq</tag>
      </tags>
  </entry>
  <entry>
    <title>【客说闲谈】川普给美国年轻人的建议：不畏流言，勇敢逐梦</title>
    <url>/posts/9d6fbd99.html</url>
    <content><![CDATA[<h2 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言</h2>
<p>本篇博客内容来源于b站视频——<a href="https://www.bilibili.com/video/BV14e411c7SN">川普给美国年轻人的建议：从菜鸟开始, 不惧犯错，不畏流言，勇敢去追逐自己热爱的事情！</a>，抛开政治不谈，感觉说的很有道理，于是结合个人理解把翻译搬运了过来。愿各位不负韶华，饱含一腔热忱，永远年轻，永远热泪盈眶。</p>
<h2 id="视频链接"><a class="markdownIt-Anchor" href="#视频链接"></a> 视频链接</h2>
<div align=center class="aspect-ratio">
    <iframe src="https://player.bilibili.com/player.html?aid=264080926&&page=1&as_wide=1&high_quality=1&danmaku=0&autoplay=false" 
    scrolling="no" 
    border="0" 
    frameborder="no" 
    framespacing="0" 
    high_quality=1
    danmaku=1 
    allowfullscreen="true"> 
    </iframe>
</div>
## 内容
<blockquote>
<p>Relish the opportunity to be an outsider.<br />
珍惜做“门外汉”的机会</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/01/31/7BeEKp9fW4Ia1rD.jpg" alt="20230131182513" /></p>
<blockquote>
<p>Embrace that label.<br />
拥抱这个标签</p>
</blockquote>
<blockquote>
<p>Being an outsider is fine, embrace the label.<br />
是个“门外汉”没关系, 拥抱这个标签(享受这个标签)</p>
</blockquote>
<blockquote>
<p>Because it’s the outsiders who change the world and who make a real and lasting difference<br />
因为是“门外汉们”改变了世界，给世界带来了真正且持续的改变</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/01/31/7dPaEhLUxcMso1f.jpg" alt="20230131182904" /></p>
<blockquote>
<p>And always have the courage to be yourself<br />
同时 要一直持有做自己的那份勇气</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/01/31/Sn5cPz3WBj1qb2r.jpg" alt="20230131183415" /></p>
<blockquote>
<p>Most importantly，you have to do what you love<br />
最重要的一点是, 一定要做你热爱的事</p>
</blockquote>
<blockquote>
<p>I have seen so many people<br />
我见过很多的人</p>
</blockquote>
<blockquote>
<p>They’re forced through lots of reasons<br />
他们被各种原因裹挟着</p>
</blockquote>
<blockquote>
<p>sometimes including family<br />
有时还包括家庭的裹挟</p>
</blockquote>
<blockquote>
<p>to go down a path that they don’t want to go down<br />
去走一条他们自己不想走的路</p>
</blockquote>
<blockquote>
<p>To go down a path that leads them to something that they don’t love<br />
去走一条把他们引向了自己并不热爱的东西的路</p>
</blockquote>
<blockquote>
<p>that they don’t enjoy<br />
他们并不觉得开心</p>
</blockquote>
<blockquote>
<p>You have to do what you love<br />
你一定要做自己热爱的事情</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/01/31/MhlIa587qYbfOVs.jpg" alt="20230131184755" /></p>
<blockquote>
<p>Or you most likely won’t be very successful at it<br />
否则你很可能 不会有什么出息</p>
</blockquote>
<blockquote>
<p>Never stop fighting for what you believe in and for the people who care about you<br />
为了你的信仰和那些关心你的人，永不停歇地去奋斗（十年饮冰，热血难凉）</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/01/31/OGUAMJIXlmP8xCv.jpg" alt="20230131183552" /></p>
<blockquote>
<p>Carry yourself with dignity and pride<br />
保持自己的尊严和骄傲（我有我的自尊和我的骄傲）</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/01/31/SP5siG1EpmHk8RN.jpg" alt="20230131183654" /></p>
<blockquote>
<p>Remember this.<br />
记住这点</p>
</blockquote>
<blockquote>
<p>Nothing worth doing ever, ever, ever came easy<br />
任何值得做的事情，从来不会轻易实现</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/01/31/hUgx3sKaYPMSifn.jpg" alt="20230131184017" /></p>
<blockquote>
<p>Following your convictions means you must be willing to face criticism for those who lack the same courage to do what is right<br />
追随你的信念 这意味着你必须直面 那些没有相同勇气做正确事情的人们对你的批评</p>
</blockquote>
<blockquote>
<p>and they know what is right<br />
而且他们明明知道 什么是正确的</p>
</blockquote>
<div class="note danger flat"><p>But they don’t have the courage or the guts or the stamina to take it and to do it<br />
但是他们没有勇气 没有胆量 也没有毅力 去承担做正确事情的风险和责任</p>
</div>
<div class="note success flat"><p>It’s called The Road Less Traveled.<br />
你要入那窄门去，走那人迹罕至之路，因为真正的伟大总是鲜有人及  ——《圣经》</p>
</div>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/01/31/ZAGDb2IPn3TKf15.jpg" alt="20230131184110" /></p>
]]></content>
      <categories>
        <category>客说闲谈</category>
      </categories>
      <tags>
        <tag>客说闲谈</tag>
      </tags>
  </entry>
  <entry>
    <title>【随手记】微信小程序入坑指南</title>
    <url>/posts/4adda35c.html</url>
    <content><![CDATA[<h2 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言</h2>
<p>本篇文章记录了学习微信小程序时遇到的一些问题和知识点，学习材料是<a href="https://github.com/coderwhy">coderwhy</a>老师的视频。</p>
<h2 id="本地开发环境设定与修改"><a class="markdownIt-Anchor" href="#本地开发环境设定与修改"></a> 本地开发环境设定与修改</h2>
<p>微信开发者工具将个人对工具做的所有配置都写入到了<code>project.config.json</code>文件中，当更换电脑或重装时，只需要载入同一个项目的代码包，开发者工具就自动会帮开发者恢复到当时开发项目时的个性化配置，其中会包括编辑器的颜色、代码上传时自动压缩等等一系列选项。</p>
<p>需要注意<code>project.config.json</code> 和 <code>project.private.config.json</code>两个文件的区别，<code>private</code>是个人的配置且优先级更高，以下来源于微信开发文档：</p>
<ol>
<li>项目根目录中的 <code>project.config.json</code> 和 <code>project.private.config.json</code> 文件可以对项目进行配置，</li>
<li><code>project.private.config.json</code> 中的相同设置优先级高于 <code>project.config.json</code></li>
<li>可以在 <code>project.config.json</code> 文件中配置公共的配置，在 <code>project.private.config.json</code> 配置个人的配置，可以将 <code>project.private.config.json</code> 写到 <code>.gitignore</code> 避免版本管理的冲突。</li>
<li><code>project.private.config.json</code> 中有的字段，开发者工具内的设置修改会优先覆盖 <code>project.private.config.json</code> 的内容。如在 <code>project.private.config.json</code> 有 <code>appid</code> 字段，那么在 详情 - 基本信息 中修改了 appid，会写到 <code>project.private.config.json</code> 中，不会覆盖掉 <code>project.config.json</code> 的 <code>appid</code> 字段的内容</li>
<li>开发阶段相关的设置修改优先同步到 <code>project.private.config.json</code> 中，但与最终编译产物有关的设置无法在 <code>project.private.config.json</code> 中生效，界面上的改动也不会同步到 <code>project.private.config.json</code> 文件中。详见 <a href="https://developers.weixin.qq.com/miniprogram/dev/devtools/projectconfig.html#setting">表格</a>是否允许私有设置。</li>
</ol>
<p>当需要更换版本、修改本地调试的设置时，打开开发工具右上角的详情，修改本地设置即可。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/02/23/ZgnCk8Aac71LdFz.png" alt="01-本地config配置" /></p>
<h2 id="页面下拉刷新与上拉加载"><a class="markdownIt-Anchor" href="#页面下拉刷新与上拉加载"></a> 页面下拉刷新与上拉加载</h2>
<p>针对单个页面（page）实现下拉刷新和上拉加载，需要用到<code>onPullDownRefresh</code>和<code>onReachBottom</code>两个函数，对需要实现的页面配置<code>page.js</code>，样例代码如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// pages/profile/profile.js</span></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">avatarURL</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="attr">listCount</span>: <span class="number">30</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 这里针对的是展示数据较多的页面，初始刷新，下拉onPullDownRefresh返回30条数据</span></span><br><span class="line">  <span class="comment">// 当用户浏览至底部后，触发onReachBottom返回额外的30条数据</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 监听下拉刷新</span></span><br><span class="line">  <span class="title function_">onPullDownRefresh</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;用户进行下拉刷新~&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 模拟网络请求: 定时器</span></span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123; <span class="attr">listCount</span>: <span class="number">30</span> &#125;)</span><br><span class="line"></span><br><span class="line">      <span class="comment">// API: 停止下拉刷新</span></span><br><span class="line">      wx.<span class="title function_">stopPullDownRefresh</span>(&#123;</span><br><span class="line">        <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;成功停止了下拉刷新&quot;</span>, res);</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">fail</span>: <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;失败停止了下拉刷新&quot;</span>, err);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 监听页面滚动到底部</span></span><br><span class="line">  <span class="title function_">onReachBottom</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;onReachBottom&quot;</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">listCount</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">listCount</span> + <span class="number">30</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;list&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">block</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;listCount&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;*this&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span>列表数据:&#123;&#123; item &#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">block</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/02/24/OShp1f3XH5aGAu9.png" alt="02-下拉刷新" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/02/24/QhAEwsizdZqOB87.png" alt="03-下拉刷新" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/02/24/4xMP51XO9EWds6q.png" alt="04-上拉刷新" /></p>
<h2 id="小程序进入场景场景值"><a class="markdownIt-Anchor" href="#小程序进入场景场景值"></a> 小程序进入场景（场景值）</h2>
<p>场景值用来描述用户进入小程序的路径。通俗地说，就是你从哪找到这个小程序的，小程序可以获取到这个值，针对不同的业务场景（场景值），进行相应的处理，以实现更为细致的业务逻辑。相关操作在项目根目录下的<code>app.js</code>中进行，使用<code>onLaunch、onShow</code>函数或者<code>wx.getLaunchOptionSync</code>获取。</p>
<p>个人感觉就像是两个不认识的人——用户A、小程序C，他们都认识小程序B，有一天用户A收到小程序B的推荐认识了小程序C，小程序C为了和用户A相处的更加自然，从小程序B处获取用户A的相关信息。</p>
<h2 id="全局共享数据"><a class="markdownIt-Anchor" href="#全局共享数据"></a> 全局共享数据</h2>
<p>通过配置根目录的<code>app.js</code>设置全局的数据<code>globalData</code>，在页面中使用<code>getApp()</code>获取</p>
<div class="note info flat"><p>数据不是响应式，共享的数据通常是一些固定的数据</p>
</div>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// pages/order/order.js</span></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">userInfo</span>: &#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="title function_">onLoad</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 获取共享的数据: App实例中数据</span></span><br><span class="line">    <span class="comment">// 1.获取app实例对象</span></span><br><span class="line">    <span class="keyword">const</span> app = <span class="title function_">getApp</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2.从app实例对象获取数据</span></span><br><span class="line">    <span class="keyword">const</span> token = app.<span class="property">globalData</span>.<span class="property">token</span></span><br><span class="line">    <span class="keyword">const</span> userInfo = app.<span class="property">globalData</span>.<span class="property">userInfo</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(token, userInfo);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3.拿到token目的发送网络请求</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 4.将数据展示到界面上面</span></span><br><span class="line">    <span class="comment">// this.data.userInfo = userInfo</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123; userInfo &#125;)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">userInfo</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="登录基本逻辑appjs"><a class="markdownIt-Anchor" href="#登录基本逻辑appjs"></a> 登录基本逻辑（app.js）</h2>
<p><code>App</code>框架接口示例代码，由于登录过程比较复杂，这里只做简单说明。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">App</span>(&#123;</span><br><span class="line">  <span class="attr">globalData</span>: &#123;</span><br><span class="line">    <span class="attr">token</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="attr">userInfo</span>: &#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  onLaunch (options) &#123;</span><br><span class="line">    <span class="comment">// Do something initial when launch.</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 0.从本地获取token/userInfo</span></span><br><span class="line">    <span class="keyword">const</span> token = wx.<span class="title function_">getStorageSync</span>(<span class="string">&quot;token&quot;</span>)</span><br><span class="line">    <span class="keyword">const</span> userInfo = wx.<span class="title function_">getStorageSync</span>(<span class="string">&quot;userInfo&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1.进行登录操作(判断逻辑)</span></span><br><span class="line">    <span class="keyword">if</span> (!token || !userInfo) &#123;</span><br><span class="line">      <span class="comment">// 将登录成功的数据, 保存到storage</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;登录操作&quot;</span>);</span><br><span class="line">      wx.<span class="title function_">setStorageSync</span>(<span class="string">&quot;token&quot;</span>, <span class="string">&quot;kobetoken&quot;</span>)</span><br><span class="line">      wx.<span class="title function_">setStorageSync</span>(<span class="string">&quot;userInfo&quot;</span>, &#123; <span class="attr">nickname</span>: <span class="string">&quot;kobe&quot;</span>, <span class="attr">level</span>: <span class="number">100</span> &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2.将获取到数据保存到globalData中</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">globalData</span>.<span class="property">token</span> = token</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">globalData</span>.<span class="property">userInfo</span> = userInfo</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3.发送网络请求, 优先请求一些必要的数据</span></span><br><span class="line">    <span class="comment">// wx.request(&#123; url: &#x27;url&#x27;&#125;)</span></span><br><span class="line">  &#125;,</span><br><span class="line">  onShow (options) &#123;</span><br><span class="line">    <span class="comment">// Do something when show.</span></span><br><span class="line">  &#125;,</span><br><span class="line">  onHide () &#123;</span><br><span class="line">    <span class="comment">// Do something when hide.</span></span><br><span class="line">  &#125;,</span><br><span class="line">  onError (msg) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(msg)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="按钮跳转处理逻辑"><a class="markdownIt-Anchor" href="#按钮跳转处理逻辑"></a> 按钮跳转处理逻辑</h2>
<p>在首页使用<code>wx:for=&quot;&#123;&#123;pages&#125;&#125;&quot;</code>的方式将各个子页面的跳转以按钮的形式呈现出来，方便查看各知识点。</p>
<div class="note info flat"><p><code>data-xx</code>的使用，后续的传参必须是存在的、可使用的值，<code>xx</code>是个人自定义的名字。</p>
</div>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- home首页 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;pages&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">block</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;pages&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;name&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- item是index.js中已定义的值，data-item是个人自定义的名字，data-name、data-id都可以 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span></span></span><br><span class="line"><span class="tag">      <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> </span></span><br><span class="line"><span class="tag">      <span class="attr">bindtap</span>=<span class="string">&quot;onBtnClick&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">data-item</span>=<span class="string">&quot;&#123;&#123;item&#125;&#125;&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">      &#123;&#123; item.name &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">block</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="comment">// path中的 02 是一条错误示范</span></span><br><span class="line">    <span class="attr">pages</span>: [</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">&quot;01_初体验&quot;</span>, <span class="attr">path</span>: <span class="string">&quot;/pages/01test/index&quot;</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">&quot;02_页面配置&quot;</span>, <span class="attr">path</span>: <span class="string">&quot;pages/02_页面配置/index&quot;</span> &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">onBtnClick</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="comment">// 1.获取item</span></span><br><span class="line">    <span class="keyword">const</span> item = event.<span class="property">target</span>.<span class="property">dataset</span>.<span class="property">item</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2.跳转路径</span></span><br><span class="line">    wx.<span class="title function_">navigateTo</span>(&#123;</span><br><span class="line">      <span class="attr">url</span>: item.<span class="property">path</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<div class="note danger flat"><p><code>path</code>中不能使用中文，不能使用中文，不能使用中文！以<code>/</code>开头指明路径从根目录开始！</p>
</div>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/02/24/NH1nRXcoOIZgVUd.png" alt="05-path规范" /></p>
<div class="tag link"><a class="link-card" title="微信小程序data-xx的使用" href="https://blog.csdn.net/qq_33210042/article/details/91983464"><div class="left"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/link.png"/></div><div class="right"><p class="text">微信小程序data-xx的使用</p><p class="url">https://blog.csdn.net/qq_33210042/article/details/91983464</p></div></a></div> 
<h2 id="注册加载页面page"><a class="markdownIt-Anchor" href="#注册加载页面page"></a> 注册加载页面（page）</h2>
<blockquote>
<p>不要把开发工具固定在任务栏，会造成启动调试器不成功</p>
</blockquote>
<p>单个页面（page）的<code>js</code>文件用于发送网络请求、获取数据、同时定义本地固定的数据、绑定页面产生事件的回调函数和刷新滚动操作。<code>onLoad</code>函数在页面加载时发送请求。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">banners</span>: [],</span><br><span class="line">    <span class="attr">recommends</span>: [],</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2.作用二: 定义本地固定的数据</span></span><br><span class="line">    <span class="attr">counter</span>: <span class="number">100</span>,</span><br><span class="line"></span><br><span class="line">    <span class="attr">btns</span>: [<span class="string">&quot;red&quot;</span>, <span class="string">&quot;blue&quot;</span>, <span class="string">&quot;green&quot;</span>, <span class="string">&quot;orange&quot;</span>]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 1.作用一: 发送网络请求, 请求数据</span></span><br><span class="line">  <span class="title function_">onLoad</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;onLoad&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 发送网络请求</span></span><br><span class="line">    wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">      <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> data = res.<span class="property">data</span>.<span class="property">data</span></span><br><span class="line">        <span class="keyword">const</span> banners = data.<span class="property">banner</span>.<span class="property">list</span></span><br><span class="line">        <span class="keyword">const</span> recommends = data.<span class="property">recommend</span>.<span class="property">list</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123; banners, recommends &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 3.绑定wxml中产生事件后的回调函数</span></span><br><span class="line">  <span class="title function_">onBtn1Click</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;onBtn1Click&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">onBtnClick</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;btn click:&quot;</span>, event.<span class="property">target</span>.<span class="property">dataset</span>.<span class="property">color</span>);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 4.绑定下拉刷新/达到底部/页面滚动</span></span><br><span class="line">  <span class="title function_">onPullDownRefresh</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;onPullDownRefresh&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">onReachBottom</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;onReachBottom&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">onPageScroll</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;onPageScroll:&quot;</span>, event);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 生命周期函数: </span></span><br><span class="line">  <span class="title function_">onShow</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;onShow&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">onReady</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;onReady&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">onHide</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;onHide&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">onUnload</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;onUnload&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/02/24/mykKIF4baBdlw2x.png" alt="06-轮播图" /></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;banner&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">swiper</span> <span class="attr">circular</span> <span class="attr">autoplay</span> <span class="attr">indicator-dots</span>=<span class="string">&quot;&#123;&#123;true&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">block</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;banners&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;acm&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">swiper-item</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- image组件默认宽度和高度: 320x240 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">image</span> <span class="attr">mode</span>=<span class="string">&quot;widthFix&quot;</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;item.image&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">block</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">swiper</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="常用组件"><a class="markdownIt-Anchor" href="#常用组件"></a> 常用组件</h2>
<h3 id="text"><a class="markdownIt-Anchor" href="#text"></a> text</h3>
<p>文本组件。其中的<code>user-select</code>参数控制文本是否可选；<code>decode</code>参数控制是否解码，如表示空格的<code>&amp;nbsp</code>、<code>&amp;ensp</code>、<code>&amp;emsp</code>；<code>selectable</code>参数控制可选的方案现已废弃。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">text</span>&gt;</span>Hello World<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span> <span class="attr">user-select</span>&gt;</span>&#123;&#123; message &#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span> <span class="attr">user-select</span>=<span class="string">&quot;&#123;&#123;true&#125;&#125;&quot;</span>&gt;</span>&#123;&#123; message &#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span> <span class="attr">decode</span>&gt;</span><span class="symbol">&amp;gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/02/27/Id3lyCTBeMFrPa1.png" alt="08-text组件" /></p>
<h3 id="button"><a class="markdownIt-Anchor" href="#button"></a> button</h3>
<p>与<code>element</code>组件类似，提供了各种参数控制按钮的样式和功能。其中<code>type</code>参数控制按钮的样式，<code>size</code>参数控制按钮的大小，在开发过程中会经常性地使用<code>open-type</code>参数，满足信息获取的需求。这里需要掌握<code>getUserInfo</code>的处理方式。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 获取用户信息 1 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 从 bindgetuserinfo 回调中获取到用户信息 open-type=&quot;getUserInfo&quot;时有效 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> </span></span><br><span class="line"><span class="tag">  <span class="attr">open-type</span>=<span class="string">&quot;getUserInfo&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">bindgetuserinfo</span>=<span class="string">&quot;getUserInfo&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> </span></span><br><span class="line"><span class="tag">  <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">  用户信息1</span><br><span class="line"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 获取用户信息 2 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 在组件中绑定一个事件处理函数 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;getUserInfo&quot;</span>&gt;</span>用户信息2<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;&#125;,</span><br><span class="line">  <span class="title function_">getUserInfo</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="comment">// 调用API, 获取用户的信息</span></span><br><span class="line">    <span class="comment">// 1.早期小程序的API, 基本都是不支持Promise风格</span></span><br><span class="line">    <span class="comment">// 2.后期小程序的API, 基本都开发支持Promise风格</span></span><br><span class="line">    wx.<span class="title function_">getUserProfile</span>(&#123;</span><br><span class="line">      <span class="attr">desc</span>: <span class="string">&#x27;desc&#x27;</span>,</span><br><span class="line">      <span class="comment">// success: (res) =&gt; &#123;</span></span><br><span class="line">      <span class="comment">//   console.log(res);</span></span><br><span class="line">      <span class="comment">// &#125;</span></span><br><span class="line">    &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<div class="note info flat"><p><code>wx.getUserInfo</code>接口已被回收，换成<code>wx.getUserProfile</code>获取用户个人信息。</p>
</div>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/02/27/gh6jI7LwidRqo8Z.png" alt="11-getUserInfo接口失效" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/02/27/jgzeJpq2vGrBkYP.png" alt="12-getUserInfo" /></p>
<h3 id="view"><a class="markdownIt-Anchor" href="#view"></a> view</h3>
<p>较为简单，同样可以绑定点击事件。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">bindtap</span>=<span class="string">&quot;onViewClick&quot;</span> <span class="attr">hover-class</span>=<span class="string">&quot;active&quot;</span>&gt;</span>我是view组件<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  ...,</span><br><span class="line">  <span class="title function_">onViewClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;onViewClick&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  ...</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="image"><a class="markdownIt-Anchor" href="#image"></a> image</h3>
<p><code>mode</code>作为参数控制，图片裁剪、缩放的模式。常用的有：<code>scaleToFill</code>无脑拉伸图片使其铺满元素；<code>aspectFit</code>保持纵横比例缩放图片，较为完整；<code>widthFix</code>宽度不变，高度按原图宽高比自动变化，推荐。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;https://vip2.loli.io/2023/01/25/AxZqRfM1h4TjG2B.png&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFit&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;https://vip2.loli.io/2023/01/25/AxZqRfM1h4TjG2B.png&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;widthFix&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;https://vip2.loli.io/2023/01/25/AxZqRfM1h4TjG2B.png&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;heightFix&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>图片可以和按钮结合，将用户本地的图片展示出来</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">bindtap</span>=<span class="string">&quot;onChooseImage&quot;</span>&gt;</span>选择图片<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">&quot;img&quot;</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;chooseImageUrl&#125;&#125;&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;widthFix&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// pages/02_common_cpns/index.js</span></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">chooseImageUrl</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  ...,</span><br><span class="line">  <span class="title function_">onChooseImage</span>(<span class="params"></span>) &#123;</span><br><span class="line">    wx.<span class="title function_">chooseMedia</span>(&#123;</span><br><span class="line">      <span class="attr">mediaType</span>: <span class="string">&quot;image&quot;</span></span><br><span class="line">    &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> imagePath = res.<span class="property">tempFiles</span>[<span class="number">0</span>].<span class="property">tempFilePath</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123; <span class="attr">chooseImageUrl</span>: imagePath &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  ...</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="scroll-view"><a class="markdownIt-Anchor" href="#scroll-view"></a> scroll-view</h3>
<p>视图容器，规定某个固定高度或宽度的盒子，是通过左右滑动的方式查看内容还是通过上下滑动的方式查看内容。需要注意在对应的<code>wxss</code>文件规定<code>flex</code></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 上下滚动(y轴) --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scroll-view</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span> <span class="attr">scroll-y</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">block</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;viewColors&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;*this&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background: &#123;&#123;item&#125;&#125;;&quot;</span>&gt;</span>&#123;&#123;item&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">block</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">scroll-view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 左右滚动(x轴) 允许元素flex 实现多个view在一行 左右滑动查看--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scroll-view</span> </span></span><br><span class="line"><span class="tag">  <span class="attr">class</span>=<span class="string">&quot;container scroll-x&quot;</span> </span></span><br><span class="line"><span class="tag">  <span class="attr">scroll-x</span></span></span><br><span class="line"><span class="tag">  <span class="attr">enable-flex</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">block</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;viewColors&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;*this&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background: &#123;&#123;item&#125;&#125;;&quot;</span>&gt;</span>&#123;&#123;item&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">block</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">scroll-view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 监听事件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scroll-view</span> </span></span><br><span class="line"><span class="tag">  <span class="attr">class</span>=<span class="string">&quot;container scroll-x&quot;</span> </span></span><br><span class="line"><span class="tag">  <span class="attr">scroll-x</span></span></span><br><span class="line"><span class="tag">  <span class="attr">enable-flex</span></span></span><br><span class="line"><span class="tag">  <span class="attr">bindscrolltoupper</span>=<span class="string">&quot;onScrollToUpper&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">bindscrolltolower</span>=<span class="string">&quot;onScrollToLower&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">bindscroll</span>=<span class="string">&quot;onScroll&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">block</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;viewColors&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;*this&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background: &#123;&#123;item&#125;&#125;;&quot;</span>&gt;</span>&#123;&#123;item&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">block</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">scroll-view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/03/02/NZvgxYaf4UVKwLS.png" alt="15-scroll-view滚动" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/03/02/ulUweG65MWJcfYX.png" alt="16-scroll-view监听事件" /></p>
<h3 id="input"><a class="markdownIt-Anchor" href="#input"></a> input</h3>
<p>注意和vue的<code>v-bind</code>双向绑定的区别。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">model:value</span>=<span class="string">&quot;&#123;&#123;message&#125;&#125;&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">message</span>: <span class="string">&quot;Hello, World&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/03/05/Yw4rCSJZ5vapOsm.png" alt="17-input组件" /></p>
<h2 id="页面样式"><a class="markdownIt-Anchor" href="#页面样式"></a> 页面样式</h2>
<p>微信小程序的界面样式写法有三种：行内样式、页面样式、全局样式。优先级依次是 行内样式 &gt; 页面样式 &gt; 全局样式。这些都和<code>css</code>类似，不再赘述。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/03/05/h75qtWgNUme8rTM.png" alt="19-wxss支持的选择器" /></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 1.1.应用全局样式 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 在项目根目录下的 app.wxss 文件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>learn wxss title<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 1.2.页面中的样式 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;message&quot;</span>&gt;</span>learn wxss message<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 1.3.行内的样式 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">style</span>=<span class="string">&quot;color: blue;&quot;</span>&gt;</span>inline style<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 单个页面的 index.wxss */</span></span><br><span class="line"><span class="selector-class">.message</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: green;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 根目录 app.wxss */</span></span><br><span class="line"><span class="selector-class">.title</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">700</span>;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>需要注意的是小程序的页面尺寸单位<code>rpx</code>（区别于<code>css</code>的<code>rem</code>）。为了页面根据屏幕宽度进行自适应，规定屏幕宽为 750rpx，如在 iPhone6 上，屏幕宽度为 375 px，共有750个物理像素，则 750 rpx  =  375 px  = 750 物理像素，1rpx = 0.5px = 1物理像素。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/03/05/PA76k9eucblKOGL.png" alt="18-页面样式尺寸单位" /></p>
]]></content>
      <categories>
        <category>Web</category>
        <category>微信小程序</category>
      </categories>
      <tags>
        <tag>微信小程序</tag>
      </tags>
  </entry>
  <entry>
    <title>【随手记】ChatGPT提示词指南</title>
    <url>/posts/66c40c65.html</url>
    <content><![CDATA[<h2 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言</h2>
<p>本篇博客搜罗了个人遇到的有用方法和文档，希望能帮助各位更好地调教GPT。</p>
<h2 id="提示词文档"><a class="markdownIt-Anchor" href="#提示词文档"></a> 提示词文档</h2>
<div class="note success flat"><p>一份现成的文档，直接复制粘贴到对话窗口，GPT就会自动向你提问，索取需要的提示词。</p>
</div>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/07/05/6z3XknmKP4sr9lL.jpg" alt="主动提问的GPT" /></p>
<p>你是一个专家级ChatGPT提示工程师，在各种主题方面具有专业知识。在我们的互动过程中，你会称我为(你的名字)。让我们合作创建最好的ChatGPT，响应我提供的提示。我们将进行如下交互：</p>
<ol>
<li>
<p>我会告诉你如何帮助我。</p>
</li>
<li>
<p>根据我的要求，您将建议您应该承担的其他专家角色，除了成为专家级ChatGPT提示工程师之外，以提供最佳响应。然后，您将询问是否应继续执行建议的角色，或修改它们以获得最佳结果。</p>
</li>
<li>
<p>如果我同意，您将采用所有其他专家角色，包括最初的Expert ChatGPT Prompt Engineer角色</p>
</li>
<li>
<p>如果我不同意，您将询问应删除哪些角色，消除这些角色，并保留剩余的角色，包括专家级ChatGPT Prompt工程师角色，然后再继续。</p>
</li>
<li>
<p>您将确认您的活动专家角色，概述每个角色下的技能，并询问我是否要修改任何角色。</p>
</li>
<li>
<p>如果我同意，您将询问要添加或删除哪些角色，我将通知您。重复步骤5，直到我对角色满意为止。</p>
</li>
<li>
<p>如果我不同意，请继续下一步。</p>
</li>
<li>
<p>你会问：“我怎样才能帮助【我对步骤1的回答】?”</p>
</li>
<li>
<p>我会给出我的答案</p>
</li>
<li>
<p>你会问我是否想使用任何参考来源来制作完美的提示</p>
</li>
<li>
<p>如果我同意，你会问我想使用的来源数量。</p>
</li>
<li>
<p>您将单独请求每个来源，在您查看完后确认，并要求下一个。继续，直到您查看了所有源，然后移动到下一一步。</p>
</li>
<li>
<p>您将以列表格式请求有关我的原始提示的更多细节，以充分了解我的期望。</p>
</li>
<li>
<p>我会回答你的问题。</p>
</li>
<li>
<p>从这一点开始，您将在所有确认的专家角色下操作，并使用我的原始提示和步骤14中的其他细节创建详细的ChatGPT提示。提出新的提示并征求我的反馈。</p>
</li>
<li>
<p>如果我满意，您将描述每个专家角色的贡献以及他们将如何协作以产生全面的结果。然后，询问是否缺少任何输出或专家。</p>
<ol>
<li>
<p>如果我同意，我将指出缺少的角色或输出，您将在重复步骤15之前调整角色。</p>
</li>
<li>
<p>如果我不同意，您将作为所有已确认的专家角色执行提供的提示，并生成步骤15中概述的输出。继续执行步聚20。</p>
</li>
</ol>
</li>
<li>
<p>如果我不满意，你会问具体问题的提示</p>
</li>
<li>
<p>我将提供补充资料。</p>
</li>
<li>
<p>按照步聚15中的流程生成新提示，并考虑我在步聚18中的反馈。</p>
</li>
<li>
<p>完成回复后，询问我是否需要任何更改。</p>
</li>
<li>
<p>如果我同意，请请求所需的更改，参考您之前的回复，进行所需的调整，并生成新的提示。重复步骤15-20，直到我对提示符满意为止。如果你完全理解你的任务，回答：我今天能帮你什么，靓仔？</p>
</li>
</ol>
<h2 id="总结b站视频内容工具"><a class="markdownIt-Anchor" href="#总结b站视频内容工具"></a> 总结B站视频内容工具</h2>
<div class="note success flat"><p>一键总结你感兴趣的视频内容，节约时间和流量🤣</p>
</div>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/07/05/S9nTW3zP8JBLxk2.png" alt="BibiGPT AI学习助理" /></p>
<div align=center class="aspect-ratio">
    <iframe src="https://player.bilibili.com/player.html?aid=352747000&bvid=BV1fX4y1Q7Ux&cid=1029248276&page=1&autoplay=false" 
    scrolling="no" 
    border="0" 
    frameborder="no" 
    framespacing="0" 
    high_quality=1
    danmaku=1 
    allowfullscreen="true"> 
    </iframe>
</div>
<h3 id="摘要"><a class="markdownIt-Anchor" href="#摘要"></a> 摘要</h3>
<p>【BiliGPT】AI自动总结B站视频内容，ChatGPT API智能提取并总结字幕。该应用可以通过将哔哩哔哩的URL粘贴进去并点击一键总结，自动提取和总结视频内容。</p>
<h3 id="亮点"><a class="markdownIt-Anchor" href="#亮点"></a> 亮点</h3>
<ul>
<li>
<p>🤖 BiliGPT是一个使用ChatGPT API开发的应用，可以自动一键总结哔哩哔哩视频的内容。</p>
</li>
<li>
<p>📚 应用可以从视频的字幕中精确提取出主要内容、谬论发现、学习新单词等方面。</p>
</li>
<li>
<p>🎥 可以通过将视频链接中的&quot;.com&quot;替换为&quot;.jimmylv.cn&quot;，快速跳转到一键总结页面。</p>
</li>
<li>
<p>📝 应用还支持总结微信聊天记录等内容，将关键词提取导入到Notion，并提供中文翻译。</p>
</li>
<li>
<p>💰 使用OpenAI的API需要花费一定费用，但应用也支持用户使用自己的API Key。</p>
<ul>
<li>添加自己的API Key后，数据只会存储在本地，保护用户的数据安全。</li>
<li>欢迎用户支持作者，通过扫码给作者打赏。</li>
</ul>
</li>
<li>
<p>📲 应用还提供移动端快捷指令，方便在移动设备上使用。</p>
<ul>
<li>可以通过分享视频，并选择快捷指令来进行一键总结。</li>
<li>使用体验流畅，支持横屏视频播放。</li>
</ul>
</li>
</ul>
<div class="tag link"><a class="link-card" title="BibiGPT跳转链接" href="https://b.jimmylv.cn/"><div class="left"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/link.png"/></div><div class="right"><p class="text">BibiGPT跳转链接</p><p class="url">https://b.jimmylv.cn/</p></div></a></div> 
<h2 id="工具助手扮演"><a class="markdownIt-Anchor" href="#工具助手扮演"></a> 工具助手扮演</h2>
<div class="note success flat"><p>Github上一个 82.6k 的开源项目，帮助你调试GPT为合适的角色。</p>
</div>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2023/07/05/Gspt6UkO5qYcSdJ.png" alt="awesome-chatgpt-prompts" /></p>
<h3 id="linux终端"><a class="markdownIt-Anchor" href="#linux终端"></a> Linux终端</h3>
<div class="note info flat"><p>我想让你扮演一个linux终端。我将键入命令，您将回复终端应该显示的内容。我希望您只回复一个唯一代码块内的终端输出，而不是其他任何内容。不要写解释。不要键入命令，除非我指示你这样做。当我需要用英语告诉你一些事情时，我会把文本放在大括号里，像这样 {} 。我的第一个命令是pwd</p>
</div>
<h3 id="辩手"><a class="markdownIt-Anchor" href="#辩手"></a> 辩手</h3>
<div class="note info flat"><p>我希望你扮演辩手的角色。我将为你提供一些与时事相关的话题，你的任务是研究辩论双方，为每一方提出有效的论据，反驳相反的观点，并根据证据得出有说服力的结论。您的目标是帮助人们从讨论中解脱出来，增加对当前主题的了解和洞察力。我的第一个请求是“我想要一篇关于 Deno 的评论。”</p>
</div>
<h3 id="小说家"><a class="markdownIt-Anchor" href="#小说家"></a> 小说家</h3>
<div class="note info flat"><p>我希望你扮演一名小说家。您将想出富有创意且引人入胜的故事，可以长时间吸引读者。你可以选择任何类型，如奇幻、浪漫、历史小说等，但目标是写出具有出色情节、引人入胜的人物和意想不到的高潮的作品。我的第一个要求是“我要写一部以未来为背景的科幻小说”。</p>
</div>
<h3 id="影评人"><a class="markdownIt-Anchor" href="#影评人"></a> 影评人</h3>
<div class="note info flat"><p>我希望你担任影评人。您将撰写一篇引人入胜且富有创意的电影评论。你可以涵盖情节、主题和基调、表演和角色、导演、配乐、摄影、制作设计、特效、编辑、节奏、对话等主题。但最重要的方面是强调这部电影给你带来的感受。什么真正引起了你的共鸣。您也可以批评这部电影。请避免剧透。我的第一个要求是“我需要为电影《星际穿越》写一篇影评”</p>
</div>
<p>更多内容详见官网。</p>
<div class="tag link"><a class="link-card" title="Awesome ChatGPT Prompts" href="https://prompts.chat"><div class="left"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/link.png"/></div><div class="right"><p class="text">Awesome ChatGPT Prompts</p><p class="url">https://prompts.chat</p></div></a></div>
<div class="tag link"><a class="link-card" title="Github项目地址" href="https://github.com/f/awesome-chatgpt-prompts"><div class="left"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/link.png"/></div><div class="right"><p class="text">Github项目地址</p><p class="url">https://github.com/f/awesome-chatgpt-prompts</p></div></a></div>
]]></content>
      <categories>
        <category>实用工具</category>
      </categories>
      <tags>
        <tag>小工具</tag>
        <tag>Tools</tag>
        <tag>ChatGPT</tag>
      </tags>
  </entry>
  <entry>
    <title>【随手记】Vue知识点</title>
    <url>/posts/97bf29f1.html</url>
    <content><![CDATA[<h2 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言</h2>
<p>最近在做牛客的前端题库，将自己认知薄弱的一些知识点整理了下来，这是Vue的部分，包括Object.defineProoerty()、动态路由、webpack配置、keep-alive参数含义、watch监听等。</p>
<h2 id="vue知识点"><a class="markdownIt-Anchor" href="#vue知识点"></a> Vue知识点</h2>
<h3 id="客户端-服务端渲染的区别"><a class="markdownIt-Anchor" href="#客户端-服务端渲染的区别"></a> 客户端、服务端渲染的区别</h3>
<table>
<thead>
<tr>
<th></th>
<th>客户端渲染</th>
<th>服务端渲染</th>
</tr>
</thead>
<tbody>
<tr>
<td>html生成原理</td>
<td>由js生成html</td>
<td>由后台语言通过一些模版引擎生成</td>
</tr>
<tr>
<td>优点</td>
<td>1．前后端分离，前端做视图和交互，后端提供接口、数据<br>2．前端做路由；服务器计算压力变轻</td>
<td>1．响应快，用户体验好<br>2．搜索引擎友好，有seo优化<br>3．nodejs层服务器渲染，前端性能优化更顺手，可操作空间更大<br></td>
</tr>
<tr>
<td>缺点</td>
<td>用户等待时间变长，尤其是<strong>请求数多</strong>且有一定<strong>先后顺序</strong>的时候</td>
<td>1．增加服务器计算压力（虽可以做渲染缓存，但是毕竟多做了计算）<br>2．如果不是增加node中间层，前后端分工不明，不能很好的并行开发</td>
</tr>
<tr>
<td>耗时比较</td>
<td>1．数据请求：客户端在不同网络环境进行数据请求，外网http请求开销大，导致时间差<br>2．步骤：客户端需要等待js代码下载，加载完成再请求数据，渲染<br>3．渲染内容：客户端渲染，是经历一个从无到有完整的渲染步骤</td>
<td>1．数据请求：服务端在内网请求，数据响应速度快<br>2．步骤：服务端是先请求数据再渲染可视部分，即服务端不需要等待js代码下载，并会返回一个已经有内容的页面<br>3．渲染性能：服务端性能比客户端高，速度快<br>4．渲染内容：服务端先渲染可视部分，客户端再做二次渲染</td>
</tr>
<tr>
<td>适用场景</td>
<td>单页面应用如：React，Vue等等前端框架</td>
<td>用户体验比较高的比如首屏加载，重复较多的公共页面可以使用服务器渲染，减少ajax请求，挺升用户体验<br>如：<code>PHP</code>文件、<code>JSP</code>文件、Python的<code>Flask</code>配合Jinja引擎、<code>Django</code>框架、Java 配合vm模版引擎、<code>NodeJS</code>配合Jade。适合多页面应用。其实现在大部分网站 还是这种形式。</td>
</tr>
</tbody>
</table>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">服务器端渲染有利于SEO，且首页加载快</span><br><span class="line">客户端渲染节省后端资源，但可能会加载慢出现白屏</span><br><span class="line">服务器端渲染耗费流量，局部页面的变化也需要重新请求完整的页面</span><br><span class="line"></span><br><span class="line">客户端和服务器端在首屏渲染上网络请求次数是一样的(×) 客户端两次 服务端一次 </span><br><span class="line">客户端首屏渲染时首先拿到空的html模板，之后继续发起数据请求。而服务器端渲染只需要请求一次，服务器会将请求的数据放在html模板中一起返回。</span><br></pre></td></tr></table></figure>
<h4 id="总结"><a class="markdownIt-Anchor" href="#总结"></a> 总结</h4>
<p>1．有点网站为了让单页面应用利于seo，会让服务器和客户端同构，使用React／Vue渲染的方案。</p>
<p>2．对于同一个组件，服务端渲染“可视”的一部分，为确保组件有完整的生命周期和事件处理，客户端需要再次渲染</p>
<p>3．服务端渲染实际也是需要客户端进行开销很小的二次渲染</p>
<h3 id="绑定的相关指令"><a class="markdownIt-Anchor" href="#绑定的相关指令"></a> 绑定的相关指令</h3>
<p><strong>v-model： 双向绑定</strong></p>
<ul>
<li>添加number修饰符：可以自动将用户的输入值转为数值类型，如果这个值无法被<code>parseFloat()</code>解析，则会<strong>返回原始的值</strong>；添加trim修饰符：自动过滤用户输入的首尾空白字符；添加lazy修饰符：让内容在“change”事件时而非“input”事件时更新。</li>
<li>本质上是语法糖，负责监听用户的输入事件以更新数据；如果为不同元素绑定数据，则使用不同元素property，并抛出不同的事件；在vue2.2+版本新增功能，可以在<strong>自定义组件上使用</strong>v-model实现双向绑定</li>
<li><code>双向数据绑定</code>：Vue实现双向数据绑定是采用数据劫持和发布者-订阅模式。数据劫持是利用ES5的<code>Object.defineProperty(obj, key, value)</code>方法来劫持每个属性的getter和setter。用户更新了View、Model的数据也自动被更新了，这种情况就是双向数据绑定。</li>
</ul>
<p><strong>v-on（@）：绑定事件</strong></p>
<p><strong>v-bind（:）： 绑定dom</strong></p>
<h3 id="获取动态路由中id的值"><a class="markdownIt-Anchor" href="#获取动态路由中id的值"></a> 获取动态路由中id的值</h3>
<p><code>&#123; path: '/name/:id' &#125;</code></p>
<p>router其实是VueRouter的一个实例，所以它是一个全局对象，包含了所有的子对象和属性。而route是正在跳转的这个路由的局部对象，可以获取这个正在跳转的路由的name，path，params，query等</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">$route</span>.<span class="property">params</span>.<span class="property">id</span></span><br></pre></td></tr></table></figure>
<h3 id="webpack配置的描述"><a class="markdownIt-Anchor" href="#webpack配置的描述"></a> webpack配置的描述</h3>
<ul>
<li><code>module.rules</code>可以指定多个loader，而loader的作用是对模块的源码进行转换</li>
<li>plugin是一个具有apply方法的JavaScript对象，由于plugin可以携带参数，所以必须在配置中向plugins属性传入一个实例</li>
<li>webpack开始处理程序时，从入口开始递归构建一个依赖关系图，包含了程序所需的模块，然后打包为少量的bundle，通常只有一个bundle</li>
<li><strong>模块热替换</strong>会在程序运行中，替换、添加、删除模块，<code>无需重新加载整个页面</code>，<code>无需更替所有模块</code>。</li>
</ul>
<h3 id="watch监听"><a class="markdownIt-Anchor" href="#watch监听"></a> watch监听</h3>
<p>使用watch <code>handler</code>属性有一个特点，就是当值第一次绑定时，watch不会执行监听函数，只有值发生改变时才会执行。</p>
<p>如果需要在最初绑定值的时候也执行函数，则就需要用到immediate属性，添加 immediate: true属性</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> &#125;, </span><br><span class="line">  <span class="attr">watch</span>: &#123;</span><br><span class="line">    <span class="attr">a</span>: &#123;</span><br><span class="line">      <span class="attr">handler</span>: <span class="keyword">function</span>(<span class="params">value</span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(value)</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// immediate: true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>监听不会被发现</p>
<h3 id="路由模式"><a class="markdownIt-Anchor" href="#路由模式"></a> 路由模式</h3>
<ul>
<li>vue-router有两种模式，history和hash模式</li>
<li>hash模式是通过<code>onhashchange</code>事件，监听url的修改</li>
<li>history通过H5提供的API  history.pushState 和 history.pushState实现跳转且不刷新页面</li>
<li>history模式需要后端进行配合</li>
</ul>
<h3 id="vue响应式"><a class="markdownIt-Anchor" href="#vue响应式"></a> Vue响应式</h3>
<p><strong>Vue2无法检测property的添加或移除</strong>。由于Vue会在初始化实例时对property执行getter/setter转化，所以property必须在data对象上存在才能让Vue将它转换为响应式的。(这里声明是指vue2，在3.x的时候已经实现了深层对象和数组元素直接赋值、删除属性的响应式)</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">data () &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">form</span>: &#123;</span><br><span class="line">      <span class="attr">total</span>: <span class="number">10</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// this.form.total是响应式的</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// 若直接增加属性，是非响应式的</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">showFlag</span>= <span class="literal">true</span>  <span class="comment">//非响应式的</span></span><br></pre></td></tr></table></figure>
<p>使用Vue.set(object, key, value)方法将响应属性添加到嵌套的对象上</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="title function_">set</span>(<span class="variable language_">this</span>.<span class="property">form</span>, <span class="string">&#x27;showFlag&#x27;</span>, <span class="literal">true</span>)</span><br></pre></td></tr></table></figure>
<p>还可以使用vm.$set实例方法，这也是全局Vue.set方法的别名：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">this</span>.$set(<span class="variable language_">this</span>.<span class="property">form</span>, <span class="string">&#x27;showFlag&#x27;</span>, <span class="literal">true</span>)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Web</category>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Web</tag>
        <tag>Vue</tag>
        <tag>随手记</tag>
        <tag>前端</tag>
      </tags>
  </entry>
  <entry>
    <title>【随手记】GitLab-CI？拿来吧你！</title>
    <url>/posts/bf5c52e7.html</url>
    <content><![CDATA[<h2 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言</h2>
<p>书接【Bug周刊】的<code>gitlab-ci</code>构建部分，我们已经对一个 <code>maven</code> 项目进行了CI构建，实现每次提交代码后自动打包为 <code>jar</code> 包，并在<code>docker in docker</code> 的镜像中 <code>build</code> 为 docker 镜像。<strong>避免跳转麻烦，把上文的构建内容放到了基础部分</strong>。</p>
<h2 id="基础可跳过"><a class="markdownIt-Anchor" href="#基础可跳过"></a> 基础(可跳过)</h2>
<h3 id="问题描述"><a class="markdownIt-Anchor" href="#问题描述"></a> 问题描述</h3>
<p>需要对一个<code>maven</code>项目进行自动化构建，要求每次提交都会触发构建，减少运维的工作量，将构建好的jar包打包成docker镜像并推送至私有的镜像仓库。</p>
<p>详情如下：</p>
<p>1、自定义开发的<code>common</code>模块并不完善，也没有上传至私有的<code>nexus</code>仓库，需要打包的功能模块依赖于<code>common</code></p>
<p>2、项目依赖的部分<code>jar</code>包需要从私有的<code>nexus</code>仓库下载，需要配置对应的仓库地址</p>
<p>3、构建时间的优化、提升</p>
<h3 id="解决方案"><a class="markdownIt-Anchor" href="#解决方案"></a> 解决方案</h3>
<p>1、在代码仓库中增加 <code>.m2/settings.xml</code> 文件，配置对应的私有nexus仓库地址、阿里云或者腾讯云的nexus地址提升下载速度</p>
<p>2、增加 <code>localReposity</code> 配置，告诉maven在找不到对应<code>jar</code> 包时，从本地读取，完成<code>common</code>模块的引入。由于common模块是独立开发的，故和其他模块的pom父类并不一致，各个模块也有不同的配置，在原项目根目录下并没有pom文件，所以不能通过构建根pom文件的方式完成项目的打包。</p>
<p>3、引入cache</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">variables:</span></span><br><span class="line">  <span class="attr">RELEASE_TAG:</span> <span class="string">&quot;1.0.0&quot;</span></span><br><span class="line">  <span class="attr">MAVEN_CLI_OPTS:</span> <span class="string">&quot;../.m2/settings.xml --batch-mode -Dmaven.repo.local=$CI_PROJECT_DIR/.m2/repository&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">cache:</span></span><br><span class="line">  <span class="attr">key:</span> <span class="string">$&#123;CI_COMMIT_REF_SLUG&#125;</span> <span class="comment"># cache键值对 减少mvn下载jar包的时间 key指向当前项目分支</span></span><br><span class="line">  <span class="attr">paths:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">~/.m2/repository/</span> <span class="comment"># 缓存地址 镜像根目录下的 .m2/repository/ 文件夹</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">target/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># CI构建两步</span></span><br><span class="line"><span class="attr">stages:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">package</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">release</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 在maven镜像中构建jar包</span></span><br><span class="line"><span class="attr">package:</span></span><br><span class="line">  <span class="attr">image:</span> <span class="string">maven:3.6.1-jdk-8-alpine</span></span><br><span class="line">  <span class="attr">stage:</span> <span class="string">package</span></span><br><span class="line">  <span class="attr">only:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">master</span> <span class="comment"># 触发构建的分支</span></span><br><span class="line">  <span class="attr">tags:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">docker</span></span><br><span class="line">  <span class="attr">script:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">cd</span> <span class="string">test-common</span> <span class="comment"># 进入common模块打包</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">mvn</span> <span class="string">-s</span> <span class="string">$MAVEN_CLI_OPTS</span> <span class="string">-e</span> <span class="string">package</span> <span class="string">install</span> <span class="comment"># 打包 并将打包后生成的jar下载至 镜像根目录.m2/repository/路径下(本地仓库)</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">cd</span> <span class="string">../test-app</span> <span class="comment"># 切出common 打包其他模块</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">mvn</span> <span class="string">-s</span> <span class="string">$MAVEN_CLI_OPTS</span> <span class="string">-e</span> <span class="string">package</span></span><br><span class="line">  <span class="attr">artifacts:</span> <span class="comment"># 构建好的jar文件上传 并设置过期时间</span></span><br><span class="line">    <span class="attr">paths:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">test-app/target/test-app-application-exec.jar</span></span><br><span class="line">    <span class="attr">expire_in:</span> <span class="number">1</span> <span class="string">hours</span></span><br><span class="line"></span><br><span class="line"><span class="attr">release:</span> <span class="comment"># docker in docker 在docker中构建jar为docker镜像</span></span><br><span class="line">  <span class="attr">image:</span> <span class="string">docker:20-dind</span></span><br><span class="line">  <span class="attr">stage:</span> <span class="string">release</span></span><br><span class="line">  <span class="attr">only:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">master</span></span><br><span class="line">  <span class="attr">tags:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">docker-slim</span></span><br><span class="line">  <span class="attr">before_script:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">docker</span> <span class="string">login</span> <span class="string">--username=username</span> <span class="string">-p</span> <span class="string">$REPOS_PASSWORD</span> <span class="string">test.com</span> <span class="comment"># 配置私有镜像仓库的账号 密码 地址</span></span><br><span class="line">  <span class="attr">script:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">df</span> <span class="string">-h</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">docker</span> <span class="string">build</span> <span class="string">-t</span> <span class="string">test/test-app:$RELEASE_TAG</span> <span class="string">.</span> <span class="comment"># docker镜像标签</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">docker</span> <span class="string">push</span> <span class="string">test.com/test-image/test-app:$RELEASE_TAG</span> <span class="comment"># 推送</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="进阶"><a class="markdownIt-Anchor" href="#进阶"></a> 进阶</h2>
<h3 id="问题描述-2"><a class="markdownIt-Anchor" href="#问题描述-2"></a> 问题描述</h3>
<p>目前的业务需求是，在原maven项目的基础上，根目录增加了同级的模块，需要分模块构建，并且<strong>每次提交代码只对产生变更的模块进行打包</strong>。</p>
<p>文件夹树如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">|---.m2</span><br><span class="line">|---gateway</span><br><span class="line">|---moudle</span><br><span class="line">  |---hr</span><br><span class="line">  |---manage</span><br><span class="line">  |---adminstrive</span><br><span class="line">|---.gitlab-ci.yml</span><br><span class="line">|---dockerfile</span><br><span class="line">|---startup.sh</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="解决方案-2"><a class="markdownIt-Anchor" href="#解决方案-2"></a> 解决方案</h3>
<p>1、对变更模块进行判断，需要使用 <code>git diff</code> 命令</p>
<div class="note info flat"><p><strong>单纯的maven3.6版本的镜像没有git</strong>，同时也未安装对应的命令行工具，如apt、apk、yum等，因此无法在 <code>before_script</code> 阶段安装 <code>git</code> 工具曲线救国。只能更换原来的镜像。</p>
</div>
<p>2、分模块构建，需要使用通用的 <code>dockerfile</code> ，即在<code>gitlab-ci.yml</code>中对构建模块名进行判断，将此作为变量传入到dockerfile中。</p>
<div class="note info flat"><p>docker build 命令提供了 <code>--build-arg</code> 的参数可以将变量传入dockerfile中。</p>
</div>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.sa.net/2024/03/27/bvhBgEAmdkiuxFM.png" alt="" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.sa.net/2024/03/27/Oom67vXr5zEwRHq.png" alt="" /></p>
<p>3、明确CI文件 <code>script</code> 中的命令与 <code>linux</code> 终端命令细微的区别，避免出现标点的错误。</p>
<div class="note warning flat"><p>少年要不要来回试试，没有这些<code>; \ \n &amp;&amp;</code>符号，可能会寸步难行。</p>
</div>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.sa.net/2024/03/27/ePLlvI2Z4tCfsSX.png" alt="" /></p>
<p>4、选择正确的镜像，满足打包和构建的使用要求。</p>
<div class="note info flat"><p>如果在 <code>dind</code> 镜像中没有git命令对模块判断进行 <code>build</code>，不妨试试判断上一步，对产生变更的模块进行打包，是否有产物传给这一步骤，判断文件是否存在，比再安装一遍git省事多了。</p>
</div>
<p>5、纠正基础中的缓存地址。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.sa.net/2024/03/27/LSy9tvdT8Xes4g6.png" alt="" /></p>
<h3 id="配置文件"><a class="markdownIt-Anchor" href="#配置文件"></a> 配置文件</h3>
<p><strong>.gitlab-ci.yml</strong></p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">variables:</span></span><br><span class="line">  <span class="comment"># 将打包文件的路径作为变量 简化后续代码长度</span></span><br><span class="line">  <span class="attr">RELEASE_TAG:</span> <span class="string">&quot;0.0.1&quot;</span></span><br><span class="line">  <span class="attr">JAR_HR:</span> <span class="string">&quot;module/module-hr/target/module-hr-exec.jar&quot;</span></span><br><span class="line">  <span class="attr">JAR_MANAGE:</span> <span class="string">&quot;module/module-manage/target/module-manage-exec.jar&quot;</span></span><br><span class="line">  <span class="comment"># .m2文件夹在代码的根目录 模块在 下两层 比如 moudle/hr moudle/manage 所以需要跳出两次</span></span><br><span class="line">  <span class="attr">MAVEN_CLI_OPTS:</span> <span class="string">&quot;../../.m2/settings.xml --batch-mode -Dmaven.repo.local=$CI_PROJECT_DIR/.m2/repository&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#cache:</span></span><br><span class="line"><span class="comment">#  key: $&#123;CI_COMMIT_REF_SLUG&#125;</span></span><br><span class="line"><span class="comment">#  paths:</span></span><br><span class="line"><span class="comment">#    这是第一次的缓存配置 路径错误 因为已经指明了maven 安装jar包的地址 </span></span><br><span class="line"><span class="comment">#    为 maven.repo.local=$CI_PROJECT_DIR/.m2/repository</span></span><br><span class="line"><span class="comment">#    - ~/.m2/repository/</span></span><br><span class="line"><span class="comment">#    - target/</span></span><br><span class="line"><span class="comment">#    - /usr/share/maven</span></span><br><span class="line"><span class="comment">#    - /root/.m2/repository</span></span><br><span class="line"><span class="attr">cache:</span></span><br><span class="line">  <span class="attr">key:</span> <span class="string">m2-repo</span></span><br><span class="line">  <span class="attr">paths:</span></span><br><span class="line">    <span class="comment"># 这两个地址是等效的 都指向服务器的 /builds/username/projectName/.m2/repository</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">.m2/repository/</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">$CI_PROJECT_DIR/.m2/repository</span></span><br><span class="line"></span><br><span class="line"><span class="attr">stages:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">package</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">release</span></span><br><span class="line"></span><br><span class="line"><span class="attr">package:</span></span><br><span class="line">  <span class="comment"># 单纯maven不行 我用java带maven很合理吧 java镜像有apt-get 这很河狸吧</span></span><br><span class="line">  <span class="attr">image:</span> <span class="string">labelinsight/java-maven:3.6-jdk-8</span></span><br><span class="line">  <span class="attr">stage:</span> <span class="string">package</span></span><br><span class="line">  <span class="attr">only:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">dev</span></span><br><span class="line">  <span class="attr">tags:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">docker</span></span><br><span class="line">  <span class="attr">before_script:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">apt-get</span> <span class="string">install</span> <span class="string">-y</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">script:</span></span><br><span class="line">    <span class="comment"># git diff 命令判断模块是否发生变更 并判断是否发生在对应的 hr manage 模块下</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">if</span> [[ <span class="string">-n</span> <span class="string">$(git</span> <span class="string">diff</span> <span class="string">--name-only</span> <span class="string">$CI_COMMIT_BEFORE_SHA</span> <span class="string">$CI_COMMIT_SHA</span> <span class="string">|</span> <span class="string">grep</span> <span class="string">&#x27;^module/module-hr/&#x27;</span><span class="string">)</span> ]]<span class="string">;</span> <span class="string">then</span></span><br><span class="line">        <span class="string">cd</span> <span class="string">module/module-hr;</span></span><br><span class="line">        <span class="string">mvn</span> <span class="string">-s</span> <span class="string">$MAVEN_CLI_OPTS</span> <span class="string">-e</span> <span class="string">package;</span></span><br><span class="line">        <span class="string">cd</span> <span class="string">../../;</span></span><br><span class="line">      <span class="string">fi;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">if</span> [[ <span class="string">-n</span> <span class="string">$(git</span> <span class="string">diff</span> <span class="string">--name-only</span> <span class="string">$CI_COMMIT_BEFORE_SHA</span> <span class="string">$CI_COMMIT_SHA</span> <span class="string">|</span> <span class="string">grep</span> <span class="string">&#x27;^module/module-manage/&#x27;</span><span class="string">)</span> ]]<span class="string">;</span> <span class="string">then</span></span><br><span class="line">        <span class="string">cd</span> <span class="string">module/module-manage;</span></span><br><span class="line">        <span class="string">mvn</span> <span class="string">-s</span> <span class="string">$MAVEN_CLI_OPTS</span> <span class="string">-e</span> <span class="string">package;</span></span><br><span class="line">        <span class="string">cd</span> <span class="string">../../;</span></span><br><span class="line">      <span class="string">fi;</span></span><br><span class="line">  <span class="attr">artifacts:</span></span><br><span class="line">    <span class="attr">paths:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">module/module-hr/target/module-hr-exec.jar</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">module/module-manage/target/module-manage-exec.jar</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">expire_in:</span> <span class="number">1</span> <span class="string">hours</span></span><br><span class="line"></span><br><span class="line"><span class="attr">release:</span></span><br><span class="line">  <span class="attr">image:</span> <span class="string">docker:20-dind</span></span><br><span class="line">  <span class="attr">stage:</span> <span class="string">release</span></span><br><span class="line">  <span class="attr">only:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">dev</span></span><br><span class="line">  <span class="attr">tags:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">docker-slim</span></span><br><span class="line">  <span class="attr">before_script:</span></span><br><span class="line">    <span class="comment"># - apk add git 判断文件是否存在 不用装git了</span></span><br><span class="line">    <span class="comment"># $REPOS_PASSWORD 为管理员提前设置好的系统变量</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">docker</span> <span class="string">login</span> <span class="string">--username=username</span> <span class="string">-p</span> <span class="string">$REPOS_PASSWORD</span> <span class="string">docker.repos.cscec81.com:4433</span></span><br><span class="line">  <span class="attr">script:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">df</span> <span class="string">-h</span></span><br><span class="line">    <span class="comment"># 打标签 --build-arg 传变量 变量名为 BUILD_JAR_NAME  对应值是开始在 variables部分 设定好的</span></span><br><span class="line">    <span class="comment"># 推送至 私有的docker镜像仓库</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">if</span> [[ <span class="string">-f</span> <span class="string">&quot;module/module-hr/target/module-hr-exec.jar&quot;</span> ]]<span class="string">;</span> <span class="string">then</span></span><br><span class="line">        <span class="string">docker</span> <span class="string">build</span> <span class="string">-t</span> <span class="string">test/test-hr:$RELEASE_TAG</span> <span class="string">--build-arg</span> <span class="string">BUILD_JAR_NAME=$JAR_HR</span> <span class="string">.;</span></span><br><span class="line">        <span class="string">docker</span> <span class="string">push</span> <span class="string">repos.test.com/test-image/test-hr:$RELEASE_TAG;</span></span><br><span class="line">      <span class="string">fi;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">if</span> [[ <span class="string">-f</span> <span class="string">&quot;module/module-manage/target/module-manage-exec.jar&quot;</span> ]]<span class="string">;</span> <span class="string">then</span></span><br><span class="line">        <span class="string">docker</span> <span class="string">build</span> <span class="string">-t</span> <span class="string">test/test-manage:$RELEASE_TAG</span> <span class="string">--build-arg</span> <span class="string">BUILD_JAR_NAME=$JAR_MANAGE</span> <span class="string">.;</span></span><br><span class="line">        <span class="string">docker</span> <span class="string">push</span> <span class="string">repos.test.com/test-image/test-manage:$RELEASE_TAG;</span></span><br><span class="line">      <span class="string">fi;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果有更多模块 按照 加变量 -&gt; 加git diff -&gt; 加产物 -&gt; 加判断推送 的流程，ctrl c v 就行了</span></span><br></pre></td></tr></table></figure>
<p><strong>dockerfile</strong></p>
<figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="comment">#FROM openjdk:8-jre</span></span><br><span class="line"><span class="keyword">FROM</span> openjdk:<span class="number">8</span>-jdk</span><br><span class="line"></span><br><span class="line"><span class="comment"># docker build 时传入的变量</span></span><br><span class="line"><span class="keyword">ARG</span> BUILD_JAR_NAME</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置JVM参数</span></span><br><span class="line"><span class="keyword">ENV</span> BASE_DIR=<span class="string">&quot;/app&quot;</span> \</span><br><span class="line">    JAVA_HOME=<span class="string">&quot;/usr/local/openjdk-8/&quot;</span> \</span><br><span class="line">    JAVA=<span class="string">&quot;/usr/local/openjdk-8/bin/java&quot;</span> \</span><br><span class="line">    JVM_XMS=<span class="string">&quot;8g&quot;</span> \</span><br><span class="line">    JVM_XMX=<span class="string">&quot;8g&quot;</span> \</span><br><span class="line">    JVM_XMN=<span class="string">&quot;3g&quot;</span> \</span><br><span class="line">    JVM_MS=<span class="string">&quot;128m&quot;</span> \</span><br><span class="line">    JVM_MMS=<span class="string">&quot;320m&quot;</span> \</span><br><span class="line">    TZ=<span class="string">&quot;Asia/Shanghai&quot;</span> \</span><br><span class="line">    BUILD_JAR_NAME=$BUILD_JAR_NAME</span><br><span class="line"></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> <span class="variable">$BASE_DIR</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试环境配置 部署时注释掉 从rancher配置</span></span><br><span class="line"><span class="comment"># 如果使用 请换成你自己的ip 和 密码</span></span><br><span class="line"><span class="keyword">ENV</span> MYSQL_HOST=<span class="number">127.0</span>.<span class="number">0.1</span> \</span><br><span class="line">    MYSQL_PORT=<span class="number">3306</span> \</span><br><span class="line">    MYSQL_SERVICE_DB_NAME=root \</span><br><span class="line">    MYSQL_SERVICE_PASSWORD=<span class="number">123456</span> </span><br><span class="line"></span><br><span class="line"><span class="comment"># 时区配置 打印该模块路径 及 文件名</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">rm</span> -f /etc/localtime \</span></span><br><span class="line"><span class="language-bash">&amp;&amp; <span class="built_in">ln</span> -sv /usr/share/zoneinfo/Asia/Shanghai /etc/localtime \</span></span><br><span class="line"><span class="language-bash">&amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;Asia/Shanghai&quot;</span> &gt; /etc/timezone \</span></span><br><span class="line"><span class="language-bash">&amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$&#123;BUILD_JAR_NAME&#125;</span>&quot;</span> \</span></span><br><span class="line"><span class="language-bash">&amp;&amp; JAR_FILE_NAME=$(<span class="built_in">basename</span> <span class="string">&quot;<span class="variable">$&#123;BUILD_JAR_NAME&#125;</span>&quot;</span>) \</span></span><br><span class="line"><span class="language-bash">&amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;The jar file name is: <span class="variable">$&#123;JAR_FILE_NAME&#125;</span>&quot;</span></span></span><br><span class="line"><span class="comment"># 注意 RUN命令的运行结果变量JAR_FILE_NAME 是局部变量 到下一层读取的话是 null</span></span><br><span class="line"><span class="comment"># 所以我直接将 docker build 传入的 BUILD_JAR_NAME 变量作为环境变量，在启动脚本 startup.sh 中处理了</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 拷贝jar包 及 脚本</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> <span class="variable">$BUILD_JAR_NAME</span> ./startup.sh <span class="variable">$BASE_DIR</span>/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">chmod</span> +x startup.sh</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="language-bash"> [<span class="string">&quot;sh&quot;</span>,<span class="string">&quot;startup.sh&quot;</span>]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong><a href="http://startup.sh">startup.sh</a></strong></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 打印启动的文件名</span></span><br><span class="line">JAR_FILE_NAME=$(<span class="built_in">basename</span> <span class="string">&quot;<span class="variable">$&#123;BUILD_JAR_NAME&#125;</span>&quot;</span>)</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;&gt; JAR_FILE_NAME: <span class="variable">$&#123;JAR_FILE_NAME&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line">JAVA_OPT=<span class="string">&quot;<span class="variable">$&#123;JAVA_OPT&#125;</span> -server -Xms<span class="variable">$&#123;JVM_XMS&#125;</span> -Xmx<span class="variable">$&#123;JVM_XMX&#125;</span> -Xmn<span class="variable">$&#123;JVM_XMN&#125;</span> -XX:MetaspaceSize=<span class="variable">$&#123;JVM_MS&#125;</span> -XX:MaxMetaspaceSize=<span class="variable">$&#123;JVM_MMS&#125;</span>&quot;</span></span><br><span class="line"><span class="comment"># debug 模式下参数配置（传输、端口号、调试服务器、不在 JVM 启动时暂停，而是等待调试器连接后再开始执行。）</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$&#123;MODE_DEBUG&#125;</span>&quot;</span> = <span class="string">&quot;y&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">  JAVA_OPT=<span class="string">&quot;<span class="variable">$&#123;JAVA_OPT&#125;</span> -Xdebug -Xrunjdwp:transport=dt_socket,address=12345,server=y,suspend=n&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="comment"># 异常处理机制 及 禁用大页面</span></span><br><span class="line">JAVA_OPT=<span class="string">&quot;<span class="variable">$&#123;JAVA_OPT&#125;</span> -XX:-OmitStackTraceInFastThrow -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=<span class="variable">$&#123;BASE_DIR&#125;</span>/logs/java_heapdump.hprof&quot;</span></span><br><span class="line">JAVA_OPT=<span class="string">&quot;<span class="variable">$&#123;JAVA_OPT&#125;</span> -XX:-UseLargePages&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 垃圾回收 日志 轮换文件大小限制</span></span><br><span class="line"><span class="built_in">mkdir</span> -p <span class="string">&quot;<span class="variable">$&#123;BASE_DIR&#125;</span>/logs&quot;</span> &amp;&amp; <span class="built_in">touch</span> <span class="string">&quot;<span class="variable">$&#123;BASE_DIR&#125;</span>/logs/gc.log&quot;</span></span><br><span class="line">JAVA_OPT=<span class="string">&quot;<span class="variable">$&#123;JAVA_OPT&#125;</span> -Xloggc:<span class="variable">$&#123;BASE_DIR&#125;</span>/logs/gc.log -verbose:gc -XX:+PrintGCDetails -XX:+PrintGCDateStamps -XX:+PrintGCTimeStamps -XX:+UseGCLogFileRotation -XX:NumberOfGCLogFiles=10 -XX:GCLogFileSize=100M&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置文件编码 Redis等ip和密码 启动jar包</span></span><br><span class="line">JAVA_OPT=<span class="string">&quot;<span class="variable">$&#123;JAVA_OPT&#125;</span> -Dfile.encoding=utf-8&quot;</span></span><br><span class="line"><span class="comment">#JAVA_OPT=&quot;$&#123;JAVA_OPT&#125; -DMYSQL_HOST=$&#123;MYSQL_HOST&#125; -DMYSQL_PORT=$&#123;MYSQL_PORT&#125; -DMYSQL_SERVICE_DB_NAME=$&#123;MYSQL_SERVICE_DB_NAME&#125; -DMYSQL_SERVICE_PASSWORD=$&#123;MYSQL_SERVICE_PASSWORD&#125;&quot;</span></span><br><span class="line">JAVA_OPT=<span class="string">&quot;<span class="variable">$&#123;JAVA_OPT&#125;</span> -jar <span class="variable">$&#123;BASE_DIR&#125;</span>/<span class="variable">$&#123;JAR_FILE_NAME&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;This server is starting, you can docker logs your container&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;JAVA_OPT&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">exec</span>  <span class="variable">$JAVA</span> <span class="variable">$&#123;JAVA_OPT&#125;</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Web</category>
        <category>运维</category>
      </categories>
      <tags>
        <tag>随手记</tag>
        <tag>GitLab</tag>
        <tag>CI自动化</tag>
      </tags>
  </entry>
  <entry>
    <title>【随手记】docker搭建wordpress</title>
    <url>/posts/cf3334e.html</url>
    <content><![CDATA[<h2 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言</h2>
<p>最近外快需要，重新部署了<code>wordpress</code>，因为是小水管，自然想到了<code>docker</code>，在我不需要演示的时候可以停掉相应的服务，而且停掉后不用担心部署其他服务时端口冲突的问题，这样我的<code>nacos</code>和<code>nexus</code>都不会受到影响🎉。环境是腾讯云的宝塔镜像。</p>
<h2 id="部署过程"><a class="markdownIt-Anchor" href="#部署过程"></a> 部署过程</h2>
<p>1、提前开放<strong>宝塔防火墙</strong>和<strong>腾讯云服务器的防火墙</strong>的3306、8080、80端口 （宝塔里面开三个、腾讯云安全组里再开相同的三个）</p>
<p>2、新建并启动MySQL容器</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker container run \</span><br><span class="line">  -d \</span><br><span class="line">  --name wordpressdb \</span><br><span class="line">  --<span class="built_in">env</span> MYSQL_ROOT_PASSWORD=123456 \</span><br><span class="line">  --<span class="built_in">env</span> MYSQL_DATABASE=wordpress \</span><br><span class="line">  mysql:5.7</span><br></pre></td></tr></table></figure>
<p>3、新建并启动WordPress容器</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker container run \</span><br><span class="line">  -d \</span><br><span class="line">  -p 8080:80 \</span><br><span class="line">  --name wordpress \</span><br><span class="line">  --<span class="built_in">env</span> WORDPRESS_DB_PASSWORD=123456 \</span><br><span class="line">  --<span class="built_in">link</span> wordpressdb:mysql \</span><br><span class="line">  --volume <span class="string">&quot;<span class="variable">$PWD</span>/wordpress&quot;</span>:/var/www/html \</span><br><span class="line">  wordpress</span><br></pre></td></tr></table></figure>
<p>4、修改WordPress的数据库配置文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@VM-16-16-centos ~]<span class="comment"># vim wordpress/wp-config.php</span></span><br></pre></td></tr></table></figure>
<p>进入配置文件后，修改下列内容（第2、3、4步的密码记得改啊，别真搞123456）</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ** MySQL settings - You can get this info from your web host ** //</span></span><br><span class="line"><span class="comment">/** The name of the database for WordPress */</span></span><br><span class="line"><span class="title function_ invoke__">define</span>( <span class="string">&#x27;DB_NAME&#x27;</span>, <span class="title function_ invoke__">getenv_docker</span>(<span class="string">&#x27;WORDPRESS_DB_NAME&#x27;</span>, <span class="string">&#x27;wordpress&#x27;</span>) );</span><br><span class="line"><span class="comment">/** MySQL database username */</span></span><br><span class="line"><span class="title function_ invoke__">define</span>( <span class="string">&#x27;DB_USER&#x27;</span>, <span class="title function_ invoke__">getenv_docker</span>(<span class="string">&#x27;WORDPRESS_DB_USER&#x27;</span>, <span class="string">&#x27;root&#x27;</span>) );</span><br><span class="line"><span class="comment">/** MySQL database password */</span></span><br><span class="line"><span class="title function_ invoke__">define</span>( <span class="string">&#x27;DB_PASSWORD&#x27;</span>, <span class="title function_ invoke__">getenv_docker</span>(<span class="string">&#x27;WORDPRESS_DB_PASSWORD&#x27;</span>, <span class="string">&#x27;123456&#x27;</span>) );</span><br></pre></td></tr></table></figure>
<p>保存后退出（按<code>esc</code>， 输入 <code>:wq</code> 保存后退出）</p>
<hr />
<p>这里访问 你的服务器公网ip地址:8080（类似 127.0.0.1:8080），进入WordPress安装界面，就可以完成初始化，正常访问写文章了。</p>
<p>我没有在docker安装命令中加<code>--rm</code>，这会在停止容器后自动删除镜像，与需求不符。</p>
<p><code>WORDPRESS_DB_PASSWORD=123456</code>、<code>MYSQL_ROOT_PASSWORD=123456</code>、<code>getenv_docker('WORDPRESS_DB_PASSWORD', '123456')</code>中的<code>123456</code>记得改成复杂点的密码。当然，不改也能跑🤣</p>
<h2 id="参考链接"><a class="markdownIt-Anchor" href="#参考链接"></a> 参考链接</h2>
<div class="tag link"><a class="link-card" title="Docker五分钟搭建Wordpress" href="https://developer.aliyun.com/article/900120"><div class="left"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/link.png"/></div><div class="right"><p class="text">Docker五分钟搭建Wordpress</p><p class="url">https://developer.aliyun.com/article/900120</p></div></a></div> 
<h2 id="个人主题配置"><a class="markdownIt-Anchor" href="#个人主题配置"></a> 个人主题配置</h2>
<p>主题：Freshblog Newsfeed</p>
<p>启用顶部图、禁用侧栏、修改顶部图样式、修改页脚的背景色及内容、设置layout的文章为三列，效果如下：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.sa.net/2024/02/26/2X7aiJ1ovkxZlNu.png" alt="" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.sa.net/2024/02/26/GRU78QJ64es9ZAy.png" alt="" /></p>
<p>主题编辑器，将WordPress登录后顶部的黑边消除掉：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.sa.net/2024/02/26/nuQyeEqmk9d2sHt.png" alt="image-20240226173409143" /></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="title function_ invoke__">show_admin_bar</span>(<span class="literal">false</span>);</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Web</category>
        <category>docker</category>
      </categories>
      <tags>
        <tag>随手记</tag>
        <tag>docker</tag>
        <tag>wordpress</tag>
      </tags>
  </entry>
  <entry>
    <title>【随手记】前端多模块项目内存溢出</title>
    <url>/posts/d856c1f0.html</url>
    <content><![CDATA[<h2 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言</h2>
<p>最近起公司的前端项目又爆内存了，忘记之前是怎么配置的，这篇博客用于备忘。</p>
<h2 id="问题描述"><a class="markdownIt-Anchor" href="#问题描述"></a> 问题描述</h2>
<p>一个很臃肿的前端多模块项目，对应后端的多个 <code>springboot</code> 模块项目，前端每次启动都会对所有的包进行打包，影响启动速度，内存也很容易爆掉。</p>
<p>报错如下：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">(node:28820) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 upgrade listeners added to [Server]. Use emitter.setMaxListeners() to increase <span class="built_in">limit</span></span><br><span class="line">(Use `node --trace-warnings ...` to show <span class="built_in">where</span> the warning was created)</span><br><span class="line"></span><br><span class="line">FATAL ERROR: Reached heap <span class="built_in">limit</span> Allocation failed - JavaScript heap out of memory</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.sa.net/2024/04/02/Mf6mdbYisSICxe3.png" alt="" /></p>
<h2 id="解决方案"><a class="markdownIt-Anchor" href="#解决方案"></a> 解决方案</h2>
<p>1、使用 <code>npm</code> 安装插件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install -g increase-memory-limit</span><br></pre></td></tr></table></figure>
<p>2、项目启动前，在终端运行对应命令</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">increase-memory-limit</span><br><span class="line"><span class="comment"># 或者下面这句</span></span><br><span class="line">increase-memory-limit.cmd</span><br></pre></td></tr></table></figure>
<p>3、在项目的 <code>vue.config.js</code> 中注释掉对应的内存限制行</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;CPU 数量&quot;</span>, <span class="built_in">require</span>(<span class="string">&#x27;os&#x27;</span>).<span class="title function_">cpus</span>().<span class="property">length</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">require</span>(<span class="string">&#x27;v8&#x27;</span>).<span class="title function_">getHeapStatistics</span>())</span><br><span class="line"><span class="comment">// args[0].memoryLimit = 4096; 这行限制注释掉</span></span><br></pre></td></tr></table></figure>
<p>4、根据统一认证登录和单点登录的需要，修改 <code>loginType</code></p>
<p>5、运行项目</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm run serve</span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure>
<h2 id="参考链接"><a class="markdownIt-Anchor" href="#参考链接"></a> 参考链接</h2>
<div class="tag link"><a class="link-card" title="JavaScript heap out of memory" href="https://blog.csdn.net/xiaoran_1997/article/details/125944699"><div class="left"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/link.png"/></div><div class="right"><p class="text">JavaScript heap out of memory</p><p class="url">https://blog.csdn.net/xiaoran_1997/article/details/125944699</p></div></a></div>]]></content>
      <categories>
        <category>Web</category>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
        <tag>前端</tag>
        <tag>node</tag>
        <tag>内存溢出</tag>
        <tag>多模块</tag>
      </tags>
  </entry>
  <entry>
    <title>【随手记】pyenv的安装及使用</title>
    <url>/posts/6a7b3be7.html</url>
    <content><![CDATA[<h2 id="问题描述"><a class="markdownIt-Anchor" href="#问题描述"></a> 问题描述</h2>
<p>周末，我发现了一个有趣的开源项目，打算在本地尝试运行。该项目兼容的 <code>python</code> 版本为 3.7 - 3.9，好嘛🤣哥们就装了3.6。因此，我需要一个python版本管理工具来切换不同版本。</p>
<p>由于新电脑尚未安装conda，且目前的工作并未涉及复杂的依赖关系或科学计算、机器学习任务（哥们只是个后端），我选择了轻量级的 <code>pyenv</code>。</p>
<h2 id="安装步骤"><a class="markdownIt-Anchor" href="#安装步骤"></a> 安装步骤</h2>
<p>根据 github 上的文档，pyenv 分为适用于 linux/mac 的版本和 windows 版本的 <code>pyenv-win</code>。</p>
<p>以下是在windows环境下的安装步骤：</p>
<p>1、以管理员身份打开终端，执行以下命令</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Invoke-WebRequest -UseBasicParsing -Uri <span class="string">&quot;https://raw.githubusercontent.com/pyenv-win/pyenv-win/master/pyenv-win/install-pyenv-win.ps1&quot;</span> -OutFile <span class="string">&quot;./install-pyenv-win.ps1&quot;</span>; &amp;<span class="string">&quot;./install-pyenv-win.ps1&quot;</span></span><br></pre></td></tr></table></figure>
<p>安装过程可能较慢，请耐心等待。</p>
<p>2、重启终端</p>
<p>3、运行 <code>pyenv --version</code> 验证 pyenv 是否安装成功</p>
<p>4、查看当前可安装的 python 版本 <code>pyenv install -l</code></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.sa.net/2024/04/08/rcbShmO1685nUKX.png" alt="" /></p>
<p>5、毫不犹豫地安装 <code>3.8.0</code>。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pyenv install 3.8.0</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.sa.net/2024/04/08/ai4zvlkWZ2sF8CL.png" alt="" /></p>
<p>6、设置本地环境使用的 <code>python</code> 版本，<code>pyenv global 3.8.0</code>，如需更改版本，只需将3.8.0替换为相应的版本号。</p>
<p>7、检查当前 python 版本及其路径，<code>pyenv version</code></p>
<p>8、检查该版本 python 是否能正常使用</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">python -c <span class="string">&quot;import sys; print(sys.executable)&quot;</span></span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.sa.net/2024/04/08/iwrJpNHX7exQvcs.png" alt="" /></p>
<h2 id="使用过程"><a class="markdownIt-Anchor" href="#使用过程"></a> 使用过程</h2>
<p>1、克隆我感兴趣的项目至本地，并设置当前文件夹的环境为 <code>pyenv local 3.8.0</code></p>
<p>2、安装对应的 requirements.txt 中的三方库</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pip3 install -i https://pypi.tuna.tsinghua.edu.cn/simple -r requirements.txt</span><br></pre></td></tr></table></figure>
<p>如果在安装 opencv-python 时出现卡在 PEP-517 的情况，升级 pip 版本即可解决。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pip3 install --upgrade pip setuptools wheel</span><br></pre></td></tr></table></figure>
<p>3、启动 py 脚本，<code>python main.py</code></p>
<h2 id="参考链接"><a class="markdownIt-Anchor" href="#参考链接"></a> 参考链接</h2>
<div class="tag link"><a class="link-card" title="pyenv-win" href="https://github.com/pyenv-win/pyenv-win?tab=readme-ov-file"><div class="left"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/link.png"/></div><div class="right"><p class="text">pyenv-win</p><p class="url">https://github.com/pyenv-win/pyenv-win?tab=readme-ov-file</p></div></a></div>
<div class="tag link"><a class="link-card" title="opencv-python安装卡住PEP 517" href="https://blog.csdn.net/ilovejohnny/article/details/121031935"><div class="left"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/link.png"/></div><div class="right"><p class="text">opencv-python安装卡住PEP 517</p><p class="url">https://blog.csdn.net/ilovejohnny/article/details/121031935</p></div></a></div>]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>pyenv</tag>
        <tag>版本管理</tag>
      </tags>
  </entry>
  <entry>
    <title>【随手记】数据类型</title>
    <url>/posts/889c180f.html</url>
    <content><![CDATA[<h2 id="java数据类型"><a class="markdownIt-Anchor" href="#java数据类型"></a> JAVA数据类型</h2>
<p>Java基本数据类型共有八种。可以分为三类，字符类型<code>char</code>，布尔类型<code>boolean</code>以及数值类型<code>byte、short、int、long、float、double</code>。数值类型又可以分为整数类型byte、short、int、long和浮点数类型float、double。</p>
<p>JAVA中的数值类型不存在无符号的，它们的取值范围是固定的，不会随着机器硬件环境或者操作系统的改变而改变。实际上，JAVA中还存在另外一种基本类型void，它也有对应的包装类 java.lang.Void，不过我们无法直接对它们进行操作。8 中类型表示范围如下：</p>
<p><code>byte</code>：8位，最大存储数据量是255，存放的数据范围是-128~127之间。</p>
<p><code>short</code>：16位，最大数据存储量是65536，数据范围是-32768~32767之间。</p>
<p><code>int</code>：32位，最大数据存储容量是2的32次方减1，数据范围是负的2的31次方到正的2的31次方减1。</p>
<p><code>long</code>：64位，最大数据存储容量是2的64次方减1，数据范围为负的2的63次方到正的2的63次方减1。</p>
<p><code>float</code>：32位，数据范围在3.4e-45~1.4e38，直接赋值时必须在数字后加上f或F。</p>
<p><code>double</code>：64位，数据范围在4.9e-324~1.8e308，赋值时可以加d或D也可以不加。</p>
<p><code>boolean</code>：只有true和false两个取值。</p>
<p><code>char</code>：16位，存储Unicode码，用单引号赋值。</p>
<h2 id="javascript数据类型"><a class="markdownIt-Anchor" href="#javascript数据类型"></a> JavaScript数据类型</h2>
<p>JavaScript共有八种数据类型，分别是<code>Undefined、Null、Boolean、Number、String、Object、Symbol、BigInt</code>。</p>
<p>其中 Symbol 和 BigInt 是ES6 中新增的数据类型：</p>
<ul>
<li>Symbol 代表创建后独一无二且不可变的数据类型，它主要是为了解决可能出现的全局变量冲突的问题。</li>
<li>BigInt 是一种数字类型的数据，它可以表示任意精度格式的整数，使用 BigInt 可以安全地存储和操作大整数，即使这个数已经超出了 Number 能够表示的安全整数范围。</li>
</ul>
<p>这些数据可以分为原始数据类型和引用数据类型：</p>
<ul>
<li>栈：原始数据类型（Undefined、Null、Boolean、Number、String）</li>
<li>堆：引用数据类型（对象、数组和函数）</li>
</ul>
<p>两种类型的区别在于<strong>存储位置的不同：</strong></p>
<ul>
<li>原始数据类型直接存储在栈（stack）中的简单数据段，占据空间小、大小固定，属于被频繁使用数据，所以放入栈中存储；</li>
<li>引用数据类型存储在堆（heap）中的对象，占据空间大、大小不固定。如果存储在栈中，将会影响程序运行的性能；引用数据类型在栈中存储了指针，该指针指向堆中该实体的起始地址。当解释器寻找引用值时，会首先检索其在栈中的地址，取得地址后从堆中获得实体。</li>
</ul>
<p>堆和栈的概念存在于数据结构和操作系统内存中，在数据结构中：</p>
<ul>
<li>在数据结构中，栈中数据的存取方式为先进后出。</li>
<li>堆是一个优先队列，是按优先级来进行排序的，优先级可以按照大小来规定。</li>
</ul>
<p>在操作系统中，内存被分为栈区和堆区：</p>
<ul>
<li>栈区内存由编译器自动分配释放，存放函数的参数值，局部变量的值等。其操作方式类似于数据结构中的栈。</li>
<li>堆区内存一般由开发着分配释放，若开发者不释放，程序结束时可能由垃圾回收机制回收。</li>
</ul>
<h2 id="作用域与闭包"><a class="markdownIt-Anchor" href="#作用域与闭包"></a> 作用域与闭包</h2>
<h3 id="对闭包的理解"><a class="markdownIt-Anchor" href="#对闭包的理解"></a> 对闭包的理解</h3>
<p><strong>闭包是指有权访问另一个函数作用域中变量的函数</strong>，创建闭包的最常见的方式就是在一个函数内创建另一个函数，创建的函数可以访问到当前函数的局部变量。</p>
<p>闭包有两个常用的用途；</p>
<ul>
<li>闭包的第一个用途是使我们在函数外部能够访问到函数内部的变量。通过使用闭包，可以通过在外部调用闭包函数，从而在外部访问到函数内部的变量，可以使用这种方法来创建私有变量。</li>
<li>闭包的另一个用途是使已经运行结束的函数上下文中的变量对象继续留在内存中，因为闭包函数保留了这个变量对象的引用，所以这个变量对象不会被回收。</li>
</ul>
<p>比如，函数 A 内部有一个函数 B，函数 B 可以访问到函数 A 中的变量，那么函数 B 就是闭包。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function A() &#123;</span><br><span class="line">  let a = 1</span><br><span class="line">  window.B = function () &#123;</span><br><span class="line">      console.log(a)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">A()</span><br><span class="line">B() // 1</span><br></pre></td></tr></table></figure>
<p>在 JS 中，闭包存在的意义就是让我们可以间接访问函数内部的变量。经典面试题：循环中使用闭包解决 var 定义函数的问题</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">for (var i = 1; i &lt;= 5; i++) &#123;</span><br><span class="line">  setTimeout(function timer() &#123;</span><br><span class="line">    console.log(i)</span><br><span class="line">  &#125;, i * 1000)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>首先因为 <code>setTimeout</code> 是个异步函数，所以会先把循环全部执行完毕，这时候 <code>i</code> 就是 6 了，所以会输出一堆 6。解决办法有三种：</p>
<ul>
<li>第一种是使用闭包的方式</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">for (var i = 1; i &lt;= 5; i++) &#123;</span><br><span class="line">  ;(function(j) &#123;</span><br><span class="line">    setTimeout(function timer() &#123;</span><br><span class="line">      console.log(j)</span><br><span class="line">    &#125;, j * 1000)</span><br><span class="line">  &#125;)(i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在上述代码中，首先使用了立即执行函数将 <code>i</code> 传入函数内部，这个时候值就被固定在了参数 <code>j</code> 上面不会改变，当下次执行 <code>timer</code> 这个闭包的时候，就可以使用外部函数的变量 <code>j</code>，从而达到目的。</p>
<ul>
<li>第二种就是使用 <code>setTimeout</code> 的第三个参数，这个参数会被当成 <code>timer</code> 函数的参数传入。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">for (var i = 1; i &lt;= 5; i++) &#123;</span><br><span class="line">  setTimeout(</span><br><span class="line">    function timer(j) &#123;</span><br><span class="line">      console.log(j)</span><br><span class="line">    &#125;,</span><br><span class="line">    i * 1000,</span><br><span class="line">    i</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>第三种就是使用 <code>let</code> 定义 <code>i</code> 了来解决问题了，这个也是最为推荐的方式</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">for (let i = 1; i &lt;= 5; i++) &#123;</span><br><span class="line">  setTimeout(function timer() &#123;</span><br><span class="line">    console.log(i)</span><br><span class="line">  &#125;, i * 1000)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="对作用域-作用域链的理解"><a class="markdownIt-Anchor" href="#对作用域-作用域链的理解"></a> 对作用域、作用域链的理解</h3>
<h4 id="全局作用域和函数作用域"><a class="markdownIt-Anchor" href="#全局作用域和函数作用域"></a> 全局作用域和函数作用域</h4>
<p>（1）全局作用域</p>
<ul>
<li>最外层函数和最外层函数外面定义的变量拥有全局作用域</li>
<li>所有未定义直接赋值的变量自动声明为全局作用域</li>
<li>所有window对象的属性拥有全局作用域</li>
<li>全局作用域有很大的弊端，过多的全局作用域变量会污染全局命名空间，容易引起命名冲突。</li>
</ul>
<p>（2）函数作用域</p>
<ul>
<li>函数作用域声明在函数内部的变零，一般只有固定的代码片段可以访问到</li>
<li>作用域是分层的，内层作用域可以访问外层作用域，反之不行</li>
</ul>
<h4 id="块级作用域"><a class="markdownIt-Anchor" href="#块级作用域"></a> 块级作用域</h4>
<ul>
<li>使用ES6中新增的let和const指令可以声明块级作用域，块级作用域可以在函数中创建也可以在一个代码块中的创建（由<code>&#123; &#125;</code>包裹的代码片段）</li>
<li>let和const声明的变量不会有变量提升，也不可以重复声明</li>
<li>在循环中比较适合绑定块级作用域，这样就可以把声明的计数器变量限制在循环内部。</li>
</ul>
<h4 id="作用域链"><a class="markdownIt-Anchor" href="#作用域链"></a> 作用域链</h4>
<p>在当前作用域中查找所需变量，但是该作用域没有这个变量，那这个变量就是自由变量。如果在自己作用域找不到该变量就去父级作用域查找，依次向上级作用域查找，直到访问到window对象就被终止，这一层层的关系就是作用域链。</p>
<p>作用域链的作用是<strong>保证对执行环境有权访问的所有变量和函数的有序访问，通过作用域链，可以访问到外层环境的变量和函数。</strong></p>
<p>作用域链的本质上是一个指向变量对象的指针列表。变量对象是一个包含了执行环境中所有变量和函数的对象。作用域链的前端始终都是当前执行上下文的变量对象。全局执行上下文的变量对象（也就是全局对象）始终是作用域链的最后一个对象。</p>
<p>当查找一个变量时，如果当前执行环境中没有找到，可以沿着作用域链向后查找。</p>
<h3 id="对执行上下文的理解"><a class="markdownIt-Anchor" href="#对执行上下文的理解"></a> 对执行上下文的理解</h3>
<h4 id="1-执行上下文类型"><a class="markdownIt-Anchor" href="#1-执行上下文类型"></a> ① 执行上下文类型</h4>
<p><strong>（1）全局执行上下文</strong></p>
<p>任何不在函数内部的都是全局执行上下文，它首先会创建一个全局的window对象，并且设置this的值等于这个全局对象，一个程序中只有一个全局执行上下文。</p>
<p><strong>（2）函数执行上下文</strong></p>
<p>当一个函数被调用时，就会为该函数创建一个新的执行上下文，函数的上下文可以有任意多个。</p>
<p><strong>（3）</strong><code>**eval**</code><strong>函数执行上下文</strong></p>
<p>执行在eval函数中的代码会有属于他自己的执行上下文，不过eval函数不常使用，不做介绍。</p>
<h4 id="2-执行上下文栈"><a class="markdownIt-Anchor" href="#2-执行上下文栈"></a> ② 执行上下文栈</h4>
<ul>
<li>JavaScript引擎使用执行上下文栈来管理执行上下文</li>
<li>当JavaScript执行代码时，首先遇到全局代码，会创建一个全局执行上下文并且压入执行栈中，每当遇到一个函数调用，就会为该函数创建一个新的执行上下文并压入栈顶，引擎会执行位于执行上下文栈顶的函数，当函数执行完成之后，执行上下文从栈中弹出，继续执行下一个上下文。当所有的代码都执行完毕之后，从栈中弹出全局执行上下文。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">let a = &#x27;Hello World!&#x27;;</span><br><span class="line">function first() &#123;</span><br><span class="line">  console.log(&#x27;Inside first function&#x27;);</span><br><span class="line">  second();</span><br><span class="line">  console.log(&#x27;Again inside first function&#x27;);</span><br><span class="line">&#125;</span><br><span class="line">function second() &#123;</span><br><span class="line">  console.log(&#x27;Inside second function&#x27;);</span><br><span class="line">&#125;</span><br><span class="line">first();</span><br><span class="line">//执行顺序</span><br><span class="line">//先执行second(),在执行first()</span><br></pre></td></tr></table></figure>
<h4 id="3-创建执行上下文"><a class="markdownIt-Anchor" href="#3-创建执行上下文"></a> ③ 创建执行上下文</h4>
<p>创建执行上下文有两个阶段：<strong>创建阶段</strong>和<strong>执行阶段</strong></p>
<p><strong>1）创建阶段</strong></p>
<p>（1）this绑定</p>
<ul>
<li>在全局执行上下文中，this指向全局对象（window对象）</li>
<li>在函数执行上下文中，this指向取决于函数如何调用。如果它被一个引用对象调用，那么 this 会被设置成那个对象，否则 this 的值被设置为全局对象或者 undefined</li>
</ul>
<p>（2）创建词法环境组件</p>
<ul>
<li>词法环境是一种有<strong>标识符——变量映射</strong>的数据结构，标识符是指变量/函数名，变量是对实际对象或原始数据的引用。</li>
<li>词法环境的内部有两个组件：<strong>加粗样式</strong>：环境记录器:用来储存变量个函数声明的实际位置<strong>外部环境的引用</strong>：可以访问父级作用域</li>
</ul>
<p>（3）创建变量环境组件</p>
<ul>
<li>变量环境也是一个词法环境，其环境记录器持有变量声明语句在执行上下文中创建的绑定关系。</li>
</ul>
<p><strong>2）执行阶段</strong></p>
<p>此阶段会完成对变量的分配，最后执行完代码。</p>
<p><strong>简单来说执行上下文就是指：</strong></p>
<p>在执行一点JS代码之前，需要先解析代码。解析的时候会先创建一个全局执行上下文环境，先把代码中即将执行的变量、函数声明都拿出来，变量先赋值为undefined，函数先声明好可使用。这一步执行完了，才开始正式的执行程序。</p>
<p>在一个函数执行之前，也会创建一个函数执行上下文环境，跟全局执行上下文类似，不过函数执行上下文会多出this、arguments和函数的参数。</p>
<ul>
<li>全局上下文：变量定义，函数声明</li>
<li>函数上下文：变量定义，函数声明，<code>this</code>，`arguments</li>
</ul>
]]></content>
      <categories>
        <category>Web</category>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>Web</tag>
        <tag>随手记</tag>
        <tag>前端</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>【随手记】记录一次测试环境短信服务签名出错</title>
    <url>/posts/d8031d5c.html</url>
    <content><![CDATA[<h2 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言</h2>
<p>公司一个项目完成本地开发后，上测试环境部署，出现了收发短信业务签名不一致的情况，具体表现客户身份对应的父公司签名，收到短信签名确实子公司，一番排查后，结果却让人哭笑不得……</p>
<h2 id="解决过程"><a class="markdownIt-Anchor" href="#解决过程"></a> 解决过程</h2>
<p>1、先看看腾讯云短信功能的签名和模版有没有失效</p>
<p>签名和模版状态都正常</p>
<p>2、克隆项目至本地，先本地跑起来再说</p>
<blockquote>
<p>免责声明：代码不是俺写的，俺就是个救火的。</p>
</blockquote>
<p>简单看了下函数逻辑，根据数据库中获取的客户信息，确认对应发送的短信类型 <code>sendType</code>，再根据字典表确认 <code>sendType</code> 对应的场景值 <code>sceneId</code>，每一个场景值对应着腾讯云短信服务的短信模版，决定了短信签名和内容。</p>
<p>打断点，本地环境下各项参数都没问题，收到的短信也正常，先重新打包扔到测试环境看看。</p>
<p>不出意外地出了意外，短信依然签名出错。</p>
<p>3、排查业务所在平台的短信发送记录</p>
<p>翻开对应的历史记录，顿觉大事不妙，为啥哥们本地的历史记录和测试环境不同啊，不都是从数据库里抓的吗？</p>
<p>等等，数据库！点开 <code>git commit</code>，找到写这个功能的同事，薅来了测试数据库的账号密码，<code>navicat</code> 打开记录场景值的数据表一看，签名类型和场景值都没问题啊？总不能是判断没执行吧。</p>
<p>在代码的发送类型判断并赋值场景值埋了日志，如果进行赋值操作就打印，同时打印赋值前后的 <code>sendType</code> 和 <code>sceneId</code>。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.sa.net/2024/04/03/iaYCTkxOwAP4jUh.png" alt="" /></p>
<p>部署后往 <code>rancher</code> 里一蹲，md，一蹲一个不吱声( ‵o′)</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.sa.net/2024/04/03/FrKUN1zQLBXRknW.png" alt="" /></p>
<p>测试环境下压根就没走判断 <code>sendType</code> 后对场景值赋值的语句，万能的群友提问，为什么日志中 <code>sendType</code>值在第二行才打印，模版id的日志却在同一行？</p>
<p>特殊符号……</p>
<p>4、排查数据库</p>
<p>打开 navicat 对应单元格的文本内容，显示如下：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.sa.net/2024/04/03/pZ4GelWovJNIQsR.png" alt="" /></p>
<p>一切很明显了，<code>SEND_TYPE</code> 类型为 <code>String</code> ，可视化工具显示单元格内容的最后一行，实际值为 ‘\n311696’。</p>
<p>哪个开发，测试环境改数据加回车的……</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.sa.net/2024/04/03/rLK61TbWpiDOtNX.jpg" style="zoom:50%;" />]]></content>
      <categories>
        <category>Web</category>
        <category>运维</category>
      </categories>
      <tags>
        <tag>随手记</tag>
        <tag>腾讯云短信</tag>
        <tag>Java</tag>
        <tag>数据库</tag>
      </tags>
  </entry>
  <entry>
    <title>【项目总结】vue3-shop-cms</title>
    <url>/posts/1b316398.html</url>
    <content><![CDATA[<h2 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言</h2>
<p>在完成基于 Vue3 和 TypeScript 的商城后台管理系统项目后，总结的学习笔记。项目原作者coderwhy</p>
<p><a href="https://github.com/bluehyssopu/vue3-shop-cms">项目地址</a> <a href="https://vue3admin.kzmqvq.com">在线演示</a></p>
<h2 id="知识点"><a class="markdownIt-Anchor" href="#知识点"></a> 知识点</h2>
<h3 id="表格时间格式化"><a class="markdownIt-Anchor" href="#表格时间格式化"></a> 表格时间格式化</h3>
<p>使用 Element-Plus 的表格组件时，用于规范用户管理的注册时间。将 <code>formatUtcString</code> 函数作为一个工具函数存放在<code>utils</code> 文件夹下，将其全局注册 <code>registerProperties</code>。</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> dayjs <span class="keyword">from</span> <span class="string">&#x27;dayjs&#x27;</span></span><br><span class="line"><span class="keyword">import</span> utc <span class="keyword">from</span> <span class="string">&#x27;dayjs/plugin/utc&#x27;</span></span><br><span class="line"></span><br><span class="line">dayjs.<span class="title function_">extend</span>(utc)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">DATE_TIME_FORMAT</span> = <span class="string">&#x27;YYYY-MM-DD HH:mm:ss&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">formatUtcString</span>(<span class="params"></span></span><br><span class="line"><span class="params">  utcString: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">  format: <span class="built_in">string</span> = DATE_TIME_FORMAT</span></span><br><span class="line"><span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> dayjs.<span class="title function_">utc</span>(utcString).<span class="title function_">utcOffset</span>(<span class="number">8</span>).<span class="title function_">format</span>(format)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">App</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; formatUtcString &#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/date-format&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">registerProperties</span>(<span class="params">app: App</span>) &#123;</span><br><span class="line">  app.<span class="property">config</span>.<span class="property">globalProperties</span>.<span class="property">$filters</span> = &#123;</span><br><span class="line">    <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;foo&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">formatTime</span>(<span class="params">value: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="title function_">formatUtcString</span>(value)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当使用表格组件时，借助列中的插槽进行 <code>formatTime</code> 处理</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template #createAt=&quot;scope&quot;&gt;</span><br><span class="line">  &lt;span&gt;&#123;&#123; $filters.formatTime(scope.row.createAt) &#125;&#125;&lt;/span&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;template #updateAt=&quot;scope&quot;&gt;</span><br><span class="line">  &lt;span&gt;&#123;&#123; $filters.formatTime(scope.row.updateAt) &#125;&#125;&lt;/span&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<h3 id="表格组件的封装"><a class="markdownIt-Anchor" href="#表格组件的封装"></a> 表格组件的封装</h3>
<ol>
<li>把表头、表格的内容、表格页码跳转作为表格的基本元素封装起来(base-ui/table)，代码结构如下</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2022/09/05/oz39r1gKcH8lRaZ.jpg" alt="table的封装.jpg" /></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;hy-table&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;header&quot;&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;el-table&gt;</span><br><span class="line">    &lt;/el-table&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;div class=&quot;footer&quot; v-if=&quot;showFooter&quot;&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; defineComponent &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">export default defineComponent(&#123;</span><br><span class="line">  props: &#123;</span><br><span class="line">    title: &#123;</span><br><span class="line">      type: String,</span><br><span class="line">      default: &#x27;&#x27;</span><br><span class="line">    &#125;,</span><br><span class="line">		...</span><br><span class="line">  &#125;,</span><br><span class="line">  emits: [&#x27;selectionChange&#x27;, &#x27;update:page&#x27;],</span><br><span class="line">  setup(props, &#123; emit &#125;) &#123;</span><br><span class="line">    const handleSelectionChange = (value: any) =&gt; &#123;</span><br><span class="line">      emit(&#x27;selectionChange&#x27;, value)</span><br><span class="line">    &#125;</span><br><span class="line">		...</span><br><span class="line"></span><br><span class="line">    return &#123;</span><br><span class="line">      handleSelectionChange,</span><br><span class="line">		  ...</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&quot;less&quot;&gt;</span><br><span class="line">  </span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<p>完整代码如下</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;hy-table&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;header&quot;&gt;</span><br><span class="line">      &lt;slot name=&quot;header&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;title&quot;&gt;&#123;&#123; title &#125;&#125;&lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;handler&quot;&gt;</span><br><span class="line">          &lt;slot name=&quot;headerHandler&quot;&gt;&lt;/slot&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/slot&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;el-table</span><br><span class="line">      :data=&quot;listData&quot;</span><br><span class="line">      border</span><br><span class="line">      style=&quot;width: 100%&quot;</span><br><span class="line">      @selection-change=&quot;handleSelectionChange&quot;</span><br><span class="line">      v-bind=&quot;childrenProps&quot;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;el-table-column</span><br><span class="line">        v-if=&quot;showSelectColumn&quot;</span><br><span class="line">        type=&quot;selection&quot;</span><br><span class="line">        align=&quot;center&quot;</span><br><span class="line">        width=&quot;60&quot;</span><br><span class="line">      &gt;&lt;/el-table-column&gt;</span><br><span class="line">      &lt;el-table-column</span><br><span class="line">        v-if=&quot;showIndexColumn&quot;</span><br><span class="line">        type=&quot;index&quot;</span><br><span class="line">        label=&quot;序号&quot;</span><br><span class="line">        align=&quot;center&quot;</span><br><span class="line">        width=&quot;80&quot;</span><br><span class="line">      &gt;&lt;/el-table-column&gt;</span><br><span class="line">      &lt;template v-for=&quot;propItem in propList&quot; :key=&quot;propItem.prop&quot;&gt;</span><br><span class="line">        &lt;el-table-column v-bind=&quot;propItem&quot; align=&quot;center&quot; show-overflow-tooltip&gt;</span><br><span class="line">          &lt;template #default=&quot;scope&quot;&gt;</span><br><span class="line">            &lt;slot :name=&quot;propItem.slotName&quot; :row=&quot;scope.row&quot;&gt;</span><br><span class="line">              &#123;&#123; scope.row[propItem.prop] &#125;&#125;</span><br><span class="line">            &lt;/slot&gt;</span><br><span class="line">          &lt;/template&gt;</span><br><span class="line">        &lt;/el-table-column&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/el-table&gt;</span><br><span class="line">    &lt;div class=&quot;footer&quot; v-if=&quot;showFooter&quot;&gt;</span><br><span class="line">      &lt;slot name=&quot;footer&quot;&gt;</span><br><span class="line">        &lt;el-pagination</span><br><span class="line">          @size-change=&quot;handleSizeChange&quot;</span><br><span class="line">          @current-change=&quot;handleCurrentChange&quot;</span><br><span class="line">          :current-page=&quot;page.currentPage&quot;</span><br><span class="line">          :page-size=&quot;page.pageSize&quot;</span><br><span class="line">          :page-sizes=&quot;[10, 20, 30]&quot;</span><br><span class="line">          layout=&quot;total, sizes, prev, pager, next, jumper&quot;</span><br><span class="line">          :total=&quot;listCount&quot;</span><br><span class="line">        &gt;</span><br><span class="line">        &lt;/el-pagination&gt;</span><br><span class="line">      &lt;/slot&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; defineComponent &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">export default defineComponent(&#123;</span><br><span class="line">  props: &#123;</span><br><span class="line">    title: &#123;</span><br><span class="line">      type: String,</span><br><span class="line">      default: &#x27;&#x27;</span><br><span class="line">    &#125;,</span><br><span class="line">    listData: &#123;</span><br><span class="line">      type: Array,</span><br><span class="line">      required: true</span><br><span class="line">    &#125;,</span><br><span class="line">    listCount: &#123;</span><br><span class="line">      type: Number,</span><br><span class="line">      default: 0</span><br><span class="line">    &#125;,</span><br><span class="line">    propList: &#123;</span><br><span class="line">      type: Array,</span><br><span class="line">      required: true</span><br><span class="line">    &#125;,</span><br><span class="line">    showIndexColumn: &#123;</span><br><span class="line">      type: Boolean,</span><br><span class="line">      default: false</span><br><span class="line">    &#125;,</span><br><span class="line">    showSelectColumn: &#123;</span><br><span class="line">      type: Boolean,</span><br><span class="line">      default: false</span><br><span class="line">    &#125;,</span><br><span class="line">    page: &#123;</span><br><span class="line">      type: Object,</span><br><span class="line">      default: () =&gt; (&#123; currentPage: 0, pageSize: 10 &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    childrenProps: &#123;</span><br><span class="line">      type: Object,</span><br><span class="line">      default: () =&gt; (&#123;&#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    showFooter: &#123;</span><br><span class="line">      type: Boolean,</span><br><span class="line">      default: true</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  emits: [&#x27;selectionChange&#x27;, &#x27;update:page&#x27;],</span><br><span class="line">  setup(props, &#123; emit &#125;) &#123;</span><br><span class="line">    const handleSelectionChange = (value: any) =&gt; &#123;</span><br><span class="line">      emit(&#x27;selectionChange&#x27;, value)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    const handleCurrentChange = (currentPage: number) =&gt; &#123;</span><br><span class="line">      emit(&#x27;update:page&#x27;, &#123; ...props.page, currentPage &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    const handleSizeChange = (pageSize: number) =&gt; &#123;</span><br><span class="line">      emit(&#x27;update:page&#x27;, &#123; ...props.page, pageSize &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return &#123;</span><br><span class="line">      handleSelectionChange,</span><br><span class="line">      handleCurrentChange,</span><br><span class="line">      handleSizeChange</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&quot;less&quot;&gt;</span><br><span class="line">.header &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  height: 45px;</span><br><span class="line">  padding: 0 5px;</span><br><span class="line">  justify-content: space-between;</span><br><span class="line">  align-items: center;</span><br><span class="line"></span><br><span class="line">  .title &#123;</span><br><span class="line">    font-size: 20px;</span><br><span class="line">    font-weight: 700;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .handler &#123;</span><br><span class="line">    align-items: center;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.footer &#123;</span><br><span class="line">  margin-top: 15px;</span><br><span class="line"></span><br><span class="line">  .el-pagination &#123;</span><br><span class="line">    text-align: right;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>由于页面内容的重合(用户管理表、商品管理表、角色管理表、菜单管理表等)，把页面内容的呈现作为第二层封装(components/page-content)。具体表现在 是否选中(index)、编号(id)、创建和编辑按钮等。代码结构如下</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;page-content&quot;&gt;</span><br><span class="line">    &lt;hy-table</span><br><span class="line">      :listData=&quot;dataList&quot;</span><br><span class="line">      :listCount=&quot;dataCount&quot;</span><br><span class="line">      v-bind=&quot;contentTableConfig&quot;</span><br><span class="line">      v-model:page=&quot;pageInfo&quot;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;!-- 1.header中的插槽 --&gt;</span><br><span class="line">      &lt;template #headerHandler&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line"></span><br><span class="line">      &lt;!-- 2.列中的插槽 --&gt;</span><br><span class="line">      &lt;template #status=&quot;scope&quot;&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line"></span><br><span class="line">      &lt;template #createAt=&quot;scope&quot;&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line"></span><br><span class="line">      &lt;template #updateAt=&quot;scope&quot;&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line"></span><br><span class="line">      &lt;template #handler=&quot;scope&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;handle-btns&quot;&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line"></span><br><span class="line">      &lt;!-- 在page-content中动态插入剩余的插槽 --&gt;</span><br><span class="line">      &lt;template</span><br><span class="line">        v-for=&quot;item in otherPropSlots&quot;</span><br><span class="line">        :key=&quot;item.prop&quot;</span><br><span class="line">        #[item.slotName]=&quot;scope&quot;</span><br><span class="line">      &gt;</span><br><span class="line">        &lt;template v-if=&quot;item.slotName&quot;&gt;</span><br><span class="line">          &lt;slot :name=&quot;item.slotName&quot; :row=&quot;scope.row&quot;&gt;&lt;/slot&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/hy-table&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; defineComponent, computed, ref, watch &#125; from &#x27;vue&#x27;</span><br><span class="line">import &#123; useStore &#125; from &#x27;@/store&#x27;</span><br><span class="line">import &#123; usePermission &#125; from &#x27;@/hooks/use-permission&#x27;</span><br><span class="line"></span><br><span class="line">import HyTable from &#x27;@/base-ui/table&#x27;</span><br><span class="line"></span><br><span class="line">export default defineComponent(&#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    HyTable</span><br><span class="line">  &#125;,</span><br><span class="line">  props: &#123;</span><br><span class="line">  &#125;,</span><br><span class="line">  emits: [&#x27;newBtnClick&#x27;, &#x27;editBtnClick&#x27;],</span><br><span class="line">  setup(props, &#123; emit &#125;) &#123;</span><br><span class="line">    const store = useStore()</span><br><span class="line"></span><br><span class="line">    // 0.获取操作的权限</span><br><span class="line">    const isCreate = usePermission(props.pageName, &#x27;create&#x27;)</span><br><span class="line">    const isUpdate = usePermission(props.pageName, &#x27;update&#x27;)</span><br><span class="line">    const isDelete = usePermission(props.pageName, &#x27;delete&#x27;)</span><br><span class="line">    const isQuery = usePermission(props.pageName, &#x27;query&#x27;)</span><br><span class="line"></span><br><span class="line">    // 1.双向绑定pageInfo</span><br><span class="line">    const pageInfo = ref(&#123; currentPage: 1, pageSize: 10 &#125;)</span><br><span class="line">    watch(pageInfo, () =&gt; getPageData())</span><br><span class="line"></span><br><span class="line">    // 2.发送网络请求</span><br><span class="line">    const getPageData = (queryInfo: any = &#123;&#125;) =&gt; &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    getPageData()</span><br><span class="line"></span><br><span class="line">    // 3.从vuex中获取数据</span><br><span class="line">    const dataList = computed(() =&gt;</span><br><span class="line">      store.getters[`system/pageListData`](props.pageName)</span><br><span class="line">    )</span><br><span class="line">    const dataCount = computed(() =&gt;</span><br><span class="line">      store.getters[`system/pageListCount`](props.pageName)</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    // 4.获取其他的动态插槽名称</span><br><span class="line">    const otherPropSlots = props.contentTableConfig?.propList.filter(</span><br><span class="line"></span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    // 5.删除/编辑/新建操作</span><br><span class="line">    const handleDeleteClick = (item: any) =&gt; &#123;</span><br><span class="line">      </span><br><span class="line">    &#125;</span><br><span class="line">    const handleNewClick = () =&gt; &#123;</span><br><span class="line">      emit(&#x27;newBtnClick&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">    const handleEditClick = (item: any) =&gt; &#123;</span><br><span class="line">      emit(&#x27;editBtnClick&#x27;, item)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return &#123;</span><br><span class="line">      dataList,</span><br><span class="line">      getPageData,</span><br><span class="line">      dataCount,</span><br><span class="line">      pageInfo,</span><br><span class="line">      otherPropSlots,</span><br><span class="line">      isCreate,</span><br><span class="line">      isUpdate,</span><br><span class="line">      isDelete,</span><br><span class="line">      handleDeleteClick,</span><br><span class="line">      handleNewClick,</span><br><span class="line">      handleEditClick</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<p>完整代码如下</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;page-content&quot;&gt;</span><br><span class="line">    &lt;hy-table</span><br><span class="line">      :listData=&quot;dataList&quot;</span><br><span class="line">      :listCount=&quot;dataCount&quot;</span><br><span class="line">      v-bind=&quot;contentTableConfig&quot;</span><br><span class="line">      v-model:page=&quot;pageInfo&quot;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;!-- 1.header中的插槽 --&gt;</span><br><span class="line">      &lt;template #headerHandler&gt;</span><br><span class="line">        &lt;el-button</span><br><span class="line">          v-if=&quot;isCreate&quot;</span><br><span class="line">          type=&quot;primary&quot;</span><br><span class="line">          size=&quot;medium&quot;</span><br><span class="line">          @click=&quot;handleNewClick&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          新建用户</span><br><span class="line">        &lt;/el-button&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line"></span><br><span class="line">      &lt;!-- 2.列中的插槽 --&gt;</span><br><span class="line">      &lt;template #status=&quot;scope&quot;&gt;</span><br><span class="line">        &lt;el-button</span><br><span class="line">          plain</span><br><span class="line">          size=&quot;mini&quot;</span><br><span class="line">          :type=&quot;scope.row.enable ? &#x27;success&#x27; : &#x27;danger&#x27;&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          &#123;&#123; scope.row.enable ? &#x27;启用&#x27; : &#x27;禁用&#x27; &#125;&#125;</span><br><span class="line">        &lt;/el-button&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">      &lt;template #createAt=&quot;scope&quot;&gt;</span><br><span class="line">        &lt;span&gt;&#123;&#123; $filters.formatTime(scope.row.createAt) &#125;&#125;&lt;/span&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">      &lt;template #updateAt=&quot;scope&quot;&gt;</span><br><span class="line">        &lt;span&gt;&#123;&#123; $filters.formatTime(scope.row.updateAt) &#125;&#125;&lt;/span&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">      &lt;template #handler=&quot;scope&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;handle-btns&quot;&gt;</span><br><span class="line">          &lt;el-button</span><br><span class="line">            v-if=&quot;isUpdate&quot;</span><br><span class="line">            icon=&quot;el-icon-edit&quot;</span><br><span class="line">            size=&quot;mini&quot;</span><br><span class="line">            type=&quot;text&quot;</span><br><span class="line">            @click=&quot;handleEditClick(scope.row)&quot;</span><br><span class="line">          &gt;</span><br><span class="line">            编辑</span><br><span class="line">          &lt;/el-button&gt;</span><br><span class="line">          &lt;el-button</span><br><span class="line">            v-if=&quot;isDelete&quot;</span><br><span class="line">            icon=&quot;el-icon-delete&quot;</span><br><span class="line">            size=&quot;mini&quot;</span><br><span class="line">            type=&quot;text&quot;</span><br><span class="line">            @click=&quot;handleDeleteClick(scope.row)&quot;</span><br><span class="line">            &gt;删除&lt;/el-button</span><br><span class="line">          &gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line"></span><br><span class="line">      &lt;!-- 在page-content中动态插入剩余的插槽 --&gt;</span><br><span class="line">      &lt;template</span><br><span class="line">        v-for=&quot;item in otherPropSlots&quot;</span><br><span class="line">        :key=&quot;item.prop&quot;</span><br><span class="line">        #[item.slotName]=&quot;scope&quot;</span><br><span class="line">      &gt;</span><br><span class="line">        &lt;template v-if=&quot;item.slotName&quot;&gt;</span><br><span class="line">          &lt;slot :name=&quot;item.slotName&quot; :row=&quot;scope.row&quot;&gt;&lt;/slot&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/hy-table&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; defineComponent, computed, ref, watch &#125; from &#x27;vue&#x27;</span><br><span class="line">import &#123; useStore &#125; from &#x27;@/store&#x27;</span><br><span class="line">import &#123; usePermission &#125; from &#x27;@/hooks/use-permission&#x27;</span><br><span class="line"></span><br><span class="line">import HyTable from &#x27;@/base-ui/table&#x27;</span><br><span class="line"></span><br><span class="line">export default defineComponent(&#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    HyTable</span><br><span class="line">  &#125;,</span><br><span class="line">  props: &#123;</span><br><span class="line">    contentTableConfig: &#123;</span><br><span class="line">      type: Object,</span><br><span class="line">      require: true</span><br><span class="line">    &#125;,</span><br><span class="line">    pageName: &#123;</span><br><span class="line">      type: String,</span><br><span class="line">      required: true</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  emits: [&#x27;newBtnClick&#x27;, &#x27;editBtnClick&#x27;],</span><br><span class="line">  setup(props, &#123; emit &#125;) &#123;</span><br><span class="line">    const store = useStore()</span><br><span class="line"></span><br><span class="line">    // 0.获取操作的权限</span><br><span class="line">    const isCreate = usePermission(props.pageName, &#x27;create&#x27;)</span><br><span class="line">    const isUpdate = usePermission(props.pageName, &#x27;update&#x27;)</span><br><span class="line">    const isDelete = usePermission(props.pageName, &#x27;delete&#x27;)</span><br><span class="line">    const isQuery = usePermission(props.pageName, &#x27;query&#x27;)</span><br><span class="line"></span><br><span class="line">    // 1.双向绑定pageInfo</span><br><span class="line">    const pageInfo = ref(&#123; currentPage: 1, pageSize: 10 &#125;)</span><br><span class="line">    watch(pageInfo, () =&gt; getPageData())</span><br><span class="line"></span><br><span class="line">    // 2.发送网络请求</span><br><span class="line">    const getPageData = (queryInfo: any = &#123;&#125;) =&gt; &#123;</span><br><span class="line">      if (!isQuery) return</span><br><span class="line">      store.dispatch(&#x27;system/getPageListAction&#x27;, &#123;</span><br><span class="line">        pageName: props.pageName,</span><br><span class="line">        queryInfo: &#123;</span><br><span class="line">          offset: (pageInfo.value.currentPage - 1) * pageInfo.value.pageSize,</span><br><span class="line">          size: pageInfo.value.pageSize,</span><br><span class="line">          ...queryInfo</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    getPageData()</span><br><span class="line"></span><br><span class="line">    // 3.从vuex中获取数据</span><br><span class="line">    const dataList = computed(() =&gt;</span><br><span class="line">      store.getters[`system/pageListData`](props.pageName)</span><br><span class="line">    )</span><br><span class="line">    const dataCount = computed(() =&gt;</span><br><span class="line">      store.getters[`system/pageListCount`](props.pageName)</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    // 4.获取其他的动态插槽名称</span><br><span class="line">    const otherPropSlots = props.contentTableConfig?.propList.filter(</span><br><span class="line">      (item: any) =&gt; &#123;</span><br><span class="line">        if (item.slotName === &#x27;status&#x27;) return false</span><br><span class="line">        if (item.slotName === &#x27;createAt&#x27;) return false</span><br><span class="line">        if (item.slotName === &#x27;updateAt&#x27;) return false</span><br><span class="line">        if (item.slotName === &#x27;handler&#x27;) return false</span><br><span class="line">        return true</span><br><span class="line">      &#125;</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    // 5.删除/编辑/新建操作</span><br><span class="line">    const handleDeleteClick = (item: any) =&gt; &#123;</span><br><span class="line">      console.log(item)</span><br><span class="line">      store.dispatch(&#x27;system/deletePageDataAction&#x27;, &#123;</span><br><span class="line">        pageName: props.pageName,</span><br><span class="line">        id: item.id</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    const handleNewClick = () =&gt; &#123;</span><br><span class="line">      emit(&#x27;newBtnClick&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">    const handleEditClick = (item: any) =&gt; &#123;</span><br><span class="line">      emit(&#x27;editBtnClick&#x27;, item)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return &#123;</span><br><span class="line">      dataList,</span><br><span class="line">      getPageData,</span><br><span class="line">      dataCount,</span><br><span class="line">      pageInfo,</span><br><span class="line">      otherPropSlots,</span><br><span class="line">      isCreate,</span><br><span class="line">      isUpdate,</span><br><span class="line">      isDelete,</span><br><span class="line">      handleDeleteClick,</span><br><span class="line">      handleNewClick,</span><br><span class="line">      handleEditClick</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.page-content &#123;</span><br><span class="line">  padding: 20px;</span><br><span class="line">  border-top: 20px solid #f5f5f5;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>在各种表格页面使用，以 <code>user.vue</code> 页面为例</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2022/09/05/evYNpOWnHmZPGds.jpg" alt="user页面的使用.jpg" /></p>
]]></content>
      <categories>
        <category>项目总结</category>
      </categories>
      <tags>
        <tag>Vue3</tag>
        <tag>项目总结</tag>
        <tag>笔记</tag>
        <tag>后台管理系统</tag>
      </tags>
  </entry>
  <entry>
    <title>【项目总结】TypeScript基础</title>
    <url>/posts/1c5c8a7f.html</url>
    <content><![CDATA[<h2 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言</h2>
<p>本篇博客用于补充在商城后台管理系统中出现的 <code>TypeScript</code> 知识点。</p>
<h2 id="知识整理"><a class="markdownIt-Anchor" href="#知识整理"></a> 知识整理</h2>
<p><code>TypeScript</code>解决了<code>JavaScript</code>存在的很多设计缺陷，尤其是关于类型检测的。从开发者长远的角度来看，学习<code>TypeScript</code>有助于前端程序员培养 类型思维，这种思维方式对于完成大型项目尤为重要。个人用起来感觉很像<code>Java</code>。</p>
<h3 id="typescript的特点"><a class="markdownIt-Anchor" href="#typescript的特点"></a> TypeScript的特点</h3>
<ul>
<li>始于JavaScript，归于JavaScript</li>
<li>TypeScript是一个强大的工具，用于构建大型项目
<ul>
<li>类型允许JavaScript开发者在开发JavaScript应用程序时，使用高效的开发工具和常用操作，比如<mark class="hl-label blue">静态检查</mark> 和<mark class="hl-label blue">代码重构</mark> </li>
<li>类型是可选的，类型推断让一些类型的注释使你的代码的静态验证有很大的不同。类型让你<mark class="hl-label green">定义软件组件之间的接口</mark> 和洞察现有JavaScript库的行为；</li>
</ul>
</li>
<li>拥有先进的 JavaScript
<ul>
<li>TypeScript提供最新的和不断发展的JavaScript特性，包括那些来自2015年的ECMAScript和未来的提案中的特性，比如异步功能和Decorators，以帮助<mark class="hl-label green">建立健壮的组件</mark> ；</li>
<li>这些特性为高可信应用程序开发时是可用的，但是会被编译成简洁的ECMAScript3（或更新版本）的JavaScript；(<code>babel</code>编译器的使用)</li>
</ul>
</li>
</ul>
<h3 id="变量声明"><a class="markdownIt-Anchor" href="#变量声明"></a> 变量声明</h3>
<p>在TypeScript中定义变量需要指定 标识符 的类型。声明了类型后TypeScript就会进行<mark class="hl-label blue">类型检测</mark> ，声明的类型可以称之为类型注解； 比如我们声明一个message，完整的写法如下：</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">message</span>: <span class="built_in">string</span> = <span class="string">&quot;Hello World&quot;</span></span><br></pre></td></tr></table></figure>
<p>如果我们在使用时赋值给<code>message</code>其他的类型，就会报错。</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line">message1 = <span class="number">123</span> <span class="comment">// Type &#x27;message&#x27; is not assignable to type &#x27;string&#x27;</span></span><br></pre></td></tr></table></figure>
<p>在开发中，有时候为了方便起见我们并不会在声明每一个变量时都写上对应的数据类型，我们更希望可以通过TypeScript本身的特性帮助我们推断出对应的变量类型：</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> message = <span class="string">&quot;Hello World&quot;</span></span><br><span class="line"><span class="comment">// 在一个变量第一次赋值时，ts会根据后面的赋值内容的类型，来推断出变量的类型</span></span><br><span class="line">message = <span class="number">123</span> <span class="comment">// // Type &#x27;message&#x27; is not assignable to type &#x27;string&#x27;</span></span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2022/09/06/e3aUzHWPL5mN6uo.png" alt="ts与js的关系" /></p>
<h3 id="数据类型"><a class="markdownIt-Anchor" href="#数据类型"></a> 数据类型</h3>
<p><code>TypeScript</code>在<code>JavaScript</code>的基础上新增了一些数据类型。</p>
<p><strong>any类型</strong></p>
<p>在某些情况下，我们确实无法确定一个变量的类型，并且可能它会发生一些变化，这个时候我们可以使用any类型（类似于Dart语言中的dynamic类型）；</p>
<p>any类型有点像一种讨巧的TypeScript手段：我们可以对any类型的变量进行任何的操作，包括获取不存在的属性、方法；赋值任何的值，比如数字、字符串的值。偷懒时可以这么干qvq</p>
<p><strong>unknown类型</strong></p>
<p>unknown是TypeScript中比较特殊的一种类型，它用于描述类型不确定的变量。</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>): <span class="built_in">string</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;foo&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">bar</span>(<span class="params"></span>): <span class="built_in">number</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">123</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// unknown类型只能赋值给any和unknown类型</span></span><br><span class="line"><span class="comment">// any类型可以赋值给任意类型</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> flag = <span class="literal">true</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">result</span>: <span class="built_in">unknown</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (flag) &#123;</span><br><span class="line">  result = <span class="title function_">foo</span>()</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  result = <span class="title function_">bar</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> result === <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(result.<span class="property">length</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123;&#125;</span><br></pre></td></tr></table></figure>
<p><strong>void类型</strong></p>
<p>void通常用来指定一个没有返回值的函数； 如果一个函数我们没有写任何类型，那么它默认返回值的类型就是void，我们也可以显示的来指定返回值是void：</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params">num1: <span class="built_in">number</span>, num2: <span class="built_in">number</span></span>): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(num1 + num2)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params">num1: <span class="built_in">number</span>, num2: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(num1 + num2)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>never类型</strong></p>
<p>never 表示永远不会发生值的类型，以一个函数为例：</p>
<ul>
<li>如果一个函数中是一个死循环或者抛出一个异常，那么这个函数会返回东西吗？</li>
<li>不会，那么写void类型或者其他类型作为返回值类型都不合适，我们就可以使用never类型；</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>): <span class="built_in">never</span> &#123;</span><br><span class="line">  <span class="comment">// 死循环</span></span><br><span class="line">  <span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;123&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">bar</span>(<span class="params"></span>): <span class="built_in">never</span> &#123;</span><br><span class="line">  <span class="comment">// 抛出异常</span></span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>tuple类型</strong></p>
<p>tuple是元组类型，很多语言中也有这种数据类型，比如Python、Swift等。</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="attr">info</span>: [<span class="built_in">string</span>, <span class="built_in">number</span>, <span class="built_in">number</span>] = [<span class="string">&quot;why&quot;</span>, <span class="number">18</span>, <span class="number">1.88</span>]</span><br><span class="line"><span class="keyword">const</span> name = info[<span class="number">0</span>]</span><br><span class="line"><span class="keyword">const</span> age = info[<span class="number">1</span>]</span><br></pre></td></tr></table></figure>
<p>tuple和数组有什么区别呢？</p>
<p>首先，数组中通常建议存放相同类型的元素，不同类型的元素是不推荐放在数组中。（可以放在对象或者元组中）其次，元组中每个元素都有自己特性的类型，根据索引值获取到的值可以确定对应的类型；</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="attr">info</span>: (<span class="built_in">string</span> | <span class="built_in">number</span>)[] = [<span class="string">&quot;why&quot;</span>, <span class="number">18</span>, <span class="number">1.88</span>]</span><br><span class="line"><span class="keyword">const</span> item1 = info[<span class="number">0</span>] <span class="comment">// 不能确定类型</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">tinfo</span>: [<span class="built_in">string</span>, <span class="built_in">number</span>, <span class="built_in">number</span>] = [<span class="string">&quot;why&quot;</span>, <span class="number">18</span>, <span class="number">1.88</span>]</span><br><span class="line"><span class="keyword">const</span> item2 = tinfo[<span class="number">0</span>] <span class="comment">// 一定是string类型</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>项目总结</category>
      </categories>
      <tags>
        <tag>Vue3</tag>
        <tag>项目总结</tag>
        <tag>笔记</tag>
        <tag>后台管理系统</tag>
        <tag>TypeScript</tag>
      </tags>
  </entry>
  <entry>
    <title>在线密码生成器</title>
    <url>/posts/6eafdc3a.html</url>
    <content><![CDATA[<h2 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 📢前言</h2>
<p>代码取自开源项目<a href="https://github.com/bradtraversy/50projects50days">50projects50days</a>，用作个人学习和巩固三件套的知识，增加了注释，可能会有小改动。</p>
<p><a href="https://demo.kzmqvq.com/23/index.html">在线演示地址</a></p>
<h2 id="实现思路及效果"><a class="markdownIt-Anchor" href="#实现思路及效果"></a> 📝实现思路及效果</h2>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2022/05/31/KtnlhHzpXqOTgwI.png" alt="23-1" /></p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2022/05/31/takLJPmBX2COzRS.png" alt="23-2" style="zoom:80%;" />
<p>注意一下几点：</p>
<ol>
<li>各元素的位置与显示格式，尤其是对于justify-content，属性值为flex-start还是center</li>
<li>生成密码内容的位置不要先入为主想成input</li>
<li><code>calc</code>的用法，详情见代码注释</li>
<li>监听固定的几个按钮（复制、生成、5项规则），使用Math.random()生成所需字符，构建密码</li>
<li>复制原理的实现：将生成的字符串放置到新创建的textarea中，使用select()选中该区域的文本，使用copy命令复制成功后，将创建的textarea移除</li>
</ol>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://vip2.loli.io/2022/05/31/VolORgPFa5Tpzxd.png" alt="23-3" style="zoom:80%;" />
<h2 id="代码"><a class="markdownIt-Anchor" href="#代码"></a> 💻代码</h2>
<h3 id="indexhtml"><a class="markdownIt-Anchor" href="#indexhtml"></a> index.html</h3>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 引入图标库 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css&quot;</span> <span class="attr">integrity</span>=<span class="string">&quot;sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==&quot;</span> <span class="attr">crossorigin</span>=<span class="string">&quot;anonymous&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;style.css&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>随机密码生成<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 大盒子 存放 生成密码结果盒和密码格式设置盒 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 结果盒 包括结果框 和 复制按钮 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;result-container&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;result&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;btn&quot;</span> <span class="attr">id</span>=<span class="string">&quot;clipboard&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;far fa-clipboard&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 格式设置盒 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;settings&quot;</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 密码长度设置 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;setting&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span>密码长度<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;number&quot;</span> <span class="attr">id</span>=<span class="string">&quot;length&quot;</span> <span class="attr">min</span>=<span class="string">&quot;4&quot;</span> <span class="attr">max</span>=<span class="string">&quot;20&quot;</span> <span class="attr">value</span>=<span class="string">&quot;20&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 密码是否有大写字母 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;setting&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span>包括大写字母<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">id</span>=<span class="string">&quot;uppercase&quot;</span> <span class="attr">checked</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 小写字母 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;setting&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span>包括小写字母<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">id</span>=<span class="string">&quot;lowercase&quot;</span> <span class="attr">checked</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 数字 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;setting&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span>包括数字<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">id</span>=<span class="string">&quot;numbers&quot;</span> <span class="attr">checked</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 特殊符号 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;setting&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span>包括特殊符号<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">id</span>=<span class="string">&quot;symbols&quot;</span> <span class="attr">checked</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 按钮 生成结果 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-large&quot;</span> <span class="attr">id</span>=<span class="string">&quot;generate&quot;</span>&gt;</span>生成密码<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;script.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="stylecss"><a class="markdownIt-Anchor" href="#stylecss"></a> style.css</h3>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@import</span> url(<span class="string">&#x27;https://fonts.googleapis.com/css?family=Muli&amp;display=swap&#x27;</span>);</span><br><span class="line"></span><br><span class="line">* &#123;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#3b3b98</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">font-family</span>: <span class="string">&#x27;Muli&#x27;</span>, sans-serif;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">h2</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">0</span> <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#23235b</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">2px</span> <span class="number">10px</span> <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.2</span>);</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">350px</span>;</span><br><span class="line">  <span class="attribute">max-width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.result-container</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.4</span>);</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="comment">/* 注意 这里不是水平垂直居中 是从行首起始位置开始排列 */</span></span><br><span class="line">  <span class="attribute">justify-content</span>: flex-start;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line">  <span class="attribute">letter-spacing</span>: <span class="number">1px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">12px</span> <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* + 和 - 运算符的两边必须要有空白字符。比如，calc(50% -8px) 会被解析成为一个无效的表达式，解析结果是：一个百分比 后跟一个负数长度值。而加有空白字符的、有效的表达式 calc(8px + -50%) 会被解析成为：一个长度 后跟一个加号 再跟一个负百分比。 */</span></span><br><span class="line"><span class="comment">/* 教程链接:https://developer.mozilla.org/zh-CN/docs/Web/CSS/calc */</span></span><br><span class="line"><span class="selector-class">.result-container</span> <span class="selector-id">#result</span> &#123;</span><br><span class="line">  <span class="attribute">word-wrap</span>: break-word;</span><br><span class="line">  <span class="attribute">max-width</span>: <span class="built_in">calc</span>(<span class="number">100%</span> - <span class="number">40px</span>);</span><br><span class="line">  <span class="attribute">overflow-y</span>: scroll;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#result</span>::-webkit-scrollbar &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">1rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 复制按钮 */</span></span><br><span class="line"><span class="selector-class">.result-container</span> <span class="selector-class">.btn</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">40px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 所有按钮的基本样式 */</span></span><br><span class="line"><span class="selector-class">.btn</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: none;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#3b3b98</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">8px</span> <span class="number">12px</span>;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.btn-large</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.setting</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">justify-content</span>: space-between;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">15px</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="scriptjs"><a class="markdownIt-Anchor" href="#scriptjs"></a> script.js</h3>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 结果</span></span><br><span class="line"><span class="keyword">const</span> resultEl = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;result&#x27;</span>)</span><br><span class="line"><span class="comment">// 密码格式设置</span></span><br><span class="line"><span class="keyword">const</span> lengthEl = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;length&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> uppercaseEl = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;uppercase&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> lowercaseEl = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;lowercase&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> symbolsEl = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;symbols&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> numbersEl = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;numbers&#x27;</span>)</span><br><span class="line"><span class="comment">// 生成按钮</span></span><br><span class="line"><span class="keyword">const</span> generateEl = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;generate&#x27;</span>)</span><br><span class="line"><span class="comment">// 复制按钮</span></span><br><span class="line"><span class="keyword">const</span> clipboardEl = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;clipboard&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 生成随机数</span></span><br><span class="line"><span class="keyword">const</span> randomFunc = &#123;</span><br><span class="line">  <span class="attr">lower</span>: getRandomLower,</span><br><span class="line">  <span class="attr">upper</span>: getRandomUpper,</span><br><span class="line">  <span class="attr">number</span>: getRandomNumber,</span><br><span class="line">  <span class="attr">symbol</span>: getRandomSymbol</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将生成的随机数 根据是否勾选该类型 构建成密码</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">generatedPassword</span>(<span class="params">lower, upper, number, symbol, length</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> generatedPassword = <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="keyword">const</span> typesCount = lower + upper + number + symbol</span><br><span class="line">  <span class="keyword">const</span> typesArr = [&#123;lower&#125;, &#123;upper&#125;, &#123;number&#125;, &#123;symbol&#125;].<span class="title function_">filter</span>(<span class="function"><span class="params">item</span> =&gt;</span> <span class="title class_">Object</span>.<span class="title function_">values</span>(item)[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span>(typesCount === <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; length; i += typesCount) &#123;</span><br><span class="line">    typesArr.<span class="title function_">forEach</span>(<span class="function"><span class="params">type</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> funcName = <span class="title class_">Object</span>.<span class="title function_">keys</span>(type)[<span class="number">0</span>]</span><br><span class="line">      generatedPassword += randomFunc[funcName]()</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> finalPassword = generatedPassword.<span class="title function_">slice</span>(<span class="number">0</span>, length)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> finalPassword</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getRandomLower</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// String.fromCharCode() 接受一个指定的Unicode值，然后返回一个字符串。</span></span><br><span class="line">  <span class="comment">// Math.floor() 返回小于或等于一个给定数字的最大整数 即向下取整</span></span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">String</span>.<span class="title function_">fromCharCode</span>(<span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">26</span> + <span class="number">97</span>))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getRandomUpper</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">String</span>.<span class="title function_">fromCharCode</span>(<span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">26</span>) + <span class="number">65</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getRandomNumber</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">String</span>.<span class="title function_">fromCharCode</span>(<span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">10</span>) + <span class="number">48</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getRandomSymbol</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 这里打表 按下标取符号</span></span><br><span class="line">  <span class="keyword">const</span> symbols = <span class="string">&#x27;!@#$%^&amp;*()&#123;&#125;[]=&lt;&gt;/,.&#x27;</span></span><br><span class="line">  <span class="keyword">return</span> symbols[<span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * symbols.<span class="property">length</span>)]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 两个按钮的监听</span></span><br><span class="line">clipboardEl.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 创建一个文本域 赋值为已经生成的密码 调用select方法 用于选择该元素中的文本。</span></span><br><span class="line">  <span class="keyword">const</span> textarea = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;textarea&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> password = resultEl.<span class="property">innerText</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span>(!password) &#123; <span class="keyword">return</span> &#125;</span><br><span class="line"></span><br><span class="line">  textarea.<span class="property">value</span> = password</span><br><span class="line">  <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(textarea)</span><br><span class="line">  textarea.<span class="title function_">select</span>()</span><br><span class="line">  <span class="comment">// copy</span></span><br><span class="line">  <span class="comment">// 拷贝当前选中内容到剪贴板。启用这个功能的条件因浏览器不同而不同，而且不同时期，其启用条件也不尽相同。使用之前请检查浏览器兼容表，以确定是否可用。</span></span><br><span class="line">  <span class="comment">// 需要注意 document.execCommand方法已废弃  Try to avoid using it.</span></span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">execCommand</span>(<span class="string">&#x27;copy&#x27;</span>)</span><br><span class="line">  <span class="comment">// 复制成功后 删除该元素</span></span><br><span class="line">  textarea.<span class="title function_">remove</span>()</span><br><span class="line">  <span class="title function_">alert</span>(<span class="string">&#x27;密码成功复制至剪贴板！&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">generateEl.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> length = +lengthEl.<span class="property">value</span></span><br><span class="line">  <span class="keyword">const</span> hasLower = lowercaseEl.<span class="property">checked</span></span><br><span class="line">  <span class="keyword">const</span> hasUpper = uppercaseEl.<span class="property">checked</span></span><br><span class="line">  <span class="keyword">const</span> hasNumber = numbersEl.<span class="property">checked</span></span><br><span class="line">  <span class="keyword">const</span> hasSymbol = symbolsEl.<span class="property">checked</span></span><br><span class="line"></span><br><span class="line">  resultEl.<span class="property">innerText</span> = <span class="title function_">generatedPassword</span>(hasLower, hasUpper, hasNumber, hasSymbol, length)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Web</category>
        <category>实现50个小功能</category>
      </categories>
      <tags>
        <tag>Web</tag>
        <tag>html</tag>
        <tag>css</tag>
        <tag>JavaScript</tag>
        <tag>js</tag>
        <tag>开源项目</tag>
      </tags>
  </entry>
  <entry>
    <title>剑来</title>
    <url>/posts/817d7092.html</url>
    <content><![CDATA[<blockquote>
<p>请不要把陌生人的些许善意，视为珍稀的瑰宝，却把身边亲近人的全部付出，当做天经地义的事情，对其视而不见</p>
<p>​																																	 ——第一章 惊蛰</p>
</blockquote>
<blockquote>
<p>天道崩塌，我陈平安，唯有一剑，可搬山，断江，倒海，降妖，镇魔，敕神，摘星，摧城，开天！</p>
<p>​																																	——第八十四章</p>
</blockquote>
<blockquote>
<p>陈平安深呼吸一口气，趴在桌上，想到最后，觉得还是姚老头的一句话最容易想通，</p>
<p>“该是你的，就拿好别丢。不该是你的，想都别想。”</p>
<p>​																																	——第八十五章 大考落幕</p>
</blockquote>
<blockquote>
<p>阿良豪迈笑道：“你们四个，一定要记住，每一个强者的自由，都应该以弱者的自由作为边界！真正的强者，他的对手，是天地间无形的规矩，世俗力量的强大惯性，是人皆有生老病死的铁律，是这些看不见的存在。从来没有一个强者，因为践踏弱者而强大，必然是遇强则强，愈挫愈勇。”</p>
<p>​																																	——第一百一十二章 强者</p>
</blockquote>
<blockquote>
<p>老秀才已经缓缓起身，看着三个孩子，“坐而论道，是很好的事情。”</p>
<p>老秀才笑道：“但是别忘了，起而行之，则更重要，否则一切道德文章就没了立身之处。”</p>
<p>老秀才蓦然开始自得其乐，笑逐颜开，双手负后，摇头晃脑地走出屋子，啧啧道：“老先生坐而论道，少年郎起而行之，善，大善！”</p>
<p>​																																	——第一百五十四章 老先生坐而论道</p>
</blockquote>
<blockquote>
<p>“少年的肩膀，就该这样才对嘛，什么家国仇恨，浩然正气的，都不要急，先挑起清风明月、杨柳依依和草长莺飞，少年郎的肩头，本就应当满是美好的事物啊。”</p>
<p>​																																	——第一百五十六章 少年肩头挑着草长莺飞</p>
</blockquote>
<blockquote>
<p>当这个世界给予自己善意的时候，一定要好好珍惜，要惜福，无论大小。</p>
<p>所以烧窑的半个师傅，姚老头说过那句话，陈平安当时就觉得是天底下最好的道理。</p>
<p>是你的就好好抓住，不是你的就不要多想。</p>
<p>天底下没谁是欠你的，但是你欠了别人，就别不当回事。</p>
<p>​																																	——第二百零三章 酒鬼少年郎</p>
</blockquote>
<blockquote>
<p>老人抬起手臂，狠狠灌了一大口烈酒，随手将那只养剑葫芦抛给少年，对着远方朗声大笑：“昔年远游四方，一肚子豪言壮语，不吐不快！”</p>
<p>老人站在崖畔，一脚踏出，望向天空，“当我行走于天地间，骄阳烈日，明月当空，得问我一句，天地之间足够亮堂否？” 老人转头，笑问道：“陈平安！你觉得够不够？！”</p>
<p>陈平安刚要低头喝一口酒，听到问题后，只得抬起头，迷迷糊糊道：“不太够？”</p>
<p>老人哈哈大笑，伸手指向远方，“当我行走于江湖上，大江滔滔，河水滚滚，得问我一句，江河之水足够解渴否？”</p>
<p>陈平安抽空连忙喝了口酒，听到老人的豪言之后，没来由也跟着有些豪气了，一手握酒葫芦，一手握拳捶在膝盖上，跟着凑热闹瞎起劲，大声道：“不够！”</p>
<p>老人又言，“当我行走于群山巅，琼楼玉宇，云海仙人，得问我一句，山顶罡风足够凉快否？”</p>
<p>满脸涨红的陈平安又喝过了大口酒，借着后劲十足的酒劲，满脸光彩，破天荒地放肆大笑道：“不够不够！远远不够！酒不够，江水山风不够！都不够！”</p>
<p>​																															——第二百零三章 酒鬼少年郎</p>
</blockquote>
<blockquote>
<p>阿良指了指天上，“真正的强者不在于什么无敌，而在于活着，输得再惨都别死了，而是每次都能够站起来，再次愤然出拳出剑！”</p>
<p>​																																	——第二百零八章 去也</p>
</blockquote>
<blockquote>
<p>少年当时的醉话酒话是：齐先生，我想明白了，对世界不要失去希望，除了一定要好好活着之外，其实还有一层意思，就是当我们对这个世界给予善意后，如果非但没有得到善意的回报，甚至只有恶意，这个时候，能够不失望，才是真正的希望。齐先生，我现在道理已经想明白了，但是暂时还做不到，我喝过了酒，明天就努力……</p>
<p>老舟子其实已经将近五百岁高龄，见过无数人，经历过无数事，听过无数话，还是觉得少年这番话，说得很有嚼头，用来下酒正好，两坛不太够。</p>
<p>​																																——第二百六十六章 磨损心中万古刀</p>
</blockquote>
<blockquote>
<p>“自童年起，我便独自一人，照顾着历代星辰。”</p>
<p>​																																——第二百七十八章 武无第二，拳高天外</p>
</blockquote>
]]></content>
      <categories>
        <category>文案摘录</category>
      </categories>
      <tags>
        <tag>中二病</tag>
        <tag>剑来</tag>
        <tag>小说</tag>
        <tag>文摘</tag>
      </tags>
  </entry>
  <entry>
    <title>图形学上机实验</title>
    <url>/posts/b2a61c1f.html</url>
    <content><![CDATA[<p>实验环境：win10、VS 2017、OPenGL库</p>
<h2 id="实验一-基于opengl的二维图形绘制"><a class="markdownIt-Anchor" href="#实验一-基于opengl的二维图形绘制"></a> 实验一 基于OpenGL的二维图形绘制</h2>
<h3 id="要求"><a class="markdownIt-Anchor" href="#要求"></a> 要求</h3>
<p>编程实现绘制一个五角星(基于OpenGL)，效果如下图所示</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/TZqWjuDi75HAsdn.png" width=600px>
<h3 id="问题分析"><a class="markdownIt-Anchor" href="#问题分析"></a> 问题分析</h3>
<p>可以将一个五角星划分为10个三角形，假设五角星的各边长，分别计算出10个定点的坐标，然后逐个绘制三角形，将其拼接为五角星；</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/gOeuDJbwP1fIRoj.png">
<p>也可以利用参数方程，如下图所示，设大圆和小圆的半径分别为R、r，已知夹角为37度，在循环中计算绘制三角形。</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/npcrVQGNHIo8jbv.png" width=600px>
<h3 id="代码"><a class="markdownIt-Anchor" href="#代码"></a> 代码</h3>
<p>ProjectOne.cpp</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;GL/glew.h&gt;</span><span class="comment">//OpenGL库</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;GL/glut.h&gt;</span><span class="comment">//OpenGL辅助库</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;math.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> comment(linker, <span class="string">&quot;/subsystem:\&quot;windows\&quot; /entry:\&quot;mainCRTStartup\&quot;&quot;</span>) <span class="comment">//这句是不让控制台窗体出现，如果想要出现，去掉即可。</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 明确 计算三角函数 需要 theta * pi / 180</span></span><br><span class="line"><span class="comment">// 由于 两个三角形的theta角有36度的差值</span></span><br><span class="line"><span class="comment">// 点的坐标为 x = x0 + r(R) * sin(cos) theta</span></span><br><span class="line"><span class="comment">// 对于大圆 theta 为（ 0 + 72 * i ）* pi/180 == 0.4i * pi </span></span><br><span class="line"><span class="comment">// 小圆theta 为 （36 + 72 * i） * pi / 180 == 0.2*pi + 0.4i * pi</span></span><br><span class="line"><span class="comment">// 两者相差只有 0.2 * pi</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">(<span class="type">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">glClearColor</span>(<span class="number">1.0</span>, <span class="number">1.0</span>, <span class="number">1.0</span>, <span class="number">1.0</span>);<span class="comment">//设置背景色白色</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">DrawStar1</span><span class="params">(<span class="type">float</span> cx, <span class="type">float</span> cy, <span class="type">float</span> R, <span class="type">float</span> r, <span class="type">float</span> o)</span><span class="comment">//五角星中心坐标x,y，大圆半径，小圆半径，初始角度</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">float</span> x0, y0, x1, y1;<span class="comment">//</span></span><br><span class="line">	<span class="type">float</span>    Theta = o;<span class="comment">//大圆对应角度</span></span><br><span class="line">	<span class="type">float</span>    theta = o + <span class="number">0.2</span> * <span class="number">3.14</span>;<span class="comment">//小圆对应角度</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		x0 = cx + R * <span class="built_in">cos</span>(Theta);<span class="comment">//大圆对应的x坐标</span></span><br><span class="line">		y0 = cy + R * <span class="built_in">sin</span>(Theta);<span class="comment">//大圆对应y坐标</span></span><br><span class="line"></span><br><span class="line">		x1 = cx + r * <span class="built_in">cos</span>(theta);<span class="comment">//小圆对应x坐标</span></span><br><span class="line">		y1 = cy + r * <span class="built_in">sin</span>(theta);<span class="comment">//小圆对应y坐标</span></span><br><span class="line">		<span class="built_in">glBegin</span>(GL_LINES);<span class="comment">//绘制</span></span><br><span class="line">		<span class="built_in">glColor3f</span>(<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">		<span class="built_in">glVertex2f</span>(x0, y0);</span><br><span class="line">		<span class="built_in">glVertex2f</span>(x1, y1);</span><br><span class="line">		<span class="built_in">glEnd</span>();</span><br><span class="line">		<span class="keyword">if</span> (i % <span class="number">2</span> == <span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			Theta = Theta + <span class="number">0.4</span> * <span class="number">3.14</span>;<span class="comment">//大圆对应角度变换</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			theta = theta + <span class="number">0.4</span> * <span class="number">3.14</span>;<span class="comment">//小圆对应角度变换</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">DrawStar2</span><span class="params">(<span class="type">float</span> cx, <span class="type">float</span> cy, <span class="type">float</span> R, <span class="type">float</span> r, <span class="type">float</span> o)</span><span class="comment">//五角星中心坐标x,y，大圆半径，小圆半径，初始角度</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">float</span> x0, y0, x1, y1;<span class="comment">//</span></span><br><span class="line">	<span class="type">float</span>    Theta = o;<span class="comment">//大圆对应角度</span></span><br><span class="line">	<span class="type">float</span>    theta = o + <span class="number">0.2</span> * <span class="number">3.14</span>;<span class="comment">//小圆对应角度</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		x0 = cx + R * <span class="built_in">cos</span>(Theta);<span class="comment">//大圆对应的x坐标</span></span><br><span class="line">		y0 = cy + R * <span class="built_in">sin</span>(Theta);<span class="comment">//大圆对应y坐标</span></span><br><span class="line">		x1 = cx + r * <span class="built_in">cos</span>(theta);<span class="comment">//小圆对应x坐标</span></span><br><span class="line">		y1 = cy + r * <span class="built_in">sin</span>(theta);<span class="comment">//小圆对应y坐标</span></span><br><span class="line">		<span class="built_in">glColor3f</span>(<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">		<span class="built_in">glBegin</span>(GL_POLYGON);<span class="comment">//绘制</span></span><br><span class="line">		<span class="built_in">glVertex2f</span>(x0, y0);</span><br><span class="line">		<span class="built_in">glVertex2f</span>(x1, y1);</span><br><span class="line">		<span class="built_in">glVertex2f</span>(cx, cy);</span><br><span class="line">		<span class="built_in">glEnd</span>();</span><br><span class="line">		<span class="keyword">if</span> (i % <span class="number">2</span> == <span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			Theta = Theta + <span class="number">0.4</span> * <span class="number">3.14</span>;<span class="comment">//大圆对应角度变换</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			theta = theta + <span class="number">0.4</span> * <span class="number">3.14</span>;<span class="comment">//小圆对应角度变换</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">DrawStar3</span><span class="params">(<span class="type">float</span> cx, <span class="type">float</span> cy, <span class="type">float</span> R, <span class="type">float</span> r, <span class="type">float</span> o)</span><span class="comment">//五角星中心坐标x,y，大圆半径，小圆半径，初始角度</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">float</span> x0, y0, x1, y1;</span><br><span class="line">	<span class="type">float</span>    Theta = o;				<span class="comment">//大圆对应角度</span></span><br><span class="line">	<span class="type">float</span>    theta = o + <span class="number">0.2</span> * <span class="number">3.14</span>;	<span class="comment">//小圆对应角度</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		x0 = cx + R * <span class="built_in">cos</span>(Theta);<span class="comment">//大圆对应的x坐标</span></span><br><span class="line">		y0 = cy + R * <span class="built_in">sin</span>(Theta);<span class="comment">//大圆对应y坐标</span></span><br><span class="line">		x1 = cx + r * <span class="built_in">cos</span>(theta);<span class="comment">//小圆对应x坐标</span></span><br><span class="line">		y1 = cy + r * <span class="built_in">sin</span>(theta);<span class="comment">//小圆对应y坐标</span></span><br><span class="line">		<span class="keyword">if</span> (i % <span class="number">2</span> == <span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">glColor3f</span>(<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">glColor3f</span>(<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">glBegin</span>(GL_POLYGON);<span class="comment">//绘制</span></span><br><span class="line">		<span class="built_in">glVertex2f</span>(x0, y0);</span><br><span class="line">		<span class="built_in">glVertex2f</span>(x1, y1);</span><br><span class="line">		<span class="built_in">glVertex2f</span>(cx, cy);</span><br><span class="line">		<span class="built_in">glEnd</span>();</span><br><span class="line">		<span class="keyword">if</span> (i % <span class="number">2</span> == <span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			Theta = Theta + <span class="number">0.4</span> * <span class="number">3.14</span>;	<span class="comment">//大圆对应角度变换</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			theta = theta + <span class="number">0.4</span> * <span class="number">3.14</span>;	<span class="comment">//小圆对应角度变换</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">display</span><span class="params">(<span class="type">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">glClear</span>(GL_COLOR_BUFFER_BIT);	<span class="comment">//清除帧缓存</span></span><br><span class="line">	<span class="built_in">DrawStar1</span>(<span class="number">150</span>, <span class="number">300</span>, <span class="number">120</span>, <span class="number">50</span>, <span class="number">0</span>);	<span class="comment">//glFlush();//单缓冲时必须要，说明绘图命令（函数）结束</span></span><br><span class="line">	<span class="built_in">DrawStar2</span>(<span class="number">400</span>, <span class="number">300</span>, <span class="number">120</span>, <span class="number">50</span>, <span class="number">0</span>);</span><br><span class="line">	<span class="built_in">DrawStar3</span>(<span class="number">650</span>, <span class="number">300</span>, <span class="number">120</span>, <span class="number">50</span>, <span class="number">0</span>);</span><br><span class="line">	<span class="built_in">glutSwapBuffers</span>();<span class="comment">//交换缓冲（双缓冲时使用）</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">reshape</span><span class="params">(<span class="type">int</span> width, <span class="type">int</span> height)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">glViewport</span>(<span class="number">0</span>, <span class="number">0</span>, width, height);<span class="comment">//设置视区（窗口内绘图区域）</span></span><br><span class="line">	<span class="built_in">glMatrixMode</span>(GL_PROJECTION);</span><br><span class="line">	<span class="built_in">glLoadIdentity</span>();</span><br><span class="line">	<span class="built_in">gluOrtho2D</span>(<span class="number">0</span>, width, <span class="number">0</span>, height);<span class="comment">//设置图形数据范围</span></span><br><span class="line">	<span class="built_in">glMatrixMode</span>(GL_MODELVIEW);</span><br><span class="line">	<span class="built_in">glLoadIdentity</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">keyboard</span><span class="params">(<span class="type">unsigned</span> <span class="type">char</span> key, <span class="type">int</span> x, <span class="type">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">glutInitWindowPosition</span>(<span class="number">200</span>, <span class="number">200</span>);<span class="comment">//应用程序窗口位置</span></span><br><span class="line">	<span class="built_in">glutInitWindowSize</span>(<span class="number">800</span>, <span class="number">600</span>);<span class="comment">//窗口大小</span></span><br><span class="line">	<span class="built_in">glutInitDisplayMode</span>(GLUT_RGBA | GLUT_DOUBLE);<span class="comment">//双缓冲，单缓冲为GLUT_SINGLE</span></span><br><span class="line">	<span class="built_in">glutCreateWindow</span>(<span class="string">&quot;五角星绘制&quot;</span>);<span class="comment">//创建窗口，参数为窗口标题</span></span><br><span class="line">	<span class="built_in">init</span>();</span><br><span class="line">	<span class="built_in">glutDisplayFunc</span>(display);<span class="comment">//图形绘制</span></span><br><span class="line">	<span class="built_in">glutReshapeFunc</span>(reshape);<span class="comment">//窗口大小变化</span></span><br><span class="line">	<span class="built_in">glutKeyboardFunc</span>(keyboard);<span class="comment">//键盘交互</span></span><br><span class="line">	<span class="built_in">glutMainLoop</span>();<span class="comment">//必须，进入GLUT事件处理循环</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="效果展示"><a class="markdownIt-Anchor" href="#效果展示"></a> 效果展示</h3>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/yuZSogGqp3OH5RM.png" width=600px>
<h2 id="实验二-二维图形的几何变换"><a class="markdownIt-Anchor" href="#实验二-二维图形的几何变换"></a> 实验二 二维图形的几何变换</h2>
<h3 id="要求-2"><a class="markdownIt-Anchor" href="#要求-2"></a> 要求</h3>
<ol>
<li>实现一个五角星以任意角度在矩形四条边内部滚动，与边界碰撞时发生的反弹，参考台球在桌案上的滚动效果。</li>
<li>实现矩形框内一个五角星的连续放缩（大小变化）</li>
<li>注意：两个五角星在同一矩形内；放缩五角星的参照点为五角星的中心，五角星位置固定；滚动五角星的旋转角度和平移距离尽量一致。</li>
</ol>
<h3 id="问题分析-2"><a class="markdownIt-Anchor" href="#问题分析-2"></a> 问题分析</h3>
<ol>
<li>
<p>将滚动五角星看做半径为R的圆，滚动五角星的碰撞条件判断为：它的圆心到矩形边界的距离是否大于半径R。图示如下</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/W8JhxkmqAI9Rgdf.png" width=800px>
 红色矩形所框选的范围即为滚动五角星圆心所运动的区域。
</li>
<li>
<p>旋转五角星只需要不停地调用放缩函数即可。</p>
</li>
</ol>
<h3 id="代码-2"><a class="markdownIt-Anchor" href="#代码-2"></a> 代码</h3>
<p>ProjectTwo.cpp</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// OpenGLOld.cpp : 定义控制台应用程序的入口点。</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;GL/glew.h&gt;</span><span class="comment">//OpenGL库</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;GL/glut.h&gt;</span><span class="comment">//OpenGL辅助库</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;math.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> comment( linker, <span class="string">&quot;/subsystem:\&quot;windows\&quot; /entry:\&quot;mainCRTStartup\&quot;&quot;</span> ) <span class="comment">//这句是不让控制台窗体出现，如果想要出现，去掉即可。</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">(<span class="type">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">glClearColor</span>(<span class="number">0.2</span>, <span class="number">0.3</span>, <span class="number">0.3</span>, <span class="number">1.0</span>);<span class="comment">//设置背景色</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> alpha=<span class="number">0.0f</span>;</span><br><span class="line"><span class="type">float</span> x = <span class="number">0.0f</span>, y = <span class="number">0.0f</span>;</span><br><span class="line"><span class="type">double</span> Scale = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">DrawStar3</span><span class="params">(<span class="type">float</span> cx, <span class="type">float</span> cy, <span class="type">float</span> R, <span class="type">float</span> r, <span class="type">float</span> o)</span><span class="comment">//五角星中心坐标x,y，大圆半径，小圆半径，初始角度</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">float</span> x0, y0, x1, y1;</span><br><span class="line">	<span class="type">float</span>    Theta = o;				<span class="comment">//大圆对应角度</span></span><br><span class="line">	<span class="type">float</span>    theta = o + <span class="number">0.2</span> * <span class="number">3.14</span>;	<span class="comment">//小圆对应角度</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		x0 = cx + R * <span class="built_in">cos</span>(Theta);<span class="comment">//大圆对应的x坐标</span></span><br><span class="line">		y0 = cy + R * <span class="built_in">sin</span>(Theta);<span class="comment">//大圆对应y坐标</span></span><br><span class="line">		x1 = cx + r * <span class="built_in">cos</span>(theta);<span class="comment">//小圆对应x坐标</span></span><br><span class="line">		y1 = cy + r * <span class="built_in">sin</span>(theta);<span class="comment">//小圆对应y坐标</span></span><br><span class="line">		<span class="keyword">if</span> (i % <span class="number">2</span> == <span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">glColor3f</span>(<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">glColor3f</span>(<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">glBegin</span>(GL_POLYGON);<span class="comment">//绘制</span></span><br><span class="line">		<span class="built_in">glVertex2f</span>(x0, y0);</span><br><span class="line">		<span class="built_in">glVertex2f</span>(x1, y1);</span><br><span class="line">		<span class="built_in">glVertex2f</span>(cx, cy);</span><br><span class="line">		<span class="built_in">glEnd</span>();</span><br><span class="line">		<span class="keyword">if</span> (i % <span class="number">2</span> == <span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			Theta = Theta + <span class="number">0.4</span> * <span class="number">3.14</span>;	<span class="comment">//大圆对应角度变换</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			theta = theta + <span class="number">0.4</span> * <span class="number">3.14</span>;	<span class="comment">//小圆对应角度变换</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MyDrawRect</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">glBegin</span>(GL_LINE_LOOP);</span><br><span class="line">	<span class="built_in">glVertex2f</span>(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">	<span class="built_in">glVertex2f</span>(<span class="number">0</span>, <span class="number">700</span>);</span><br><span class="line">	<span class="built_in">glVertex2f</span>(<span class="number">1000</span>, <span class="number">700</span>);</span><br><span class="line">	<span class="built_in">glVertex2f</span>(<span class="number">1000</span>, <span class="number">0</span>);</span><br><span class="line">	<span class="built_in">glEnd</span>();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">display</span><span class="params">(<span class="type">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">glClear</span>(GL_COLOR_BUFFER_BIT);<span class="comment">//清除帧缓存</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">//模型观察矩阵初始化</span></span><br><span class="line">	<span class="built_in">glMatrixMode</span>(GL_MODELVIEW);</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 旋转与碰撞</span></span><br><span class="line">	<span class="built_in">glPushMatrix</span>();</span><br><span class="line">	<span class="built_in">glTranslatef</span>(<span class="number">150.0f</span>+x,<span class="number">300.0f</span>+y,<span class="number">0.0f</span>);</span><br><span class="line">	<span class="built_in">glRotatef</span>(alpha, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">	<span class="built_in">glTranslatef</span>(<span class="number">-150.0f</span>-x, <span class="number">-300.0f</span>-y, <span class="number">0.0f</span>);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">DrawStar3</span>(<span class="number">150</span>+x, <span class="number">300</span>+y, <span class="number">100</span>, <span class="number">40</span>, <span class="number">0</span>);</span><br><span class="line">	<span class="comment">//glLoadIdentity();</span></span><br><span class="line">	<span class="built_in">glPopMatrix</span>();</span><br><span class="line"></span><br><span class="line">	<span class="comment">//缩放</span></span><br><span class="line">	<span class="built_in">glPushMatrix</span>();</span><br><span class="line">	<span class="built_in">glTranslatef</span>(<span class="number">300.0</span>, <span class="number">200.0</span>, <span class="number">0.0</span>);</span><br><span class="line">	<span class="built_in">glScalef</span>(Scale, Scale, <span class="number">1</span>);</span><br><span class="line">	<span class="built_in">glTranslatef</span>(<span class="number">-300.0</span>, <span class="number">-200.0</span>, <span class="number">0.0</span>);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">DrawStar3</span>(<span class="number">300</span>, <span class="number">200</span>, <span class="number">100</span>, <span class="number">40</span>, <span class="number">0.1</span>*<span class="number">3.14</span>);</span><br><span class="line">	<span class="comment">//glLoadIdentity();</span></span><br><span class="line">	<span class="built_in">glPopMatrix</span>();</span><br><span class="line"></span><br><span class="line">	<span class="built_in">MyDrawRect</span>();</span><br><span class="line"></span><br><span class="line">	<span class="comment">//glFlush();//单缓冲时必须要，说明绘图命令（函数）结束</span></span><br><span class="line">	<span class="built_in">glutSwapBuffers</span>();<span class="comment">//交换缓冲（双缓冲时使用）</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">reshape</span><span class="params">(<span class="type">int</span> width, <span class="type">int</span> height)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">glViewport</span>(<span class="number">0</span>, <span class="number">0</span>, width, height);<span class="comment">//设置视区（窗口内绘图区域）</span></span><br><span class="line"></span><br><span class="line">	<span class="built_in">glMatrixMode</span>(GL_PROJECTION);</span><br><span class="line">	<span class="built_in">glLoadIdentity</span>();</span><br><span class="line">	<span class="built_in">gluOrtho2D</span>(<span class="number">0</span>, width, <span class="number">0</span>, height);<span class="comment">//设置图形数据范围</span></span><br><span class="line"><span class="comment">//	glMatrixMode(GL_MODELVIEW);</span></span><br><span class="line"><span class="comment">//	glLoadIdentity();</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> flag = <span class="number">0</span>, flagX = <span class="number">0</span>, flagY = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">change</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	alpha += <span class="number">0.2f</span>;</span><br><span class="line">	<span class="keyword">if</span> (alpha &gt; <span class="number">360</span>) alpha -= <span class="number">360</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 放缩判断</span></span><br><span class="line">	<span class="keyword">if</span> (flag == <span class="number">0</span>) &#123;</span><br><span class="line">		Scale += <span class="number">0.002</span>;</span><br><span class="line">		<span class="keyword">if</span> (Scale &gt; <span class="number">2.5</span>) &#123;</span><br><span class="line">			flag = <span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> (flag == <span class="number">1</span>) &#123;</span><br><span class="line">		Scale -= <span class="number">0.002</span>;</span><br><span class="line">		<span class="keyword">if</span> (Scale &lt; <span class="number">0.2</span>) &#123;</span><br><span class="line">			flag = <span class="number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// X取值范围判断	(x1, x2)   </span></span><br><span class="line">	<span class="comment">// x1 = x - R </span></span><br><span class="line">	<span class="comment">// x2 = x + R</span></span><br><span class="line">	<span class="keyword">if</span> (flagX == <span class="number">0</span>) &#123;</span><br><span class="line">		x += <span class="number">0.2f</span>;</span><br><span class="line">		<span class="keyword">if</span> (x + <span class="number">150</span> &gt;= <span class="number">900</span>) &#123;</span><br><span class="line">			flagX = <span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span> (flagX == <span class="number">1</span>) &#123;</span><br><span class="line">		x -= <span class="number">0.2f</span>;</span><br><span class="line">		<span class="keyword">if</span> (x + <span class="number">150</span> &lt;= <span class="number">100</span>) &#123;</span><br><span class="line">			flagX = <span class="number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Y值取值范围判断 (y1, y2)</span></span><br><span class="line">	<span class="comment">// y1 = y - R</span></span><br><span class="line">	<span class="comment">// y2 = y + R</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (flagY == <span class="number">0</span>) &#123;</span><br><span class="line">		y += <span class="number">0.2f</span>;</span><br><span class="line">		<span class="keyword">if</span> (y + <span class="number">300</span> &gt;= <span class="number">600</span>) &#123;</span><br><span class="line">			flagY = <span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;<span class="keyword">else</span> <span class="keyword">if</span> (flagY == <span class="number">1</span>) &#123;</span><br><span class="line">		y -= <span class="number">0.2f</span>;</span><br><span class="line">		<span class="keyword">if</span> (y + <span class="number">300</span> &lt;= <span class="number">100</span>) &#123;</span><br><span class="line">			flagY = <span class="number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">glutPostRedisplay</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">keyboard</span><span class="params">(<span class="type">unsigned</span> <span class="type">char</span> key, <span class="type">int</span> x, <span class="type">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">glutInitWindowPosition</span>(<span class="number">200</span>, <span class="number">200</span>);<span class="comment">//应用程序窗口位置</span></span><br><span class="line">	<span class="built_in">glutInitWindowSize</span>(<span class="number">800</span>, <span class="number">600</span>);<span class="comment">//窗口大小</span></span><br><span class="line">	</span><br><span class="line">	<span class="built_in">glutInitDisplayMode</span>(GLUT_RGBA | GLUT_DOUBLE);<span class="comment">//双缓冲，单缓冲为GLUT_SINGLE</span></span><br><span class="line">	<span class="built_in">glutCreateWindow</span>(<span class="string">&quot;Project Two&quot;</span>);<span class="comment">//创建窗口，参数为窗口标题</span></span><br><span class="line">	<span class="built_in">init</span>();</span><br><span class="line"></span><br><span class="line">	<span class="built_in">glutDisplayFunc</span>(display);<span class="comment">//图形绘制</span></span><br><span class="line">	<span class="built_in">glutReshapeFunc</span>(reshape);<span class="comment">//窗口大小变化</span></span><br><span class="line">	<span class="built_in">glutKeyboardFunc</span>(keyboard);<span class="comment">//键盘交互</span></span><br><span class="line">	<span class="built_in">glutIdleFunc</span>(change);<span class="comment">//键盘交互</span></span><br><span class="line"></span><br><span class="line">	<span class="built_in">glutMainLoop</span>();<span class="comment">//必须，进入GLUT事件处理循环</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="效果展示-2"><a class="markdownIt-Anchor" href="#效果展示-2"></a> 效果展示</h3>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/HmzTw6lWBgJcbdh.gif" width=600px>
<h2 id="实验三-实验四"><a class="markdownIt-Anchor" href="#实验三-实验四"></a> 实验三 &amp; 实验四</h2>
<h3 id="要求-3"><a class="markdownIt-Anchor" href="#要求-3"></a> 要求</h3>
<ol>
<li>构建一个丰富的三维场景，包括立方体、球体、圆柱体；</li>
<li>为它们添加合适的纹理；</li>
<li>在场景中添加光源；</li>
<li>可以使用按键控制你视角的移动及光源的移动。</li>
</ol>
<h3 id="代码-3"><a class="markdownIt-Anchor" href="#代码-3"></a> 代码</h3>
<p>ProjectFour.cpp</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// OpenGLOld.cpp : 定义控制台应用程序的入口点。</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;Windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;GL/glew.h&gt;</span><span class="comment">//OpenGL库</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;GL/glut.h&gt;</span><span class="comment">//OpenGL辅助库</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;math.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;SOIL/SOIL.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;cgSphere.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;cgCylinder.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;cgCube.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;cgQuad.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Bitmap.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> comment( linker, <span class="string">&quot;/subsystem:\&quot;windows\&quot; /entry:\&quot;mainCRTStartup\&quot;&quot;</span> ) <span class="comment">//这句是不让控制台窗体出现，如果想要出现，去掉即可。</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">float</span> alpha=<span class="number">0.0f</span>;</span><br><span class="line"><span class="type">float</span> pos[]=&#123;<span class="number">0.0</span>,<span class="number">1.5</span>,<span class="number">0.0</span>&#125;;</span><br><span class="line"><span class="type">float</span> headdir[]=&#123;<span class="number">0.0f</span>,<span class="number">0.0f</span>,<span class="number">-1.0f</span>&#125;;</span><br><span class="line"><span class="type">float</span> rightdir[]=&#123;<span class="number">1.0f</span>,<span class="number">0.0f</span>,<span class="number">0.0f</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> step = <span class="number">0.10f</span>;</span><br><span class="line"><span class="type">float</span> beta = <span class="number">180.0f</span>;<span class="comment">//与z轴正向夹角</span></span><br><span class="line"><span class="type">float</span> betastep = <span class="number">1.0f</span>;</span><br><span class="line"></span><br><span class="line">cgSphere sphere, sun;</span><br><span class="line">cgCylinder cylinder;</span><br><span class="line">cgCube cube;</span><br><span class="line"></span><br><span class="line"><span class="comment">//光照变量</span></span><br><span class="line">GLfloat light_position[] = &#123; <span class="number">0.0</span>, <span class="number">2.0</span>, <span class="number">1.0</span>, <span class="number">0.1</span> &#125;;</span><br><span class="line">GLfloat light_color[] = &#123; <span class="number">1.0</span>, <span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">0.0</span> &#125;;</span><br><span class="line"><span class="comment">// 添加的光照</span></span><br><span class="line">GLfloat sun_position[] = &#123; <span class="number">-10.0</span>, <span class="number">5.0</span>, <span class="number">0.0</span>, <span class="number">0.0</span> &#125;;</span><br><span class="line">GLfloat sun_color[] = &#123; <span class="number">1.0</span>, <span class="number">1.0</span>, <span class="number">1.0</span>, <span class="number">1.0</span> &#125;;</span><br><span class="line"></span><br><span class="line">GLfloat aMaterial[] = &#123; <span class="number">.20</span>, <span class="number">0.20</span>, <span class="number">0.20</span>, <span class="number">1.0</span> &#125;;		<span class="comment">//环境光反射系数</span></span><br><span class="line">GLfloat dMaterial[] = &#123; <span class="number">.60</span>, <span class="number">0.60</span>, <span class="number">0.60</span>, <span class="number">1.0</span> &#125;;		<span class="comment">//漫反射光反射系数</span></span><br><span class="line">GLfloat sMaterial[] = &#123; <span class="number">0.4</span>, <span class="number">0.4</span>,<span class="number">0.4</span>, <span class="number">1</span> &#125;;			<span class="comment">//镜面反射光反射系数</span></span><br><span class="line">GLfloat shiniess = <span class="number">20</span>;								<span class="comment">//高光指数</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> rendermode = <span class="number">2</span>;<span class="comment">//0:填充； 1:线框；2：纹理</span></span><br><span class="line"></span><br><span class="line">GLuint textureID;</span><br><span class="line"><span class="type">int</span>  frames=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function">GLuint <span class="title">LoadTexture</span><span class="params">(<span class="type">char</span>* fname)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	GLuint tID;</span><br><span class="line">	</span><br><span class="line">	<span class="type">int</span> width, height, nrComponents;</span><br><span class="line">	<span class="type">unsigned</span> <span class="type">char</span> *data;</span><br><span class="line">	</span><br><span class="line">	data = <span class="built_in">SOIL_load_image</span>(fname, &amp;width, &amp;height, &amp;nrComponents,SOIL_LOAD_RGB);<span class="comment">// </span></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">if</span> (data)</span><br><span class="line">	&#123;</span><br><span class="line">		GLenum internalFormat;</span><br><span class="line">		GLenum dataFormat;</span><br><span class="line">		<span class="type">bool</span> gammaCorrection = <span class="literal">false</span>;</span><br><span class="line">		<span class="keyword">if</span> (nrComponents == <span class="number">1</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			internalFormat = dataFormat = GL_RED;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (nrComponents == <span class="number">3</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			internalFormat = gammaCorrection ? GL_SRGB : GL_RGB;</span><br><span class="line">			dataFormat = GL_RGB;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (nrComponents == <span class="number">4</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			internalFormat = gammaCorrection ? GL_SRGB_ALPHA : GL_RGBA;</span><br><span class="line">			dataFormat = GL_RGBA;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//生成纹理</span></span><br><span class="line">		<span class="built_in">glGenTextures</span>(<span class="number">1</span>, &amp;tID);</span><br><span class="line">		<span class="built_in">glBindTexture</span>(GL_TEXTURE_2D, tID);</span><br><span class="line">	</span><br><span class="line">		<span class="comment">//glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, width, height, 0, GL_RGB, GL_UNSIGNED_BYTE, data);//这个函数居然不能用</span></span><br><span class="line">		<span class="built_in">gluBuild2DMipmaps</span>(GL_TEXTURE_2D, internalFormat, width, height, dataFormat, GL_UNSIGNED_BYTE, data);</span><br><span class="line">			</span><br><span class="line">		<span class="comment">//glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_DECAL);</span></span><br><span class="line">		<span class="built_in">glTexParameteri</span>(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);</span><br><span class="line">		<span class="built_in">glTexParameteri</span>(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);</span><br><span class="line">		<span class="built_in">glTexParameteri</span>(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR);</span><br><span class="line">		<span class="built_in">glTexParameteri</span>(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);</span><br><span class="line">		<span class="built_in">glTexParameteri</span>(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_NEAREST);</span><br><span class="line">	</span><br><span class="line">		<span class="built_in">glBindTexture</span>(GL_TEXTURE_2D, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">		<span class="built_in">SOIL_free_image_data</span>(data);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> tID;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">-1</span>;	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">(<span class="type">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">glClearColor</span>(<span class="number">0.5</span>, <span class="number">1.0</span>, <span class="number">1.0</span>, <span class="number">1.0</span>);<span class="comment">//设置背景色白色</span></span><br><span class="line">	<span class="built_in">glEnable</span>(GL_DEPTH_TEST);</span><br><span class="line"></span><br><span class="line">	<span class="comment">/*GL_AMBIENT、GL_DIFFUSE、GL_SPECULAR属性。这三个属性与光源的三个对应属性类似，每一属性都由四个值组成。</span></span><br><span class="line"><span class="comment">	GL_AMBIENT表示各种光线照射到该材质上，经过很多次反射后最终遗留在环境中的光线强度（颜色）。</span></span><br><span class="line"><span class="comment">	GL_DIFFUSE表示光线照射到该材质上，经过漫反射后形成的光线强度（颜色）。</span></span><br><span class="line"><span class="comment">	GL_SPECULAR表示光线照射到该材质上，经过镜面反射后形成的光线强度（颜色）。</span></span><br><span class="line"><span class="comment">	通常，GL_AMBIENT和GL_DIFFUSE都取相同的值，可以达到比较真实的效果。</span></span><br><span class="line"><span class="comment">	使用GL_AMBIENT_AND_DIFFUSE可以同时设置GL_AMBIENT和GL_DIFFUSE属性。*/</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//光照</span></span><br><span class="line">	<span class="built_in">glLightfv</span>(GL_LIGHT0, GL_POSITION, light_position);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">glLightfv</span>(GL_LIGHT0, GL_AMBIENT, light_color);</span><br><span class="line">    <span class="built_in">glLightfv</span>(GL_LIGHT0, GL_DIFFUSE, light_color);</span><br><span class="line">    <span class="built_in">glLightfv</span>(GL_LIGHT0, GL_SPECULAR, light_color);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">glLightfv</span>(GL_LIGHT1, GL_POSITION, sun_position);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">glLightfv</span>(GL_LIGHT1, GL_AMBIENT, sun_color);</span><br><span class="line">    <span class="built_in">glLightfv</span>(GL_LIGHT1, GL_DIFFUSE, sun_color);</span><br><span class="line">    <span class="built_in">glLightfv</span>(GL_LIGHT1, GL_SPECULAR, sun_color);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// void glMaterial&#123;if&#125;(GLenum face, GLenum pname, TYPE param);</span></span><br><span class="line">	<span class="comment">// 参数pname的可能取值。</span></span><br><span class="line">	<span class="comment">// GL_AMBIENT_AND_DIFFUSE让您能够同时设置材质的环境颜色和散射颜色，并将它们设置为相同的RGBA值。</span></span><br><span class="line">	<span class="built_in">glMaterialfv</span>(GL_FRONT_AND_BACK, GL_AMBIENT, aMaterial);</span><br><span class="line">	<span class="built_in">glMaterialfv</span>(GL_FRONT_AND_BACK, GL_DIFFUSE, dMaterial);</span><br><span class="line">	<span class="built_in">glMaterialfv</span>(GL_FRONT_AND_BACK, GL_SPECULAR, sMaterial);</span><br><span class="line">	<span class="built_in">glMaterialfv</span>(GL_FRONT_AND_BACK, GL_SHININESS, &amp;shiniess);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">glEnable</span>(GL_LIGHTING);</span><br><span class="line">    <span class="built_in">glEnable</span>(GL_LIGHT0);</span><br><span class="line">	<span class="built_in">glEnable</span>(GL_LIGHT1);</span><br><span class="line">	<span class="comment">///////////////////////////</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//地球仪</span></span><br><span class="line">	sphere.<span class="built_in">InitData</span>(<span class="number">1.0f</span>);</span><br><span class="line">	sphere.<span class="built_in">SetPos</span>(<span class="built_in">cgPoint3D</span>(<span class="number">0.0f</span>, <span class="number">2.5f</span>,<span class="number">-8.0f</span>));</span><br><span class="line">	sphere.<span class="built_in">SetTexture</span>(<span class="built_in">LoadTexture</span>(<span class="string">&quot;Textures/earth2.jpg&quot;</span>));</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 太阳光照</span></span><br><span class="line">	sun.<span class="built_in">InitData</span>(<span class="number">3.0f</span>);</span><br><span class="line">	sun.<span class="built_in">SetPos</span>(<span class="built_in">cgPoint3D</span>(sun_position[<span class="number">0</span>], sun_position[<span class="number">1</span>], sun_position[<span class="number">2</span>]));</span><br><span class="line">	sun.<span class="built_in">SetTexture</span>(<span class="built_in">LoadTexture</span>(<span class="string">&quot;Textures/sun.jpeg&quot;</span>));</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 正方体</span></span><br><span class="line">	cube.<span class="built_in">InitData</span>(<span class="number">1.0f</span>);</span><br><span class="line">	cube.<span class="built_in">SetPos</span>(<span class="built_in">cgPoint3D</span>(<span class="number">1.0f</span>, <span class="number">1.0f</span>, <span class="number">-5.0f</span>));</span><br><span class="line">	cube.<span class="built_in">SetTexture</span>(<span class="built_in">LoadTexture</span>(<span class="string">&quot;Textures/timg.bmp&quot;</span>));</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 圆柱体</span></span><br><span class="line">	cylinder.<span class="built_in">InitData</span>(<span class="number">1.0f</span>, <span class="number">5.0f</span>);</span><br><span class="line">	cylinder.<span class="built_in">SetPos</span>(<span class="built_in">cgPoint3D</span>(<span class="number">3.0f</span>, <span class="number">4.0f</span>, <span class="number">-3.0f</span>));</span><br><span class="line">	cylinder.<span class="built_in">SetTextureID</span>(<span class="built_in">LoadTexture</span>(<span class="string">&quot;Textures/desert.bmp&quot;</span>));</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//地面纹理</span></span><br><span class="line">	textureID = <span class="built_in">LoadTexture</span>(<span class="string">&quot;Textures/timg.jpg&quot;</span>);	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">display</span><span class="params">(<span class="type">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">glClear</span>(GL_COLOR_BUFFER_BIT| GL_DEPTH_BUFFER_BIT );<span class="comment">//清除帧缓存和深度缓存</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">//模型观察矩阵初始化</span></span><br><span class="line">	<span class="built_in">glMatrixMode</span>(GL_MODELVIEW);</span><br><span class="line">	<span class="built_in">glLoadIdentity</span>();</span><br><span class="line"></span><br><span class="line">	<span class="type">float</span> at[<span class="number">3</span>];</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; i&lt;<span class="number">3</span>; i++)</span><br><span class="line">		at[i] = pos[i] + headdir[i];</span><br><span class="line"></span><br><span class="line">	<span class="built_in">gluLookAt</span>(pos[<span class="number">0</span>], pos[<span class="number">1</span>], pos[<span class="number">2</span>], at[<span class="number">0</span>], at[<span class="number">1</span>], at[<span class="number">2</span>], <span class="number">0.0</span>, <span class="number">1.0</span>, <span class="number">0.0</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (rendermode==<span class="number">1</span>)</span><br><span class="line">		<span class="built_in">glPolygonMode</span>(GL_FRONT_AND_BACK,GL_LINE);</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		<span class="built_in">glPolygonMode</span>(GL_FRONT_AND_BACK,GL_FILL);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//地面</span></span><br><span class="line">	<span class="built_in">glEnable</span>(GL_TEXTURE_2D);</span><br><span class="line">	<span class="built_in">glBindTexture</span>(GL_TEXTURE_2D, textureID);</span><br><span class="line">	<span class="built_in">glColor3f</span>(<span class="number">1.0f</span>,<span class="number">1.0f</span>,<span class="number">1.0f</span>);</span><br><span class="line">	<span class="built_in">glBegin</span>(GL_QUADS);</span><br><span class="line">		<span class="built_in">glTexCoord2f</span>(<span class="number">0.0f</span>,<span class="number">0.0f</span>);<span class="comment">//指定顶点纹理坐标</span></span><br><span class="line">		<span class="built_in">glNormal3f</span>(<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>);<span class="comment">//指定顶点法向量</span></span><br><span class="line">		<span class="built_in">glVertex3f</span>(<span class="number">-50.0f</span>,<span class="number">0.0f</span>,<span class="number">50.0f</span>);<span class="comment">//指定顶点坐标</span></span><br><span class="line"></span><br><span class="line">		<span class="built_in">glTexCoord2f</span>(<span class="number">10.0f</span>,<span class="number">0.0f</span>);</span><br><span class="line">		<span class="built_in">glNormal3f</span>(<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">		<span class="built_in">glVertex3f</span>(<span class="number">50.0f</span>,<span class="number">0.0f</span>,<span class="number">50.0f</span>);</span><br><span class="line"></span><br><span class="line">		<span class="built_in">glTexCoord2f</span>(<span class="number">10.0f</span>,<span class="number">10.0f</span>);</span><br><span class="line">		<span class="built_in">glNormal3f</span>(<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">		<span class="built_in">glVertex3f</span>(<span class="number">50.0f</span>,<span class="number">0.0f</span>,<span class="number">-50.0f</span>);</span><br><span class="line">		</span><br><span class="line">		<span class="built_in">glTexCoord2f</span>(<span class="number">0.0f</span>,<span class="number">10.0f</span>);</span><br><span class="line">		<span class="built_in">glNormal3f</span>(<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">		<span class="built_in">glVertex3f</span>(<span class="number">-50.0f</span>,<span class="number">0.0f</span>,<span class="number">-50.0f</span>);</span><br><span class="line">	<span class="built_in">glEnd</span>();</span><br><span class="line">	<span class="built_in">glDisable</span>(GL_TEXTURE_2D);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">glColor3f</span>(<span class="number">0.25</span>,<span class="number">0.5</span>,<span class="number">0.5</span>);</span><br><span class="line">	sphere.<span class="built_in">Render</span>();</span><br><span class="line"></span><br><span class="line">	<span class="built_in">glColor3f</span>(<span class="number">1.0</span>,<span class="number">0.0</span>,<span class="number">0.0</span>);</span><br><span class="line">	cube.<span class="built_in">Render</span>();</span><br><span class="line">	sun.<span class="built_in">Render</span>();</span><br><span class="line">	cylinder.<span class="built_in">Render</span>();</span><br><span class="line">	</span><br><span class="line">	<span class="built_in">glutSwapBuffers</span>();<span class="comment">//交换缓冲（双缓冲时使用）</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">reshape</span><span class="params">(<span class="type">int</span> width, <span class="type">int</span> height)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">glViewport</span>(<span class="number">0</span>, <span class="number">0</span>, width, height);<span class="comment">//设置视区（窗口内绘图区域）</span></span><br><span class="line"></span><br><span class="line">	<span class="built_in">glMatrixMode</span>(GL_PROJECTION);</span><br><span class="line">	<span class="built_in">glLoadIdentity</span>();</span><br><span class="line">	</span><br><span class="line">	<span class="built_in">gluPerspective</span>(<span class="number">60</span>,(GLfloat) width/(GLfloat)height, <span class="number">1.0</span>, <span class="number">200.0</span>);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">glMatrixMode</span>(GL_MODELVIEW);</span><br><span class="line">	<span class="built_in">glLoadIdentity</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">change</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">glutPostRedisplay</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">keyboard</span><span class="params">(<span class="type">unsigned</span> <span class="type">char</span> key, <span class="type">int</span> x, <span class="type">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">switch</span> (key)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="string">&#x27;W&#x27;</span>:   <span class="comment">//上移</span></span><br><span class="line">		<span class="keyword">case</span> <span class="string">&#x27;w&#x27;</span>:</span><br><span class="line">			<span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; i&lt;<span class="number">3</span>; i++)</span><br><span class="line">				pos[i] += step*headdir[i];</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="string">&#x27;S&#x27;</span>:   <span class="comment">//下移</span></span><br><span class="line">		<span class="keyword">case</span> <span class="string">&#x27;s&#x27;</span>:</span><br><span class="line">			<span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; i&lt;<span class="number">3</span>; i++)</span><br><span class="line">				pos[i] -= step*headdir[i];</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="string">&#x27;A&#x27;</span>:  <span class="comment">//左移</span></span><br><span class="line">		<span class="keyword">case</span> <span class="string">&#x27;a&#x27;</span>:</span><br><span class="line">			<span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; i&lt;<span class="number">3</span>; i++)</span><br><span class="line">				pos[i] -= step*rightdir[i];	</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="string">&#x27;D&#x27;</span>:   <span class="comment">//右移</span></span><br><span class="line">		<span class="keyword">case</span> <span class="string">&#x27;d&#x27;</span>:</span><br><span class="line">			<span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; i&lt;<span class="number">3</span>; i++)</span><br><span class="line">				pos[i] += step*rightdir[i];</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">case</span> <span class="string">&#x27;Z&#x27;</span>:   </span><br><span class="line">		<span class="keyword">case</span> <span class="string">&#x27;z&#x27;</span>:</span><br><span class="line">			<span class="comment">//抬高相机</span></span><br><span class="line">	         pos[<span class="number">1</span>] += <span class="number">.30</span>f;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">case</span> <span class="string">&#x27;X&#x27;</span>:   </span><br><span class="line">		<span class="keyword">case</span> <span class="string">&#x27;x&#x27;</span>:</span><br><span class="line">			<span class="comment">//降低相机</span></span><br><span class="line">	         pos[<span class="number">1</span>] -= <span class="number">.30</span>f;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">case</span> <span class="string">&#x27;T&#x27;</span>:   <span class="comment">//修改绘制模式</span></span><br><span class="line">		<span class="keyword">case</span> <span class="string">&#x27;t&#x27;</span>:</span><br><span class="line">			rendermode = (++rendermode)%<span class="number">2</span>;</span><br><span class="line">			<span class="keyword">break</span>;	</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 光源移动</span></span><br><span class="line">		<span class="keyword">case</span> <span class="string">&#x27;1&#x27;</span>:</span><br><span class="line">			sun_position[<span class="number">0</span>] += <span class="number">1.0f</span>;</span><br><span class="line">			<span class="built_in">glLightfv</span>(GL_LIGHT1, GL_POSITION, sun_position);</span><br><span class="line">			sun.<span class="built_in">SetPos</span>(<span class="built_in">cgPoint3D</span>(sun_position[<span class="number">0</span>], sun_position[<span class="number">1</span>], sun_position[<span class="number">2</span>]));</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="string">&#x27;2&#x27;</span>:</span><br><span class="line">			sun_position[<span class="number">0</span>] -= <span class="number">1.0f</span>;</span><br><span class="line">			<span class="built_in">glLightfv</span>(GL_LIGHT1, GL_POSITION, sun_position);</span><br><span class="line">			sun.<span class="built_in">SetPos</span>(<span class="built_in">cgPoint3D</span>(sun_position[<span class="number">0</span>], sun_position[<span class="number">1</span>], sun_position[<span class="number">2</span>]));</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="string">&#x27;3&#x27;</span>:</span><br><span class="line">			sun_position[<span class="number">1</span>] += <span class="number">1.0f</span>;</span><br><span class="line">			<span class="built_in">glLightfv</span>(GL_LIGHT1, GL_POSITION, sun_position);</span><br><span class="line">			sun.<span class="built_in">SetPos</span>(<span class="built_in">cgPoint3D</span>(sun_position[<span class="number">0</span>], sun_position[<span class="number">1</span>], sun_position[<span class="number">2</span>]));</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="string">&#x27;4&#x27;</span>:</span><br><span class="line">			sun_position[<span class="number">1</span>] -= <span class="number">1.0f</span>;</span><br><span class="line">			<span class="built_in">glLightfv</span>(GL_LIGHT1, GL_POSITION, sun_position);</span><br><span class="line">			sun.<span class="built_in">SetPos</span>(<span class="built_in">cgPoint3D</span>(sun_position[<span class="number">0</span>], sun_position[<span class="number">1</span>], sun_position[<span class="number">2</span>]));</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="string">&#x27;5&#x27;</span>:</span><br><span class="line">			<span class="built_in">glEnable</span>(GL_LIGHT1);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="string">&#x27;6&#x27;</span>:</span><br><span class="line">			<span class="built_in">glDisable</span>(GL_LIGHT1);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="string">&#x27;7&#x27;</span>:</span><br><span class="line">			<span class="built_in">glEnable</span>(GL_LIGHT0);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="string">&#x27;8&#x27;</span>:</span><br><span class="line">			<span class="built_in">glDisable</span>(GL_LIGHT0);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">case</span> <span class="string">&#x27;n&#x27;</span>:</span><br><span class="line">		<span class="keyword">case</span> <span class="string">&#x27;N&#x27;</span>:</span><br><span class="line">			cube.<span class="built_in">UpdateTexCord</span>();</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">glutPostRedisplay</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">SpecialKey</span><span class="params">(GLint key,GLint x,GLint y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">switch</span> (key)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">case</span> GLUT_KEY_UP:</span><br><span class="line">			headdir[<span class="number">1</span>] += <span class="number">0.05f</span>;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">case</span> GLUT_KEY_DOWN:</span><br><span class="line">			headdir[<span class="number">1</span>] -= <span class="number">0.05f</span>;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">case</span> GLUT_KEY_LEFT:</span><br><span class="line">			<span class="comment">//修改前进方向</span></span><br><span class="line">			beta += betastep;</span><br><span class="line">			headdir[<span class="number">0</span>] = <span class="built_in">sin</span>(beta / <span class="number">180</span> * <span class="number">3.14</span>);</span><br><span class="line">			headdir[<span class="number">2</span>] = <span class="built_in">cos</span>(beta / <span class="number">180</span> * <span class="number">3.14</span>);</span><br><span class="line">			headdir[<span class="number">1</span>] = headdir[<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">			<span class="comment">//修改右向方向</span></span><br><span class="line">			rightdir[<span class="number">0</span>] = -<span class="built_in">cos</span>(beta / <span class="number">180</span> * <span class="number">3.14</span>);</span><br><span class="line">			rightdir[<span class="number">2</span>] = <span class="built_in">sin</span>(beta / <span class="number">180</span> * <span class="number">3.14</span>);</span><br><span class="line">			rightdir[<span class="number">1</span>] = rightdir[<span class="number">1</span>];</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">case</span> GLUT_KEY_RIGHT:</span><br><span class="line">			<span class="comment">//修改前进方向</span></span><br><span class="line">			beta -= betastep;</span><br><span class="line">			headdir[<span class="number">0</span>] = <span class="built_in">sin</span>(beta / <span class="number">180</span> * <span class="number">3.14</span>);</span><br><span class="line">			headdir[<span class="number">2</span>] = <span class="built_in">cos</span>(beta / <span class="number">180</span> * <span class="number">3.14</span>);</span><br><span class="line">			headdir[<span class="number">1</span>] = headdir[<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">			<span class="comment">//修改右向方向</span></span><br><span class="line">			rightdir[<span class="number">0</span>] = -<span class="built_in">cos</span>(beta / <span class="number">180</span> * <span class="number">3.14</span>);;</span><br><span class="line">			rightdir[<span class="number">2</span>] = <span class="built_in">sin</span>(beta / <span class="number">180</span> * <span class="number">3.14</span>);;</span><br><span class="line">			rightdir[<span class="number">1</span>] = rightdir[<span class="number">1</span>];</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">glutPostRedisplay</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">glutInitWindowPosition</span>(<span class="number">200</span>, <span class="number">200</span>);<span class="comment">//应用程序窗口位置</span></span><br><span class="line">	<span class="built_in">glutInitWindowSize</span>(<span class="number">800</span>, <span class="number">600</span>);<span class="comment">//窗口大小</span></span><br><span class="line">	</span><br><span class="line">	<span class="built_in">glutInitDisplayMode</span>(GLUT_RGB | GLUT_DOUBLE| GLUT_DEPTH );<span class="comment">//双缓冲，单缓冲为GLUT_SINGLE，深度缓存</span></span><br><span class="line">	<span class="built_in">glutCreateWindow</span>(<span class="string">&quot;Project Four&quot;</span>);<span class="comment">//创建窗口，参数为窗口标题</span></span><br><span class="line">	<span class="built_in">init</span>();</span><br><span class="line"></span><br><span class="line">	<span class="built_in">glutDisplayFunc</span>(display);<span class="comment">//图形绘制</span></span><br><span class="line">	<span class="built_in">glutReshapeFunc</span>(reshape);<span class="comment">//窗口大小变化</span></span><br><span class="line">	<span class="built_in">glutKeyboardFunc</span>(keyboard);<span class="comment">//键盘交互</span></span><br><span class="line">	<span class="built_in">glutSpecialFunc</span>(&amp;SpecialKey);<span class="comment">//方向键</span></span><br><span class="line">	<span class="built_in">glutIdleFunc</span>(change);<span class="comment">//空闲时间执行</span></span><br><span class="line"></span><br><span class="line">	<span class="built_in">glutMainLoop</span>();<span class="comment">//必须，进入GLUT事件处理循环</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="效果展示-3"><a class="markdownIt-Anchor" href="#效果展示-3"></a> 效果展示</h3>
<table>
<thead>
<tr>
<th>原场景</th>
<th>关闭光照后</th>
<th>移动视角后</th>
</tr>
</thead>
<tbody>
<tr>
<td><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/oivwrHlA237IBy4.jpg"></td>
<td><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/adkfEqZKAuxhUIi.jpg"></td>
<td><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/1BzmV4MHpEf7ydc.jpg"></td>
</tr>
</tbody>
</table>
]]></content>
      <categories>
        <category>计算机图形学</category>
      </categories>
      <tags>
        <tag>计算机图形学</tag>
        <tag>OpenGL</tag>
        <tag>C++</tag>
      </tags>
  </entry>
  <entry>
    <title>可见光波谱图绘制</title>
    <url>/posts/123a3146.html</url>
    <content><![CDATA[<h2 id="问题"><a class="markdownIt-Anchor" href="#问题"></a> 问题</h2>
<p>下图是可见光的波谱，编写程序绘制该图像。</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/BDf93cQ6wSHqkEP.png">
<h2 id="分析"><a class="markdownIt-Anchor" href="#分析"></a> 分析</h2>
<p>根据下图公式，计算各段波长的颜色，保存在列表中。遍历每种颜色，利用<code>matplotlib.pyplot</code>依次绘制线段并填满区间，打表出结果。</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/fm26sgODSRcl48J.png" width=500px>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/6JFY1rijVHkzubL.png" width=600px>
<h2 id="代码"><a class="markdownIt-Anchor" href="#代码"></a> 代码</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">CIE_RGB</span>():</span><br><span class="line">    rgb = np.zeros([<span class="number">1000</span>,<span class="number">1000</span>,<span class="number">3</span>])</span><br><span class="line">    r = np.arange(<span class="number">0</span>,<span class="number">1</span>,<span class="number">0.001</span>)</span><br><span class="line">    r,g = np.meshgrid(r,r)</span><br><span class="line">    rgb[:,:,<span class="number">0</span>] = r</span><br><span class="line">    rgb[:,:,<span class="number">1</span>] = g</span><br><span class="line">    rgb[:,:,<span class="number">2</span>] = <span class="number">1</span>-r-g</span><br><span class="line">    over = rgb[:,:,<span class="number">2</span>]&lt;<span class="number">0</span></span><br><span class="line">    rgb[over,:]=[<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">    <span class="comment">#将色品转化成RGB</span></span><br><span class="line">    maxVal = np.<span class="built_in">max</span>(rgb,<span class="number">2</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> [<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>]:</span><br><span class="line">        rgb[:,:,i] /= maxVal</span><br><span class="line">    <span class="comment">#rgb[rgb&lt;0]=0</span></span><br><span class="line"></span><br><span class="line">    ax = plt.gca()</span><br><span class="line">    ax.imshow(rgb)</span><br><span class="line">    ax.invert_yaxis()    <span class="comment">#plt显示图片时y轴从上到下，所以反置</span></span><br><span class="line">    <span class="comment"># 坐标映射</span></span><br><span class="line">    plt.xticks(<span class="built_in">range</span>(<span class="number">0</span>,<span class="number">1001</span>,<span class="number">200</span>),[<span class="string">&#x27;0&#x27;</span>,<span class="string">&#x27;0.2&#x27;</span>,<span class="string">&#x27;0.4&#x27;</span>,<span class="string">&#x27;0.6&#x27;</span>,<span class="string">&#x27;0.8&#x27;</span>,<span class="string">&#x27;1&#x27;</span>])</span><br><span class="line">    plt.yticks(<span class="built_in">range</span>(<span class="number">0</span>,<span class="number">1001</span>,<span class="number">200</span>),[<span class="string">&#x27;0&#x27;</span>,<span class="string">&#x27;0.2&#x27;</span>,<span class="string">&#x27;0.4&#x27;</span>,<span class="string">&#x27;0.6&#x27;</span>,<span class="string">&#x27;0.8&#x27;</span>,<span class="string">&#x27;1&#x27;</span>])</span><br><span class="line">    plt.show()</span><br><span class="line"></span><br><span class="line"><span class="comment">#dWave为波长；maxPix为最大值；gamma为参数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getRGB</span>(<span class="params">dWave,maxPix=<span class="number">1</span>,gamma=<span class="number">1</span></span>):</span><br><span class="line">    waveArea = [<span class="number">380</span>,<span class="number">440</span>,<span class="number">490</span>,<span class="number">510</span>,<span class="number">580</span>,<span class="number">645</span>,<span class="number">780</span>]</span><br><span class="line">    minusWave = [<span class="number">0</span>,<span class="number">440</span>,<span class="number">440</span>,<span class="number">510</span>,<span class="number">510</span>,<span class="number">645</span>,<span class="number">780</span>]</span><br><span class="line">    deltWave = [<span class="number">1</span>,<span class="number">60</span>,<span class="number">50</span>,<span class="number">20</span>,<span class="number">70</span>,<span class="number">65</span>,<span class="number">35</span>]</span><br><span class="line">    <span class="keyword">for</span> p <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(waveArea)):</span><br><span class="line">        <span class="keyword">if</span> dWave&lt;waveArea[p]:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">    pVar = <span class="built_in">abs</span>(minusWave[p]-dWave)/deltWave[p]</span><br><span class="line">    rgbs = [[<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],[pVar,<span class="number">0</span>,<span class="number">1</span>],[<span class="number">0</span>,pVar,<span class="number">1</span>],[<span class="number">0</span>,<span class="number">1</span>,pVar],</span><br><span class="line">            [pVar,<span class="number">1</span>,<span class="number">0</span>],[<span class="number">1</span>,pVar,<span class="number">0</span>],[<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>],[<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>]]</span><br><span class="line">    </span><br><span class="line">    <span class="comment">#在光谱边缘处颜色变暗</span></span><br><span class="line">    <span class="keyword">if</span> (dWave&gt;=<span class="number">380</span>) &amp; (dWave&lt;<span class="number">420</span>):</span><br><span class="line">        alpha = <span class="number">0.3</span>+<span class="number">0.7</span>*(dWave-<span class="number">380</span>)/(<span class="number">420</span>-<span class="number">380</span>)</span><br><span class="line">    <span class="keyword">elif</span> (dWave&gt;=<span class="number">420</span>) &amp; (dWave&lt;<span class="number">701</span>):</span><br><span class="line">        alpha = <span class="number">1.0</span></span><br><span class="line">    <span class="keyword">elif</span> (dWave&gt;=<span class="number">701</span>) &amp; (dWave&lt;<span class="number">780</span>):</span><br><span class="line">        alpha = <span class="number">0.3</span>+<span class="number">0.7</span>*(<span class="number">780</span>-dWave)/(<span class="number">780</span>-<span class="number">700</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        alpha = <span class="number">0</span>       <span class="comment">#非可见区</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> [maxPix*(c*alpha)**gamma <span class="keyword">for</span> c <span class="keyword">in</span> rgbs[p]]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">drawSpec</span>():</span><br><span class="line">    pic = np.zeros([<span class="number">100</span>,<span class="number">360</span>,<span class="number">3</span>])</span><br><span class="line">    rgb = [getRGB(d) <span class="keyword">for</span> d <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">400</span>,<span class="number">760</span>)]</span><br><span class="line">    pic = pic+rgb</span><br><span class="line">    plt.imshow(pic)</span><br><span class="line">    plt.yticks([])      <span class="comment">#隐藏y坐标轴</span></span><br><span class="line">    plt.xticks(<span class="built_in">range</span>(<span class="number">0</span>,<span class="number">360</span>,<span class="number">50</span>),[<span class="string">&#x27;400&#x27;</span>,<span class="string">&#x27;450&#x27;</span>,<span class="string">&#x27;500&#x27;</span>,<span class="string">&#x27;550&#x27;</span>,<span class="string">&#x27;600&#x27;</span>,<span class="string">&#x27;650&#x27;</span>,<span class="string">&#x27;700&#x27;</span>,<span class="string">&#x27;750&#x27;</span>])</span><br><span class="line">    plt.show()</span><br><span class="line"></span><br><span class="line">drawSpec()</span><br></pre></td></tr></table></figure>
<h2 id="结果"><a class="markdownIt-Anchor" href="#结果"></a> 结果</h2>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/Hthe6jnw5rRWV8N.png" height=300px>
]]></content>
      <categories>
        <category>数字图像处理</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>数字图像处理</tag>
        <tag>波谱图绘制</tag>
      </tags>
  </entry>
  <entry>
    <title>新年贺词分析</title>
    <url>/posts/c77ed3b9.html</url>
    <content><![CDATA[<h2 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言</h2>
<p>快过年了，想起高中时每年语文老师都会朗读习近平主席的金句名言，以开阔同学们的眼界、猜测高考热点。想到这，心里感慨万千。最近也在复习爬虫的相关知识，于是爬取了三篇习大大的新年贺词，统计词频并生成词云，关注一波近年来我国的热点。</p>
<p>测试环境： Python3.6、win10</p>
<p>第三方库：requests、beautifulsoup、re、WordCloud等</p>
<h2 id="问题分析"><a class="markdownIt-Anchor" href="#问题分析"></a> 问题分析</h2>
<h3 id="爬虫部分"><a class="markdownIt-Anchor" href="#爬虫部分"></a> 爬虫部分</h3>
<p>我们需要爬取习大大近三年的新年贺词，这里选择<a href="http://news.cnr.cn/native/gd/20201231/t20201231_525380797.shtml">央广网</a></p>
<img src = "https://s2.loli.net/2022/03/25/tROQmr7kK6zYEAd.png" width=800px>
<p>近三年来，网站的内容均在类名为article-body的div盒子下，且均为p标签（只有2022年的文章内容给予p标签样式，不通用）</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/GJZPdCYTD9q5vWA.png" width=800px>
<p>利用soup确定文本位置，将三篇贺词写入text.txt，我们便完成了爬虫部分</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">getHtml</span>(<span class="params">url, head</span>):</span><br><span class="line">    r = requests.get(url, headers=head, timeout=<span class="number">30</span>)</span><br><span class="line">    r.raise_for_status()</span><br><span class="line">    r.encoding = <span class="string">&quot;GBK&quot;</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;网页请求成功!&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> r.text</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getSoupText</span>(<span class="params">html</span>):</span><br><span class="line">    soup = BeautifulSoup(html, <span class="string">&quot;html.parser&quot;</span>)</span><br><span class="line">    ps = soup.find(<span class="string">&#x27;div&#x27;</span>, <span class="string">&#x27;article-body&#x27;</span>).find_all(<span class="string">&#x27;p&#x27;</span>)</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;text.txt&quot;</span>, <span class="string">&#x27;a&#x27;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        <span class="keyword">for</span> p <span class="keyword">in</span> ps:</span><br><span class="line">            f.write(<span class="built_in">str</span>(p.get_text()))</span><br><span class="line">        f.write(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">        f.close()</span><br></pre></td></tr></table></figure>
<h3 id="清洗部分"><a class="markdownIt-Anchor" href="#清洗部分"></a> 清洗部分</h3>
<p>这里使用了<a href="https://github.com/goto456/stopwords/blob/master/hit_stopwords.txt">哈工大的停词表</a>清洗text中的无用词汇，排除中文无用虚词&quot;了&quot;的词汇的影响，利用collections库一行代码完成词频统计，并输出词频前十的词条。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">textSolve</span>():</span><br><span class="line">    result = []</span><br><span class="line">    text = <span class="built_in">open</span>(<span class="string">&quot;text.txt&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>).read() </span><br><span class="line">    <span class="comment"># 正则去除中文标点</span></span><br><span class="line">    strs = re.sub(<span class="string">&quot;[\s+\.\!\-\/_,$%^*&lt;&gt;《》()+\&quot;\&#x27;]+|[+——！，。？、~@#￥%……&amp;*（）：”“]&quot;</span>, <span class="string">&quot;&quot;</span>, text)</span><br><span class="line">    <span class="comment"># jieba分词</span></span><br><span class="line">    strs = jieba.cut(strs) </span><br><span class="line">    <span class="comment"># 加载停用词表 清洗无用词 如 “了” “是”等</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;hit_stopwords.txt&quot;</span>, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        remove_words = [w.strip(<span class="string">&#x27;\n&#x27;</span>) <span class="keyword">for</span> w <span class="keyword">in</span> f.readlines()]</span><br><span class="line">    <span class="keyword">for</span> word <span class="keyword">in</span> strs: </span><br><span class="line">        <span class="keyword">if</span> word <span class="keyword">not</span> <span class="keyword">in</span> remove_words:</span><br><span class="line">            result.append(word)</span><br><span class="line">    <span class="comment"># 词频统计</span></span><br><span class="line">    wordCounts = collections.Counter(result) </span><br><span class="line">    wordCountsTop10 = wordCounts.most_common(<span class="number">10</span>) </span><br><span class="line">    <span class="built_in">print</span> (wordCountsTop10)</span><br><span class="line">    <span class="keyword">return</span> wordCounts</span><br></pre></td></tr></table></figure>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/6J9Mq3oSjHKA7y5.png">
<h3 id="词云生成"><a class="markdownIt-Anchor" href="#词云生成"></a> 词云生成</h3>
<p>备忘：词云生成的数据必须为字典类型，存储词条内容与频数的键值对，可以通过font的路径更换生成词云的字体。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">ShowCloud</span>(<span class="params">maskPath, fontPath, fileName, wordCounts</span>): <span class="comment"># 更改传入蒙版和字体的地址参数 以改变词云的形状和字样</span></span><br><span class="line">    <span class="comment"># 词云使用的词频为字典</span></span><br><span class="line">    mask = np.array(Image.<span class="built_in">open</span>(maskPath))</span><br><span class="line">    wc = wordcloud.WordCloud(</span><br><span class="line">        font_path=fontPath,</span><br><span class="line">        mask=mask,</span><br><span class="line">        max_words=<span class="number">200</span>,</span><br><span class="line">        max_font_size=<span class="number">100</span>,</span><br><span class="line">        background_color=<span class="string">&#x27;white&#x27;</span></span><br><span class="line">    )</span><br><span class="line">    wc.generate_from_frequencies(wordCounts)</span><br><span class="line">    image_colors = wordcloud.ImageColorGenerator(mask)</span><br><span class="line">    wc.recolor(color_func=image_colors)</span><br><span class="line">    wc.to_file(<span class="string">&#x27;name.jpg&#x27;</span>)  <span class="comment"># 无白边保存图片 建议</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;请查看name.jpg&quot;</span>)</span><br></pre></td></tr></table></figure>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/C5Gt7Y1ldxBmAar.jpg" width=400px>
<h2 id="代码"><a class="markdownIt-Anchor" href="#代码"></a> 代码</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 爬虫</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="comment"># 清洗</span></span><br><span class="line"><span class="keyword">import</span> re           </span><br><span class="line"><span class="keyword">import</span> jieba</span><br><span class="line"><span class="comment"># 统计</span></span><br><span class="line"><span class="keyword">import</span> collections</span><br><span class="line"><span class="comment"># 词云生成</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> wordcloud    </span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getHtml</span>(<span class="params">url, head</span>):</span><br><span class="line">    r = requests.get(url, headers=head, timeout=<span class="number">30</span>)</span><br><span class="line">    r.raise_for_status()</span><br><span class="line">    r.encoding = <span class="string">&quot;GBK&quot;</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;网页请求成功!&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> r.text</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getSoupText</span>(<span class="params">html</span>):</span><br><span class="line">    soup = BeautifulSoup(html, <span class="string">&quot;html.parser&quot;</span>)</span><br><span class="line">    ps = soup.find(<span class="string">&#x27;div&#x27;</span>, <span class="string">&#x27;article-body&#x27;</span>).find_all(<span class="string">&#x27;p&#x27;</span>)</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;text.txt&quot;</span>, <span class="string">&#x27;a&#x27;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        <span class="keyword">for</span> p <span class="keyword">in</span> ps:</span><br><span class="line">            f.write(<span class="built_in">str</span>(p.get_text()))</span><br><span class="line">        f.write(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">        f.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">textSolve</span>():</span><br><span class="line">    result = []</span><br><span class="line">    text = <span class="built_in">open</span>(<span class="string">&quot;text.txt&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>).read() </span><br><span class="line">    <span class="comment"># 正则去除中文标点</span></span><br><span class="line">    strs = re.sub(<span class="string">&quot;[\s+\.\!\-\/_,$%^*&lt;&gt;《》()+\&quot;\&#x27;]+|[+——！，。？、~@#￥%……&amp;*（）：”“]&quot;</span>, <span class="string">&quot;&quot;</span>, text)</span><br><span class="line">    <span class="comment"># jieba分词</span></span><br><span class="line">    strs = jieba.cut(strs) </span><br><span class="line">    <span class="comment"># 加载停用词表 清洗无用词 如 “了” “是”等</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;hit_stopwords.txt&quot;</span>, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        remove_words = [w.strip(<span class="string">&#x27;\n&#x27;</span>) <span class="keyword">for</span> w <span class="keyword">in</span> f.readlines()]</span><br><span class="line">    <span class="keyword">for</span> word <span class="keyword">in</span> strs: </span><br><span class="line">        <span class="keyword">if</span> word <span class="keyword">not</span> <span class="keyword">in</span> remove_words:</span><br><span class="line">            result.append(word)</span><br><span class="line">    <span class="comment"># 词频统计</span></span><br><span class="line">    wordCounts = collections.Counter(result) </span><br><span class="line">    wordCountsTop10 = wordCounts.most_common(<span class="number">10</span>) </span><br><span class="line">    <span class="built_in">print</span> (wordCountsTop10)</span><br><span class="line">    <span class="keyword">return</span> wordCounts</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">ShowCloud</span>(<span class="params">maskPath, fontPath, fileName, wordCounts</span>):</span><br><span class="line">    <span class="comment"># 词云使用的词频为字典</span></span><br><span class="line">    mask = np.array(Image.<span class="built_in">open</span>(maskPath))</span><br><span class="line">    wc = wordcloud.WordCloud(</span><br><span class="line">        font_path=fontPath,</span><br><span class="line">        mask=mask,</span><br><span class="line">        max_words=<span class="number">200</span>,</span><br><span class="line">        max_font_size=<span class="number">100</span>,</span><br><span class="line">        background_color=<span class="string">&#x27;white&#x27;</span></span><br><span class="line">    )</span><br><span class="line">    wc.generate_from_frequencies(wordCounts)</span><br><span class="line">    image_colors = wordcloud.ImageColorGenerator(mask)</span><br><span class="line">    wc.recolor(color_func=image_colors)</span><br><span class="line">    wc.to_file(<span class="string">&#x27;name.jpg&#x27;</span>)  <span class="comment"># 无白边保存图片 建议</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;请查看name.jpg&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    head = &#123;  <span class="comment"># 模拟浏览器头部信息，向豆瓣服务器发送消息</span></span><br><span class="line">        <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;Mozilla / 5.0(Windows NT 10.0; Win64; x64) AppleWebKit / 537.36(KHTML, like Gecko) Chrome / 80.0.3987.122  Safari / 537.36&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    urls = [<span class="string">&quot;http://china.cnr.cn/news/20200101/t20200101_524921153.shtml&quot;</span>,</span><br><span class="line">            <span class="string">&quot;http://news.cnr.cn/native/gd/20201231/t20201231_525380797.shtml&quot;</span>,          <span class="string">&quot;http://news.cnr.cn/native/gd/20211231/t20211231_525704373.shtml&quot;</span>]</span><br><span class="line">    <span class="keyword">for</span> url <span class="keyword">in</span> urls:</span><br><span class="line">        html = getHtml(url, head)</span><br><span class="line">        getSoupText(html)</span><br><span class="line"></span><br><span class="line">    wordCounts = textSolve()</span><br><span class="line">    <span class="comment"># 这里的四个参数分别为 生成词云图案的蒙版路径、字体路径、保存生成词云的路径、词频统计数据(字典)</span></span><br><span class="line">    ShowCloud(<span class="string">&#x27;xijinping.jpg&#x27;</span>, <span class="string">&#x27;C:/Windows/Fonts/SimHei.ttf&#x27;</span>, <span class="string">&#x27;name.jpg&#x27;</span>, wordCounts)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">main()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="效果展示"><a class="markdownIt-Anchor" href="#效果展示"></a> 效果展示</h2>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/7KBdPl5SOF4Jmrx.jpg">
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>爬虫</tag>
        <tag>jieba分词</tag>
        <tag>词云</tag>
      </tags>
  </entry>
  <entry>
    <title>少年歌行</title>
    <url>/posts/ace524d8.html</url>
    <content><![CDATA[<blockquote>
<p>你好像什么都知道？</p>
<p>只是不知道自己的命……所以才想、算上一卦</p>
</blockquote>
<blockquote>
<p>长风不才，想收萧兄弟为徒</p>
</blockquote>
<blockquote>
<p>画雪山庄的梅花总会在片刻之间悄然凋谢，往往这些时候都会下着微微的细雪。阿爹还在世的时候，每年都等着看这片刻凋零的美景，他称这种景色为‘雪殇’，他觉得梅花凋零之时，雪也已然死去了。本来等了许久想看这一场‘雪殇’的，只是，你竟一刀将那些花都给斩落了。</p>
</blockquote>
<blockquote>
<p>只要还没死，赌局就还在</p>
</blockquote>
<blockquote>
<p>阿弥陀佛，不错，正是小僧</p>
</blockquote>
<blockquote>
<p>所以，我们又没盘缠了是吗？</p>
</blockquote>
<blockquote>
<p>师叔祖走了，给你们带个师娘回来</p>
</blockquote>
]]></content>
      <categories>
        <category>文案摘录</category>
      </categories>
      <tags>
        <tag>中二病</tag>
        <tag>小说</tag>
        <tag>文摘</tag>
        <tag>少年歌行</tag>
      </tags>
  </entry>
  <entry>
    <title>数字图像处理测验题</title>
    <url>/posts/c112ceef.html</url>
    <content><![CDATA[<h2 id="第一章"><a class="markdownIt-Anchor" href="#第一章"></a> 第一章</h2>
<h3 id="选择题"><a class="markdownIt-Anchor" href="#选择题"></a> 选择题</h3>
<ol>
<li>
<p>彩色图像中，记录的是对应空间点处的（）<br />
A. 能量值<br />
<mark>B. RGB值</mark><br />
C. 光强值<br />
D. 索引值</p>
</li>
<li>
<p>数字图像处理对应的英语术语是（ ）。<br />
A. Image Processing<br />
B. Computer Image Processing<br />
<mark>C. Digital Image Processing</mark><br />
D. Computer Vision</p>
</li>
<li>
<p>广义数字图像处理分成（ ）。<br />
<mark>A. 中级处理</mark><br />
<mark>B. 高级处理</mark><br />
<mark>C. 低级处理</mark><br />
D. 混合处理</p>
</li>
<li>
<p>下列选项中，（ ）是上机加分项。<br />
A. 完成上机作业基本功能<br />
B. 使用matlab完成上机作业<br />
<mark>C. 使用opencv完成上机作业</mark><br />
<mark>D. “零”起点完成上机作业</mark></p>
</li>
<li>
<p>根据信息来源分，数字图像由（ ）形成的。<br />
<mark>A. X射线成像<br />
B. 微波波段成像<br />
C. 紫外波段成像<br />
D. γ射线成像</mark></p>
</li>
<li>
<p>数字图像按照图像表现形式分成二值图像、灰度图像、（）。<br />
A. 连续图像<br />
<mark>B. 彩色图像</mark><br />
C. 合成图像<br />
<mark>D. 索引图像</mark></p>
</li>
<li>
<p>判断题答案须用（ ）标明。示例：我是题干内容。（ ）或者（错）<br />
<mark>A. 对</mark><br />
B. 错</p>
</li>
<li>
<p>数字图像就是离散化，或者说数字化了的图像。（ ）<br />
<mark>A. 对</mark><br />
B. 错</p>
</li>
</ol>
<h3 id="简答题"><a class="markdownIt-Anchor" href="#简答题"></a> 简答题</h3>
<ol>
<li>
<p>简述文本识别(OCR)的过程。</p>
<p>获取图像，图像的预处理（如校正），提取字符（图像分割），字符的特征描述，特征匹配。</p>
</li>
<li>
<p>简述数字图像处理的狭义概念。</p>
<p>对图像进行各种加工，以改善图像的视觉效果或突出目标，强调图像之间进行的变换，是一个从图像到图像的过程。</p>
</li>
</ol>
<h2 id="第二章"><a class="markdownIt-Anchor" href="#第二章"></a> 第二章</h2>
<h3 id="选择题-2"><a class="markdownIt-Anchor" href="#选择题-2"></a> 选择题</h3>
<ol>
<li>
<p>列选项，（ ）不是DIP的根据记录信息性质划分的图像类型。<br />
A. 灰度图像<br />
<mark>B. 矢量图像</mark><br />
C. 彩色图像<br />
D. 黑白图像</p>
</li>
<li>
<p>成像模型中，亮度函数f(x,y)跟照度成分和反射成分的关系是（ ）。<br />
A. 跟照度成分成正比，跟反射成分成反比<br />
B. 都成反比<br />
C. 跟照度成分成反比，跟反射成分成正比<br />
<mark>D. 都成正比</mark></p>
</li>
<li>
<p>采样和量化的特点是（ ）。<br />
<mark>A. 采样是均匀的，量化可以均匀，可以非均匀</mark><br />
B. 采样是均匀的，量化是非均匀的<br />
C. 采样可以均匀，也可以非均匀，量化是均匀的<br />
D. 采样是非均匀的，量化是均匀的</p>
</li>
<li>
<p>下列跟数字图像处理相关的会议，（ ）是隶属国内的。<br />
A. ICCV<br />
B. IJCAI<br />
<mark>C. PRCV</mark><br />
D. CVPR</p>
</li>
<li>
<p>人的视网膜上，（ ）是负责感受颜色信息的。<br />
A. 上皮细胞<br />
B. 神经细胞<br />
C. 杆状细胞<br />
<mark>D. 锥状细胞</mark></p>
</li>
<li>
<p>图像邻域之间邻接关系包括（ ）。<br />
<mark>A. 4邻域<br />
B. 对角邻域<br />
C. 8邻域</mark><br />
D. 十字邻域</p>
</li>
<li>
<p>像处理系统具有（ ）功能。<br />
<mark>A. 图像输入<br />
B. 图像处理<br />
C. 图像存储<br />
D. 图像输出</mark></p>
</li>
<li>
<p>图像之间的四则运算，只要直接运算就行。（ ）<br />
A. 对<br />
<mark>B. 错</mark></p>
</li>
<li>
<p>像素之间的连接和邻接不相同。（ ）<br />
<mark>A. 对</mark><br />
B. 错</p>
</li>
<li>
<p>一个1024×1024的灰度图像占用存储空间大小为1M字节。（ ）<br />
A. 对<br />
<mark>B. 错</mark></p>
</li>
</ol>
<h3 id="简答题-2"><a class="markdownIt-Anchor" href="#简答题-2"></a> 简答题</h3>
<ol>
<li>
<p>有如下图的5*5的图像，分别记录每个像素点的灰度值，共5级灰度。令V={0,1,2}，计算p与q之间的D4，D8和Dm。若V={2,3,4}，计算p与q之间的D4，D8和Dm。</p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mtable rowspacing="0.15999999999999992em" columnalign="right right right right left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>2</mn><mo stretchy="false">(</mo><mi>q</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo stretchy="false">(</mo><mi>p</mi><mo stretchy="false">)</mo><mn>3</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4</mn></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{array}{rrrrl}3 &amp; 4 &amp; 1 &amp; 2 &amp; 0 \\ 0 &amp; 1 &amp; 0 &amp; 4 &amp; 2(q) \\ 2 &amp; 2 &amp; 3 &amp; 1 &amp; 4 \\ (p) 3 &amp; 0 &amp; 4 &amp; 2 &amp; 1 \\ 1 &amp; 2 &amp; 0 &amp; 3 &amp; 4\end{array}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:6.000000000000001em;vertical-align:-2.7500000000000004em;"></span><span class="mord"><span class="mtable"><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.2500000000000004em;"><span style="top:-5.410000000000001em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span></span></span><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-1.8099999999999998em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord mathdefault">p</span><span class="mclose">)</span><span class="mord">3</span></span></span><span style="top:-0.6099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.7500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.2500000000000004em;"><span style="top:-5.410000000000001em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">4</span></span></span><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-1.8099999999999998em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-0.6099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.7500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.2500000000000004em;"><span style="top:-5.410000000000001em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span></span></span><span style="top:-1.8099999999999998em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">4</span></span></span><span style="top:-0.6099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.7500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.2500000000000004em;"><span style="top:-5.410000000000001em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">4</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-1.8099999999999998em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-0.6099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.7500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.2500000000000004em;"><span style="top:-5.410000000000001em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mclose">)</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">4</span></span></span><span style="top:-1.8099999999999998em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-0.6099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.7500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span></span></span></span></span></span></p>
<p>V={0,1,2}时，D4=无穷大，D8=无穷大，Dm=无穷大；V={2,3,4}时，D4=无穷大，D8=4，Dm=5。</p>
</li>
<li>
<p>数字数据传输通常使用波特率度量，波特率指的是每秒钟传输的bit数量。通常，每传输一个字节时，先传一个开始bit，再传这个字节信息，然后传一个结束bit。现使用33.6K波特率的网络，传一个2048*2048的256级灰度的图像，需要多长时间。</p>
<p>2048 * 2048 *（1+8+1）/33600=1248.3秒=20.8分</p>
</li>
</ol>
<h2 id="第三章"><a class="markdownIt-Anchor" href="#第三章"></a> 第三章</h2>
<h3 id="选择题-3"><a class="markdownIt-Anchor" href="#选择题-3"></a> 选择题</h3>
<ol>
<li>关于直方图均衡化，（ ）是对的。<br />
A. 是将灰度概率密度分布变成二值分布<br />
<mark>B. 是将灰度概率密度分布变成均匀分布</mark><br />
C. 是将灰度概率密度分布变成高斯分布<br />
D. 是将灰度概率密度分布变成多项式分布</li>
<li>数字图像处理中，邻域有（ ）性质。<br />
<mark>A. 包含点(?,?)的小区域，区域中心是点(?,?)<br />
B. 邻域通常是奇数行(列)，基本是对称的<br />
C. 邻域大小&lt;&lt;图像尺寸</mark><br />
D. 邻域大小应该是固定的</li>
<li>数字图像处理中，灰度直方图是（ ）。<br />
A. 提供了图像像素的空间分布情况<br />
B. 数字图像中部分灰度级，它出现的频数的统计<br />
<mark>C. 数字图像中每一灰度级，它出现的频数的统计<br />
D. 提供了图像像素的灰度值分布情况</mark></li>
<li>下列选项中，（ ）是图像增强的特点。<br />
<mark>A. 改善后的图像不一定要去逼近原图像</mark><br />
B. 改善后的图像一定要跟原图像一致<br />
<mark>C. 不考虑图像降质的原因，只将图像中感兴趣的特征有选择地突出（增强），而衰减其不需要的特征</mark><br />
D. 考虑图像降质原因，根据具体原因，进行图像质量改善</li>
<li>数字图像处理中，空域增强计算过程（ ）。<br />
<mark>A. 在每个像素处，使用模板进行计算，将结果赋给该像素<br />
B. 边缘需要补零，补零的数量跟模板相关</mark><br />
C. 边缘需要补零，补零的数量是用户确定的<br />
<mark>D. 从左到右，从上到下遍历所有像素</mark></li>
<li>关于指数变换，（ ）是对的。<br />
<mark>A. γ&lt;1低灰度拉伸，高灰度压缩<br />
B. γ&gt;1低灰度压缩，高灰度拉伸</mark><br />
C. γ&gt;1低灰度拉伸，高灰度压缩<br />
<mark>D. γ=1就是恒等变换</mark><br />
E. γ&lt;1低灰度压缩，高灰度拉伸</li>
<li>图像空域增强是指直接在图像像素组成的空间进行的图像增强。（ ）<br />
<mark>A. 对</mark><br />
B. 错</li>
<li>图像空域增强当模板的大小是1*1时，就是空间点变换。（ ）<br />
<mark>A. 对</mark><br />
B. 错</li>
<li>直方图均衡化是一种空间点变换。（ ）<br />
<mark>A. 对</mark><br />
B. 错</li>
<li>数字图像改善图像质量的方法有两类：图像增强和图像恢复。（ ）<br />
<mark>A. 对</mark><br />
B. 错</li>
</ol>
<h3 id="简答题-3"><a class="markdownIt-Anchor" href="#简答题-3"></a> 简答题</h3>
<ol>
<li>一个 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span></span></span></span> 为正常数的指数式<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><msup><mi>e</mi><mrow><mo>−</mo><mi>α</mi><msup><mi>r</mi><mn>2</mn></msup></mrow></msup></mrow><annotation encoding="application/x-tex">A e^{-\alpha r^{2}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9869199999999999em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9869199999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mathdefault mtight" style="margin-right:0.0037em;">α</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913142857142857em;"><span style="top:-2.931em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>对于对于构造平滑的灰度变换函数非常有用。从该基础函数出发，构造具有下列图形形状的变换函数。图中所示常数是输入参数。</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/tj67WHxAPlRdMTm.png" width=300px position=left>参考答案： <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><msup><mi>e</mi><mrow><mo>−</mo><mfrac><mn>1.097</mn><msub><mi>L</mi><mn>0</mn></msub></mfrac><msup><mi>r</mi><mn>2</mn></msup></mrow></msup></mrow><annotation encoding="application/x-tex">A e^{-\frac{1.097}{L_{0}} r^{2}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1222899999999998em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.1222899999999998em;"><span style="top:-3.4983700000000004em;margin-right:0.05em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8443142857142858em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3447999999999998em;margin-left:0em;margin-right:0.1em;"><span class="pstrut" style="height:2.64444em;"></span><span class="mord mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.29964em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.2255000000000003em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.384em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">.</span><span class="mord mtight">0</span><span class="mord mtight">9</span><span class="mord mtight">7</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.5580285714285714em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913142857142857em;"><span style="top:-2.931em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<ol start="2">
<li>
<p>对一幅图像进行直方图均衡处理之后，对得到的结果图像再做一次直方图均衡化处理，会得到什么结果？说明原因。</p>
<p>跟第一次结果相同。因为第一次处理完图像灰度分布是均匀分布，再处理得到结果也是均匀分布，所以是相同的。</p>
</li>
</ol>
<h2 id="第四章"><a class="markdownIt-Anchor" href="#第四章"></a> 第四章</h2>
<h3 id="选择题-4"><a class="markdownIt-Anchor" href="#选择题-4"></a> 选择题</h3>
<ol>
<li>数字图像处理中，直方图均衡化的变换函数是（ ）。<br />
A. 概率分布列<br />
<mark>B. 累积分布函数</mark><br />
C. 概率密度函数<br />
D. 高斯函数</li>
<li>一个灰度分布均匀的图像，其直方图均衡化过程的变换函数（ ）。<br />
A. 比较平缓的<br />
B. 比较陡峭的<br />
<mark>C. 近似于45度线</mark><br />
D. 近似于135度线</li>
<li>数字图像处理中，线性平滑滤波器有（ ）。<br />
<mark>A. 邻域平均</mark><br />
B. 邻域差分<br />
<mark>C. 加权平均</mark><br />
D. 中值滤波</li>
<li>图像直方图规定化，包含下列（ ）。<br />
<mark>A. 使用原始图像均衡化灰度作为中间媒介，代入到目标直方图累积分布函数反函数中计算出其对应的灰度<br />
B. 计算目标直方图累积分布函数的反函数<br />
C. 对原始图像计算灰度分布直方图<br />
D. 计算原始图像灰度分布直方图的累积分布函数<br />
E. 计算目标直方图的累积分布函数</mark></li>
<li>局部直方图处理本质上就是给图像直方图处理加上一个小的范围，并只对小范围中心像素进行处理。（ ）<br />
<mark>A. 对</mark><br />
B. 错</li>
<li>计算图像灰度分布直方图，只要数出各级灰度的数量就行。（ ）<br />
A. 对<br />
<mark>B. 错</mark></li>
<li>暗图像灰度分布直方图是灰度分布在小于128灰度部分。（ ）<br />
<mark>A. 对</mark><br />
B. 错</li>
<li>平滑滤波本质是积分变换。（ ）<br />
<mark>A. 对</mark><br />
B. 错</li>
</ol>
<h3 id="简答题-4"><a class="markdownIt-Anchor" href="#简答题-4"></a> 简答题</h3>
<ol>
<li>
<p>设一幅图像的直方图如下图（a）所示，完成：（1）均衡化处理；（2）按图（b）直方图规定化；</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/dxPKpoGymBnWr2C.png" width=600px> 
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/5gsvVAIlRCHzDUj.png" width=600px> 
</li>
<li>
<p>给出求n*n邻域的中值滤波步骤；设计一种逐像素移动邻域的中心进行中值滤波的更新中值技术，提高算法效率。</p>
<p>参考答案：</p>
<p>中值滤波步骤：</p>
<p>a确定像素集合；b按灰度排序；c求中值；d使用中值替代中心像素值；e移动邻域反复计算，直到所有像素完成。</p>
<p>更新中值算法：</p>
<p>a移动到新位置；b去掉原来序列中移走的值；c插入新值并排序；d计算中值</p>
</li>
</ol>
<h2 id="第五章"><a class="markdownIt-Anchor" href="#第五章"></a> 第五章</h2>
<h3 id="选择题-5"><a class="markdownIt-Anchor" href="#选择题-5"></a> 选择题</h3>
<ol>
<li>空间域局部增强（ ）。<br />
A. 局部选择是必须根据图像灰度均值和方差进行选择<br />
B. 局部选择是固定选为像素的邻域<br />
<mark>C. 局部选择根据实际问题要求灵活设定</mark></li>
<li>数字图像处理中，（ ）是各向同性的滤波器。<br />
A. 梯度算子<br />
B. 中值滤波<br />
<mark>C. Laplace算子</mark><br />
D. 邻域差分</li>
<li>下列算法中（ ）是线性平滑滤波器。<br />
<mark>A. 邻域平均</mark><br />
B. 最大值滤波<br />
C. 中值滤波<br />
D. 中点滤波</li>
<li>数字图像处理中，频域性质（ ）。<br />
<mark>A. 高频（远离原点）对应图像灰度变化快的像素<br />
B. 变化最慢的频率成分(u=0, v=0)对应一幅图像的平均灰度</mark><br />
C. 高频和低频掺杂在一块，不易区分。<br />
<mark>D. 低频（原点附近）对应图像灰度变化慢的像素</mark></li>
<li>关于傅里叶变换的尺度定理，正确的是（ ）。<br />
<mark>A. 对f(x, y)的收缩(对应a&gt;1, b&gt;1)不仅导致F(u, v)的膨胀，还使F(u, v)的幅度减小。</mark><br />
B. 对f(x, y)的膨胀(对应a&lt;1, b&lt;1)不仅导致F(u, v)的膨胀，还使F(u, v)的幅度减小。<br />
<mark>C. 对 f(x, y) 在幅度方面的放缩导致对其傅立叶变换F(u, v)在频域幅度方面的相应放缩。<br />
D. 对 f(x, y) 在空间尺度方面的放缩导致对其傅立叶变换F(u, v)在频域尺度方面的相反放缩。</mark></li>
<li>傅里叶变换给我们提供了一个从另外角度看待信号的工具。（ ）<br />
<mark>A. 对</mark><br />
B. 错</li>
<li>傅里叶变换满足周期性。（ ）<br />
<mark>A. 对</mark><br />
B. 错</li>
<li>根据傅立叶级数定义，时域是一个周期且连续的函数，在频域是一个非周期离散的函数。（ ）<br />
<mark>A. 对</mark><br />
B. 错</li>
</ol>
<h3 id="简答题-5"><a class="markdownIt-Anchor" href="#简答题-5"></a> 简答题</h3>
<ol>
<li>
<p>说明傅里叶变换的主要性质。</p>
<ol>
<li>数字图像傅立叶变换是共轭对称的</li>
<li>数字图像的频谱是关于原点偶对称的</li>
<li>数字图像的相位角是关于原点奇对称的</li>
<li>平移性质</li>
<li>旋转性质</li>
<li>尺度定理</li>
<li>卷积定理</li>
<li>相关定理</li>
<li>周期性</li>
</ol>
</li>
<li>
<p>有一个一维的数字信号，有4个样本点，分别是f(0)=2, f(1)=3, f(2)=2, f(3)=0，请使用一维的离散傅里叶变换将这个信号变换到傅里叶域。</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/ZLuz3qAOnxk6mgp.jpg" width=400px height=450px> 
</li>
</ol>
<h2 id="第六章"><a class="markdownIt-Anchor" href="#第六章"></a> 第六章</h2>
<h3 id="选择题-6"><a class="markdownIt-Anchor" href="#选择题-6"></a> 选择题</h3>
<ol>
<li>
<p>数字图像傅立叶变换是（ ）。<br />
A. 反对称的<br />
B. 共轭反对称的<br />
C. 对称的<br />
<mark>D. 共轭对称的</mark></p>
</li>
<li>
<p>下列图像中，上面一行是其空间表达，下面一行是其频谱，则（ ）是正确的频谱顺序。</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/YBNHIhWrmoF148l.png" width=600 >
<p>A. 1-3-2-4<br />
<mark>B. 1-2-3-4</mark><br />
C. 3-2-1-4<br />
D. 4-2-3-1</p>
</li>
<li>
<p>一维傅里叶变换（N个采样点）的时间复杂度是（ ）。<br />
A. O(N^3)<br />
B. O(Nlog(N))<br />
<mark>C. O(N^2)</mark><br />
D. O(N)</p>
</li>
<li>
<p>傅里叶变换得到频谱信息中，（ ）是以实数矩阵形式呈现的。<br />
<mark>A. 功率谱<br />
B. 相位谱<br />
C. 频谱</mark><br />
D. 傅里叶变换结果</p>
</li>
<li>
<p>关于二维傅里叶变换的周期性，正确的是（ ）。</p>
<p><mark>A. <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="bold-italic">F</mi><mo stretchy="false">(</mo><mi mathvariant="bold-italic">u</mi><mo separator="true">,</mo><mi mathvariant="bold-italic">v</mi><mo stretchy="false">)</mo><mo>=</mo><mi mathvariant="bold-italic">F</mi><mrow><mo fence="true">(</mo><mi mathvariant="bold-italic">u</mi><mo>+</mo><msub><mi mathvariant="bold-italic">k</mi><mn>1</mn></msub><mi mathvariant="bold-italic">M</mi><mo separator="true">,</mo><mi mathvariant="bold-italic">v</mi><mo fence="true">)</mo></mrow><mo>=</mo><mi mathvariant="bold-italic">F</mi><mrow><mo fence="true">(</mo><mi mathvariant="bold-italic">u</mi><mo separator="true">,</mo><mi mathvariant="bold-italic">v</mi><mo>+</mo><msub><mi mathvariant="bold-italic">k</mi><mn>2</mn></msub><mi mathvariant="bold-italic">N</mi><mo fence="true">)</mo></mrow></mrow><annotation encoding="application/x-tex">\boldsymbol{F}(\boldsymbol{u}, \boldsymbol{v})=\boldsymbol{F}\left(\boldsymbol{u}+\boldsymbol{k}_{1} \boldsymbol{M}, \boldsymbol{v}\right)=\boldsymbol{F}\left(\boldsymbol{u}, \boldsymbol{v}+\boldsymbol{k}_{2} \boldsymbol{N}\right)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord"><span class="mord boldsymbol" style="margin-right:0.15972em;">F</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord"><span class="mord boldsymbol">u</span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord"><span class="mord boldsymbol" style="margin-right:0.03704em;">v</span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord"><span class="mord boldsymbol" style="margin-right:0.15972em;">F</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="mord"><span class="mord"><span class="mord boldsymbol">u</span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord"><span class="mord"><span class="mord boldsymbol" style="margin-right:0.01852em;">k</span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord"><span class="mord boldsymbol" style="margin-right:0.11424em;">M</span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord"><span class="mord boldsymbol" style="margin-right:0.03704em;">v</span></span></span><span class="mclose delimcenter" style="top:0em;">)</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord"><span class="mord boldsymbol" style="margin-right:0.15972em;">F</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="mord"><span class="mord"><span class="mord boldsymbol">u</span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord"><span class="mord boldsymbol" style="margin-right:0.03704em;">v</span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord"><span class="mord"><span class="mord boldsymbol" style="margin-right:0.01852em;">k</span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord"><span class="mord boldsymbol" style="margin-right:0.11424em;">N</span></span></span><span class="mclose delimcenter" style="top:0em;">)</span></span></span></span></span><br />
B. <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="bold-italic">f</mi><mo stretchy="false">(</mo><mi mathvariant="bold-italic">x</mi><mo separator="true">,</mo><mi mathvariant="bold-italic">y</mi><mo stretchy="false">)</mo><mo>=</mo><mi mathvariant="bold-italic">f</mi><mrow><mo fence="true">(</mo><mi mathvariant="bold-italic">x</mi><mo>+</mo><msub><mi mathvariant="bold-italic">k</mi><mn>1</mn></msub><mi mathvariant="bold-italic">M</mi><mo separator="true">,</mo><mi mathvariant="bold-italic">y</mi><mo fence="true">)</mo></mrow></mrow><annotation encoding="application/x-tex">\boldsymbol{f}(\boldsymbol{x}, \boldsymbol{y})=\boldsymbol{f}\left(\boldsymbol{x}+\boldsymbol{k}_{1} \boldsymbol{M}, \boldsymbol{y}\right)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord"><span class="mord boldsymbol" style="margin-right:0.11042em;">f</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord"><span class="mord boldsymbol">x</span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord"><span class="mord boldsymbol" style="margin-right:0.03704em;">y</span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord"><span class="mord boldsymbol" style="margin-right:0.11042em;">f</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="mord"><span class="mord"><span class="mord boldsymbol">x</span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord"><span class="mord"><span class="mord boldsymbol" style="margin-right:0.01852em;">k</span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord"><span class="mord boldsymbol" style="margin-right:0.11424em;">M</span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord"><span class="mord boldsymbol" style="margin-right:0.03704em;">y</span></span></span><span class="mclose delimcenter" style="top:0em;">)</span></span></span></span></span><br />
C. <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="bold-italic">f</mi><mrow><mo fence="true">(</mo><mi mathvariant="bold-italic">x</mi><mo separator="true">,</mo><mi mathvariant="bold-italic">y</mi><mo>+</mo><msub><mi mathvariant="bold-italic">k</mi><mn>2</mn></msub><mi mathvariant="bold-italic">N</mi><mo fence="true">)</mo></mrow><mo>=</mo><mi mathvariant="bold-italic">f</mi><mrow><mo fence="true">(</mo><mi mathvariant="bold-italic">x</mi><mo>+</mo><msub><mi mathvariant="bold-italic">k</mi><mn>1</mn></msub><mi mathvariant="bold-italic">M</mi><mo separator="true">,</mo><mi mathvariant="bold-italic">y</mi><mo>+</mo><msub><mi mathvariant="bold-italic">k</mi><mn>2</mn></msub><mi mathvariant="bold-italic">N</mi><mo fence="true">)</mo></mrow></mrow><annotation encoding="application/x-tex">\boldsymbol{f}\left(\boldsymbol{x}, \boldsymbol{y}+\boldsymbol{k}_{2} \boldsymbol{N}\right)=\boldsymbol{f}\left(\boldsymbol{x}+\boldsymbol{k}_{1} \boldsymbol{M}, \boldsymbol{y}+\boldsymbol{k}_{2} \boldsymbol{N}\right)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord"><span class="mord boldsymbol" style="margin-right:0.11042em;">f</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="mord"><span class="mord"><span class="mord boldsymbol">x</span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord"><span class="mord boldsymbol" style="margin-right:0.03704em;">y</span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord"><span class="mord"><span class="mord boldsymbol" style="margin-right:0.01852em;">k</span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord"><span class="mord boldsymbol" style="margin-right:0.11424em;">N</span></span></span><span class="mclose delimcenter" style="top:0em;">)</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord"><span class="mord boldsymbol" style="margin-right:0.11042em;">f</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="mord"><span class="mord"><span class="mord boldsymbol">x</span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord"><span class="mord"><span class="mord boldsymbol" style="margin-right:0.01852em;">k</span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord"><span class="mord boldsymbol" style="margin-right:0.11424em;">M</span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord"><span class="mord boldsymbol" style="margin-right:0.03704em;">y</span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord"><span class="mord"><span class="mord boldsymbol" style="margin-right:0.01852em;">k</span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord"><span class="mord boldsymbol" style="margin-right:0.11424em;">N</span></span></span><span class="mclose delimcenter" style="top:0em;">)</span></span></span></span></span><br />
D. <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="bold-italic">F</mi><mo stretchy="false">(</mo><mi mathvariant="bold-italic">u</mi><mo separator="true">,</mo><mi mathvariant="bold-italic">v</mi><mo stretchy="false">)</mo><mo>=</mo><mi mathvariant="bold-italic">F</mi><mrow><mo fence="true">(</mo><mi mathvariant="bold-italic">u</mi><mo>+</mo><msub><mi mathvariant="bold-italic">k</mi><mn>1</mn></msub><mi mathvariant="bold-italic">M</mi><mo separator="true">,</mo><mi mathvariant="bold-italic">v</mi><mo fence="true">)</mo></mrow></mrow><annotation encoding="application/x-tex">\boldsymbol{F}(\boldsymbol{u}, \boldsymbol{v})=\boldsymbol{F}\left(\boldsymbol{u}+\boldsymbol{k}_{1} \boldsymbol{M}, \boldsymbol{v}\right)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord"><span class="mord boldsymbol" style="margin-right:0.15972em;">F</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord"><span class="mord boldsymbol">u</span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord"><span class="mord boldsymbol" style="margin-right:0.03704em;">v</span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord"><span class="mord boldsymbol" style="margin-right:0.15972em;">F</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="mord"><span class="mord"><span class="mord boldsymbol">u</span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord"><span class="mord"><span class="mord boldsymbol" style="margin-right:0.01852em;">k</span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord"><span class="mord boldsymbol" style="margin-right:0.11424em;">M</span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord"><span class="mord boldsymbol" style="margin-right:0.03704em;">v</span></span></span><span class="mclose delimcenter" style="top:0em;">)</span></span></span></span></span></mark></p>
</li>
<li>
<p>高维的傅里叶变换可以分离成多个一维的傅里叶变换。（ ）<br />
<mark>A. 对</mark><br />
B. 错</p>
</li>
<li>
<p>快速傅里叶变换主要思路是将长度为N的傅里叶变换，转换成两个长度为N/2的傅里叶变换。（ ）<br />
<mark>A. 对</mark><br />
B. 错</p>
</li>
<li>
<p>傅立叶变换平移性质，是指当空域图像目标位置变化之后，其频谱不发生改变。（ ）<br />
<mark>A. 对</mark><br />
B. 错</p>
</li>
</ol>
<h2 id="第七章"><a class="markdownIt-Anchor" href="#第七章"></a> 第七章</h2>
<h3 id="选择题-7"><a class="markdownIt-Anchor" href="#选择题-7"></a> 选择题</h3>
<ol>
<li>下列应用，（ ）不是使用低通滤波的。<br />
A. 人脸皱纹处理<br />
B. 图像量化不足产生的伪轮廓处理<br />
C. 字符扫描间断处理<br />
<mark>D. 图像亮度不足处理</mark></li>
<li>关于空域平滑滤波和频域低通滤波，（ ）是正确的。<br />
A. 频域越宽，空域越宽，平滑作用越弱<br />
<mark>B. 频域越宽，空域越窄，平滑作用越弱</mark><br />
C. 频域越宽，空域越窄，平滑作用越强<br />
D. 频域越窄，空域越窄，平滑作用越强</li>
<li>下列图像变换中，（ ）不是实数变换。<br />
A. 离散余弦变换<br />
B. 沃尔什变换<br />
C. 正弦变换<br />
<mark>D. 傅里叶变换</mark></li>
<li>高通滤波中，（ ）是正确的。<br />
<mark>A. 通过高频强调滤波可以改善高通滤波的不足<br />
B. 高通滤波去掉了F(0,0)，所以转换后得到的图像整体亮度低<br />
C. 高通滤波结果是边缘加强，光滑区域变暗<br />
D. 通过高频提升滤波可以改善高通滤波的不足</mark></li>
<li>关于同态滤波，正确的是（ ）。<br />
<mark>A. 通过log变换将乘性信息，转换成为加性信息<br />
B. 图像对数变换之后，再进行傅里叶变换，则低频部分对应照度成分，高频部分对应反射成分<br />
C. 能够压缩亮度范围并加强对比度<br />
D. 使用高通滤波类的增强变换</mark></li>
<li>高斯滤波器是完全不会产生振铃效应的。（ ）<br />
<mark>A. 对</mark><br />
B. 错</li>
<li>同类型的低通滤波器与高通滤波器相加为1。（ ）<br />
A. 对<br />
B. 错</li>
<li>陷波滤波器本质上是多个低通滤波器进行平移后再相乘。（ ）<br />
A. 对<br />
<mark>B. 错</mark></li>
</ol>
<h3 id="简答题-6"><a class="markdownIt-Anchor" href="#简答题-6"></a> 简答题</h3>
<ol>
<li>
<p>图像的傅立叶频谱是如何反映图像的特征的？</p>
<p>（1）变化最慢的频率成分(u=0, v=0)对应一幅图像的平均灰度</p>
<p>（2）低频（原点附近）对应图像灰度变化慢的像素，低频能量比例高，说明图像中边缘等信息较少</p>
<p>（3）高频（远离原点）对应图像灰度变化快的像素，高频能量比例高，说明图像中边缘等信息较多</p>
<p>（4）频域有某一方向的亮线条，说明图像中与之垂直方向上有较多线条</p>
</li>
<li>
<p>在什么条件下巴特沃斯低通滤波器变成理想低通滤波器？</p>
<p>当巴特沃斯低通滤波器的阶数n趋于无穷大时，就是理想低通滤波器。</p>
<p>当D(u,v)&gt;D0，D(u,v)/ D0&gt;1，当n趋于无穷大时，H(u,v)趋于0；</p>
<p>当D(u,v)&lt;D0，D(u,v)/ D0&lt;1，当n趋于无穷大时，H(u,v)趋于1。</p>
<p>巴特沃斯低通滤波器就变成了理想低通滤波器。</p>
</li>
</ol>
<h2 id="第八章"><a class="markdownIt-Anchor" href="#第八章"></a> 第八章</h2>
<h3 id="选择题-8"><a class="markdownIt-Anchor" href="#选择题-8"></a> 选择题</h3>
<ol>
<li>逆滤波中，（ ）是振铃效应出现的原因。<br />
A. 逆滤波中，忽略了噪声的影响<br />
B. 逆滤波中，使用了H(u,v)的值的大小定义恢复转移函数<br />
C. 逆滤波的退化函数在UV平面上取零值<br />
<mark>D. 逆滤波中，按照离频谱中心的远近定义了恢复转移函数</mark></li>
<li>关于退化系统H，下面选项（ ）是对的。<br />
A. 只有线性、位置不变的退化系统<br />
<mark>B. 线性、位置不变的退化系统在频域建模为图像的频谱与退化函数的频谱的乘积</mark><br />
C. 线性、位置不变的退化系统在空间域建模为图像与退化函数的乘积<br />
D. 非线性、位置不变的退化过程是比较罕见的</li>
<li>关于自适应中值滤波器，基本思想是（ ）。<br />
A. 随机修改计算中值的区域的大小，以适应噪声高发区域<br />
B. 根据一定的条件，修改计算中值的灰度范围大小，以适应噪声高发区域<br />
C. 根据一定的条件，修改计算中值的算法，以提高计算效率<br />
<mark>D. 根据一定的条件，修改计算中值的区域的大小，以适应噪声高发区域</mark></li>
<li>对于图像中的周期噪声，采用（ ）滤波器去除。<br />
<mark>A. 带阻滤波器</mark><br />
B. 带通滤波器<br />
<mark>C. 陷波滤波器</mark><br />
D. 低通滤波器</li>
<li>对于图像中的加性噪声，采用（ ）去除。<br />
<mark>A. 谐波均值滤波<br />
B. 算术均值滤波<br />
C. 几何均值滤波<br />
D. 逆谐波均值滤波</mark></li>
<li>图像噪声的概率密度函数表示，其自变量是图像灰度值。（ ）<br />
<mark>A. 对</mark><br />
B. 错</li>
<li>高斯噪声是一种乘性噪声。（ ）<br />
A. 对<br />
<mark>B. 错</mark></li>
<li>matlab中，叠加噪声的函数是imnoise()。（ ）<br />
<mark>A. 对</mark><br />
B. 错</li>
</ol>
<h3 id="简答题-7"><a class="markdownIt-Anchor" href="#简答题-7"></a> 简答题</h3>
<ol>
<li>
<p>说明自适应中值滤波的算法流程。分析噪声密度大小跟其中区域最大值的关系。</p>
<p>进程A:</p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>A</mi><mn>1</mn></msub><mo>=</mo><msub><mi>z</mi><mi mathvariant="normal">med</mi><mo>⁡</mo></msub><mo>−</mo><msub><mi>z</mi><mi>min</mi><mo>⁡</mo></msub></mrow><annotation encoding="application/x-tex">A_{1}=z_{\operatorname{med}}-z_{\min }</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.73333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mop mtight"><span class="mord mathrm mtight">m</span><span class="mord mathrm mtight">e</span><span class="mord mathrm mtight">d</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31750199999999995em;"><span style="top:-2.317502em;margin-left:-0.04398em;margin-right:0.05em;"><span class="pstrut" style="height:2.467502em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mop mtight">min</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>A</mi><mn>2</mn></msub><mo>=</mo><msub><mi>z</mi><mi mathvariant="normal">med</mi><mo>⁡</mo></msub><mo>−</mo><msub><mi>z</mi><mi>max</mi><mo>⁡</mo></msub></mrow><annotation encoding="application/x-tex">A_{2}=z_{\operatorname{med}}-z_{\max }</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.73333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mop mtight"><span class="mord mathrm mtight">m</span><span class="mord mathrm mtight">e</span><span class="mord mathrm mtight">d</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.151392em;margin-left:-0.04398em;margin-right:0.05em;"><span class="pstrut" style="height:2.301392em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mop mtight">max</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></p>
<p>若：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>A</mi><mn>1</mn></msub><mo>&gt;</mo><mn>0</mn><mtext> 且 </mtext><msub><mi>A</mi><mn>2</mn></msub><mo>&lt;</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">A_{1}&gt;0 \text { 且 } A_{2}&lt;0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord">0</span><span class="mord text"><span class="mord"> </span><span class="mord cjk_fallback">且</span><span class="mord"> </span></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>，则转进程B，否则增大窗口尺寸。若：窗口尺寸 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>≤</mo><msub><mi>S</mi><mi>max</mi><mo>⁡</mo></msub></mrow><annotation encoding="application/x-tex">\leq S_{\max }</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.151392em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.301392em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mop mtight">max</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，则重复进程A，否则输出 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>z</mi><mtext>med </mtext></msub></mrow><annotation encoding="application/x-tex">z_{\text {med }}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">med </span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></p>
<p>进程B:</p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>B</mi><mn>1</mn></msub><mo>=</mo><msub><mi>z</mi><mrow><mi>x</mi><mi>y</mi></mrow></msub><mo>−</mo><msub><mi>z</mi><mi>min</mi><mo>⁡</mo></msub></mrow><annotation encoding="application/x-tex">B_{1}=z_{x y}-z_{\min }</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05017em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8694379999999999em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">x</span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31750199999999995em;"><span style="top:-2.317502em;margin-left:-0.04398em;margin-right:0.05em;"><span class="pstrut" style="height:2.467502em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mop mtight">min</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><br />
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>B</mi><mn>2</mn></msub><mo>=</mo><msub><mi>z</mi><mrow><mi>x</mi><mi>y</mi></mrow></msub><mo>−</mo><msub><mi>z</mi><mi>max</mi><mo>⁡</mo></msub></mrow><annotation encoding="application/x-tex">B_{2}=z_{x y}-z_{\max }</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05017em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8694379999999999em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">x</span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.151392em;margin-left:-0.04398em;margin-right:0.05em;"><span class="pstrut" style="height:2.301392em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mop mtight">max</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></p>
<p>若： <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>B</mi><mn>1</mn></msub><mo>&gt;</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">B_{1}&gt;0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05017em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span> 且 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>B</mi><mn>2</mn></msub><mo>&lt;</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">B_{2}&lt;0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.05017em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>，则输出 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>z</mi><mrow><mi>x</mi><mi>y</mi></mrow></msub></mrow><annotation encoding="application/x-tex">z_{x y}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.716668em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">x</span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span>，否则输出 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>z</mi><mtext>med </mtext></msub></mrow><annotation encoding="application/x-tex">z_{\text {med }}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">med </span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></p>
</li>
<li>
<p>分析彩色图像直方图均衡化为什么不能在三个颜色通道中分别进行？</p>
<p>这样处理之后，颜色的色调大部分情况下，会发生变化。</p>
</li>
</ol>
<h2 id="第九章"><a class="markdownIt-Anchor" href="#第九章"></a> 第九章</h2>
<h3 id="选择题-9"><a class="markdownIt-Anchor" href="#选择题-9"></a> 选择题</h3>
<ol>
<li>
<p>关于CMY颜色模型，（ ）是对的。<br />
A. CMY是用于发光的设备的颜色模型<br />
B. M和Y都是冷色<br />
<mark>C. C和R互为补色</mark><br />
D. CMY的颜色比RGB少</p>
</li>
<li>
<p>下面关于原色叠加形成的颜色的描述中，（ ）是对的。<br />
<mark>A. 红绿叠加是黄色，红蓝叠加是紫色，蓝绿叠加是青色</mark><br />
B. 红绿叠加是青色，红蓝叠加是紫色，蓝绿叠加是黄色<br />
C. 红绿叠加是黄色，红蓝叠加是紫色，蓝绿叠加是草绿色<br />
D. 红绿叠加是黄色，红蓝叠加是青色，蓝绿叠加是紫色</p>
</li>
<li>
<p>关于彩色图像做直方图均衡化，（ ）是对的。<br />
A. 转成HSI，然后对H通道进行直方图均衡化，在变换回RGB模型<br />
<mark>B. 转成HSI，然后对I通道进行直方图均衡化，在变换回RGB模型</mark><br />
C. 直接对RGB三个通道分别进行直方图均衡化<br />
D. 转成HSI，然后对S通道进行直方图均衡化，在变换回RGB模型</p>
</li>
<li>
<p>在HSI颜色模型中，采用（ ）滤波器去除。<br />
<mark>A. 色调坐标的取值是[0,359]<br />
B. 连接黑点、白点和双棱锥中某一点的三角形中的所有颜色是相同色调的</mark><br />
C. 离黑白轴越远，则饱和度越小<br />
<mark>D. 饱和度的取值范围是[0,1]</mark></p>
</li>
<li>
<p>对于彩色图像进行去噪时，采用（ ）方法。<br />
<mark>A. 转成HSI，然后对I通道进行邻域平均，在变换回RGB模型<br />
B. 将邻域平均扩展到RGB三通道，进行处理<br />
C. 转成CMY，然后对三个通道邻域平均，在变换回RGB模型</mark><br />
D. 转成HSI，然后对三个通道邻域平均，在变换回RGB模型</p>
</li>
<li>
<p>采用RGB颜色模型不能够表示舌形色度图中的所有颜色。（ ）<br />
<mark>A. 对</mark><br />
B. 错</p>
</li>
<li>
<p>彩色是人类视觉系统接受了电磁波之后形成的主观感受。（ ）<br />
<mark>A. 对</mark><br />
B. 错</p>
</li>
<li>
<p>HSI颜色模型中，每个分量都带有颜色信息。（ ）<br />
A. 对<br />
<mark>B. 错</mark></p>
</li>
</ol>
<h3 id="简答题-8"><a class="markdownIt-Anchor" href="#简答题-8"></a> 简答题</h3>
<ol>
<li>
<p>在一幅简单的RGB图像中，R、G和B的分量图像由下图所示的水平强度分布曲线。在该图像中心能够看到的颜色是什么。</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/t8r247jhpPebOwg.png" width=800px>
<p>它像纯绿色，由于添加了灰色成分，强度有所提高。</p>
</li>
<li>
<p>下图是可见光的波谱，编写程序绘制该图像。</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/BDf93cQ6wSHqkEP.png">
<p>参考答案：</p>
<p>使用HIS颜色模型，用H通道控制颜色色调从0到359,分别对应各种颜色，然后固定饱和度和强度值，组合出各种颜色，将其转换到RGB空间，每个颜色绘制一条即可。注意颜色分布与空间分布相反。</p>
<p><a href="https://bluehyssopu.github.io/2022/01/21/可见光波谱图绘制">代码传送门</a></p>
</li>
</ol>
<h2 id="第十章"><a class="markdownIt-Anchor" href="#第十章"></a> 第十章</h2>
<h3 id="选择题-10"><a class="markdownIt-Anchor" href="#选择题-10"></a> 选择题</h3>
<ol>
<li>使用3*3十字形结构元对只有一个像素组成的图像进行形态学膨胀，（ ）是对的。<br />
A. 膨胀过程中结构元只移位，不映像<br />
B. 计算结构元跟图像的交集，交于不同的位置<br />
<mark>C. 膨胀结果是十字形</mark><br />
D. 得到的结果图像中的像素是使用结构元进行一次计算，就得到的</li>
<li>关于彩色图像噪声问题，（ ）是对的。<br />
A. 带噪声的彩色图像转换到HIS颜色模型时，I通道噪声比较明显<br />
B. RGB彩色图像的R通道存在噪声，转换成HIS颜色模型是，只有H通道有噪声<br />
<mark>C. 彩色图像噪声可能出现在任何颜色通道中</mark><br />
D. 彩色图像噪声只在单个通道中存在</li>
<li>关于形态学腐蚀运算，（ ）是不对的。<br />
A. 腐蚀不需要将结构元映像<br />
B. 腐蚀能够消除图像中小的噪声<br />
<mark>C. 腐蚀跟膨胀是可以转换的</mark><br />
D. 对图像进行腐蚀，总是能够得到带有像素点的结果集合</li>
<li>下面运算中，（ ）是形态学处理中扩展的集合运算。<br />
A. 异或<br />
<mark>B. 位移</mark><br />
C. 映或<br />
<mark>D. 映像</mark></li>
<li>形态学图像处理中关于结构元，（ ）是对的。<br />
<mark>A. 结构元的原点可以在结构元之外<br />
B. 结构元通常是对称的，但是也有时候不对称<br />
C. 结构元形状可能是凸多边形，也可能是凹多边形<br />
D. 形态学运算的结构元要有一个原点</mark><br />
E. 在matlab中，结构元只能使用strel()来定义<br />
F. 形态学基本运算中，只能使用单一结构元</li>
<li>饱和度增强中，增大饱和度使图像色彩更鲜明，减小饱和度使图像平淡。（ ）<br />
<mark>A. 对</mark><br />
B. 错</li>
<li>对于彩色图像平滑和锐化过程中，在RGB三通道分别处理，与对HIS模型I通道单独处理，效果完全一致。（ ）<br />
A. 对<br />
<mark>B. 错</mark></li>
<li>形态学膨胀运算过程是先对B做关于原点的映象，再将其映象平移x，结果是平移后与A交集不为空的x集合。（ ）<br />
<mark>A. 对</mark><br />
B. 错</li>
</ol>
<h3 id="简答题-9"><a class="markdownIt-Anchor" href="#简答题-9"></a> 简答题</h3>
<ol>
<li>
<p>参考所显示图像，给出生成a至d所示结构元和形态学操作。请清晰地说明每个结构元的原点。图中虚线表示原始集合边界，仅供参考显示。注意d中所有角都是圆角。</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/vP2AbGusEneMTWU.png">
<p>参考答案：</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/KzB7PE5fLGicl91.png" height=400px>
</li>
<li>
<p>考虑下图所示的3幅二值图像。左侧图像由边长为1,3,5,7,9和15像素的方块组成。中间的图像是使用大小为13#13像素且元素都为1的</p>
<p>方块结构元对左侧图像进行腐蚀生成的，除了最大的几个之外，消除了所有的方块。最后，右侧的图像是使用了相同的结构元对中间</p>
<p>图像膨胀后的结果，其目标是恢复最大的方块。先腐蚀后膨胀实际上就是对图像进行开操作，通常情况下开操作不能将物体复原。请</p>
<p>说明为什么本例中能够完全重建最大方块。</p>
<ol>
<li>
<p>重构的方块大于结构元，所以在腐蚀过程中没有被完全消掉；</p>
</li>
<li>
<p>由于重构的方块跟结构元形状一致。</p>
</li>
</ol>
</li>
</ol>
<h2 id="第十一章"><a class="markdownIt-Anchor" href="#第十一章"></a> 第十一章</h2>
<h3 id="选择题-11"><a class="markdownIt-Anchor" href="#选择题-11"></a> 选择题</h3>
<ol>
<li>关于灰度形态学开闭运算，（ ）是不对的。<br />
A. 从图像角度看，开操作去除较小的明亮细节，相对保持整体灰度级和较大的明亮区域。<br />
B. 对闭操作看着是球在曲面的上侧面滚动。结果是比球体直径窄的谷底在幅度和尖锐程度上都增大。<br />
<mark>C. 从图像角度看，闭操作去除较小的亮细节成分，相对保持明亮区域。</mark><br />
D. 开操作看着是球在曲面的下侧面滚动。结果是比球体直径窄的波峰在幅度和尖锐程度上都减小</li>
<li>使用灰度形态学膨胀运算，（ ）是对的。<br />
A. 结构元值为正，则输出图像亮度减小；<br />
B. 都不对<br />
<mark>C. 结构元值为正，则输出图像亮度增大；</mark><br />
D. 输出图像亮度增大或减小跟结构元值无关</li>
<li>关于灰度形态学平滑处理，（ ）是对的。<br />
<mark>A. 使用结构元对图像进行开运算，再进行闭运算</mark><br />
B. 使用结构元对图像进行开运算<br />
C. 使用结构元对图像进行膨胀运算<br />
D. 使用结构元对图像进行腐蚀运算</li>
<li>下面关于二值形态学处理中区域填充描述中，（ ）是对的。<br />
<mark>A. 先使用结构元对前一层迭代结果进行膨胀运算，再跟图像补集进行交运算<br />
B. 填充过程中结构元的大小必须跟要填充区域的边缘满足一定条件才能正确填充。<br />
C. 对于每个区域必须要有一个种子点；</mark><br />
D. 先使用结构元对前一层迭代结果进行腐蚀运算，再跟图像进行交运算</li>
<li>关于二值形态学图像处理中的开闭操作，（ ）是对的。<br />
<mark>A. 闭操作消弥狭窄的间断和长细的鸿沟，消除小的孔洞，并填补轮廓线中小的断裂<br />
B. 开操作是使用结构元先对图像进行腐蚀运算，在对结果进行膨胀运算；<br />
C. 开操作断开狭窄的间断和消除细的突出物<br />
D. 闭操作是使用结构元先对图像进行膨胀运算，在对结果进行腐蚀运算；</mark></li>
<li>二值形态学处理中，开闭运算都能够对图像进行光滑。（ ）<br />
<mark>A. 对</mark><br />
B. 错</li>
<li>击中或击不中运算必须使用两个子结构元组成的结构元。（ ）<br />
<mark>A. 对</mark><br />
B. 错</li>
</ol>
<h3 id="简答题-10"><a class="markdownIt-Anchor" href="#简答题-10"></a> 简答题</h3>
<ol>
<li>
<p>下图所示，暗的背景上有大小不同的两类颗粒，试设计算法完成两种不同颗粒的半径计算。</p>
<ol>
<li>
<p>使用从1到图像半径大小的圆形结构元依次对该图像进行灰度开运算；</p>
</li>
<li>
<p>每开运算计算一次就统计亮像素的数量。</p>
</li>
<li>
<p>依次计算前后两次开之间的数量差，绘制直方图</p>
</li>
<li>
<p>直方图的极大值处就是两种圆形颗粒的半径。</p>
</li>
</ol>
</li>
<li>
<p>如果使用右侧3*3的结构元对左侧大图从A点开始进行形态学填充，其中结构元的原点在带圈的中心点，带斜线的像素构成结构元，请问使用这样的结构元能够完成填充吗？为什么？</p>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/NcU4kEKMmrHTsY7.png" width=400px>
<p>答案： 不能够完成填充。因为将结构元原点放到A点，进行填充计算，得到的结果还是A像素，并没有扩大范围，所以不能填充。</p>
</li>
</ol>
<h2 id="第十二章"><a class="markdownIt-Anchor" href="#第十二章"></a> 第十二章</h2>
<h3 id="选择题-12"><a class="markdownIt-Anchor" href="#选择题-12"></a> 选择题</h3>
<ol>
<li>
<p>下列形态学算法中，（ ）是使用了灰度形态学开操作去掉小亮细节的特点。<br />
<mark>A. 纹理分割时，进行颗粒缝隙消除<br />
B. 米粒图分割之前进行不均匀光照校正<br />
C. 形态学平滑处理。<br />
D. 颗粒统计时，进行颗粒消除</mark></p>
</li>
<li>
<p>数据压缩，（ ）是对的。<br />
<mark>A. 分为信息保存型和信息损失型；<br />
B. 是将表达信息的冗余数据进行去除；<br />
C. 变换过程不产生压缩，量化过程产生压缩</mark><br />
D. ABC都不对</p>
</li>
<li>
<p>下面关于信息和数据的关系，（ ）是对的。<br />
A. 信息和数据是成比例的。<br />
<mark>B. 同量的信息可用不同量的数据表达<br />
C. 同量的数据可表达不同量的信息<br />
D. 对给定量的信息可用不同的数据量来表示；</mark></p>
</li>
<li>
<p>关于客观保真度指标，（ ）是对的。</p>
<p><mark>A. 均方信噪比是 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>N</mi><msub><mi>R</mi><mrow><mi>m</mi><mi>s</mi></mrow></msub><mo>=</mo><msubsup><mo>∑</mo><mrow><mi>x</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>M</mi><mo>−</mo><mn>1</mn></mrow></msubsup><msubsup><mo>∑</mo><mrow><mi>y</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>N</mi><mo>−</mo><mn>1</mn></mrow></msubsup><mover accent="true"><mi>f</mi><mo>^</mo></mover><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mi mathvariant="normal">/</mi><msubsup><mo>∑</mo><mrow><mi>x</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>M</mi><mo>−</mo><mn>1</mn></mrow></msubsup><msubsup><mo>∑</mo><mrow><mi>y</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>N</mi><mo>−</mo><mn>1</mn></mrow></msubsup><mo stretchy="false">[</mo><mover accent="true"><mi>f</mi><mo>^</mo></mover><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mo>−</mo><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><msup><mo stretchy="false">]</mo><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">S N R_{ms}=\sum_{x=0}^{M-1} \sum_{y=0}^{N-1} \hat{f}(x, y)^{2} / \sum_{x=0}^{M-1} \sum_{y=0}^{N-1}[\hat{f}(x, y)-f(x, y)]^{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">m</span><span class="mord mathdefault mtight">s</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.417049em;vertical-align:-0.43581800000000004em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.981231em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">x</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">M</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.29971000000000003em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.981231em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.43581800000000004em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9578799999999998em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10764em;">f</span></span></span><span style="top:-3.26344em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.08332999999999999em;">^</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mord">/</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.981231em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">x</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">M</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.29971000000000003em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.981231em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.43581800000000004em;"><span></span></span></span></span></span></span><span class="mopen">[</span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9578799999999998em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10764em;">f</span></span></span><span style="top:-3.26344em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.08332999999999999em;">^</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mclose"><span class="mclose">]</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span></mark><br />
<mark>B. 图误差是 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msubsup><mo>∑</mo><mrow><mi>x</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>M</mi><mo>−</mo><mn>1</mn></mrow></msubsup><msubsup><mo>∑</mo><mrow><mi>y</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>N</mi><mo>−</mo><mn>1</mn></mrow></msubsup><mo stretchy="false">[</mo><mover accent="true"><mi>f</mi><mo>^</mo></mover><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mo>−</mo><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">\sum_{x=0}^{M-1} \sum_{y=0}^{N-1}[\hat{f}(x, y)-f(x, y)]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.417049em;vertical-align:-0.43581800000000004em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.981231em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">x</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">M</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.29971000000000003em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.981231em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.43581800000000004em;"><span></span></span></span></span></span></span><span class="mopen">[</span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9578799999999998em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10764em;">f</span></span></span><span style="top:-3.26344em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.08332999999999999em;">^</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mclose">]</span></span></span></span>;</mark><br />
<mark>C. 点误差是 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>e</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mo>=</mo><mover accent="true"><mi>f</mi><mo>^</mo></mover><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mo>−</mo><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">e(x, y)=\hat{f}(x, y)-f(x, y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">e</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.2078799999999998em;vertical-align:-0.25em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9578799999999998em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10764em;">f</span></span></span><span style="top:-3.26344em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.08332999999999999em;">^</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span> ；</mark></p>
<p><mark>D. 峰值信噪比 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mi>S</mi><mi>N</mi><mi>R</mi><mo>=</mo><mn>10</mn><mi>lg</mi><mo>⁡</mo><mrow><mo fence="true">[</mo><mi>M</mi><mi>N</mi><mo>×</mo><msubsup><mi>f</mi><mi>max</mi><mo>⁡</mo><mn>2</mn></msubsup><mi mathvariant="normal">/</mi><msubsup><mo>∑</mo><mrow><mi>x</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>M</mi><mo>−</mo><mn>1</mn></mrow></msubsup><msubsup><mo>∑</mo><mrow><mi>y</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>N</mi><mo>−</mo><mn>1</mn></mrow></msubsup><mo stretchy="false">[</mo><mover accent="true"><mi>f</mi><mo>^</mo></mover><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mo>−</mo><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><msup><mo stretchy="false">]</mo><mn>2</mn></msup><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">P S N R=10 \lg \left[M N \times f_{\max }^{2} / \sum_{x=0}^{M-1} \sum_{y=0}^{N-1}[\hat{f}(x, y)-f(x, y)]^{2}\right]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.80002em;vertical-align:-0.65002em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop">l<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size2">[</span></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.10764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mop mtight">max</span></span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord">/</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.981231em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">x</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">M</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.29971000000000003em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.981231em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.43581800000000004em;"><span></span></span></span></span></span></span><span class="mopen">[</span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9578799999999998em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10764em;">f</span></span></span><span style="top:-3.26344em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.08332999999999999em;">^</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mclose"><span class="mclose">]</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size2">]</span></span></span></span></span></span>  ，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>f</mi><mi>max</mi><mo>⁡</mo></msub><mo>=</mo><mi>max</mi><mo>⁡</mo><mo stretchy="false">{</mo><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">f_{\max }=\max \{f(x, y)\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.151392em;margin-left:-0.10764em;margin-right:0.05em;"><span class="pstrut" style="height:2.301392em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mop mtight">max</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop">max</span><span class="mopen">{</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mclose">}</span></span></span></span></mark></p>
<p><mark>E. 均方根误差是 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>e</mi><mrow><mi mathvariant="normal">r</mi><mi mathvariant="normal">m</mi><mi mathvariant="normal">s</mi></mrow></msub><mo>=</mo><msup><mrow><mo fence="true">[</mo><mfrac><mn>1</mn><mrow><mi>M</mi><mi>N</mi></mrow></mfrac><msubsup><mo>∑</mo><mrow><mi>x</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>M</mi><mo>−</mo><mn>1</mn></mrow></msubsup><msubsup><mo>∑</mo><mrow><mi>y</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>N</mi><mo>−</mo><mn>1</mn></mrow></msubsup><mo stretchy="false">[</mo><mover accent="true"><mi>f</mi><mo>^</mo></mover><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mo>−</mo><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><msup><mo stretchy="false">]</mo><mn>2</mn></msup><mo fence="true">]</mo></mrow><mrow><mn>1</mn><mi mathvariant="normal">/</mi><mn>2</mn></mrow></msup></mrow><annotation encoding="application/x-tex">e_{\mathrm{rms}}=\left[\frac{1}{M N} \sum_{x=0}^{M-1} \sum_{y=0}^{N-1}[\hat{f}(x, y)-f(x, y)]^{2}\right]^{1 / 2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathrm mtight">r</span><span class="mord mathrm mtight">m</span><span class="mord mathrm mtight">s</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.0779199999999998em;vertical-align:-0.65002em;"></span><span class="minner"><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size2">[</span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">M</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.981231em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">x</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">M</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.29971000000000003em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.981231em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.43581800000000004em;"><span></span></span></span></span></span></span><span class="mopen">[</span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9578799999999998em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10764em;">f</span></span></span><span style="top:-3.26344em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.08332999999999999em;">^</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mclose"><span class="mclose">]</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size2">]</span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.4279em;"><span style="top:-3.6029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">/</span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span></mark></p>
</li>
<li>
<p>关于数据冗余，（ ）是对的。<br />
A. 特征冗余<br />
<mark>B. 心理视觉冗余</mark><br />
<mark>C. 编码冗余</mark><br />
<mark>D. 像素相关冗余</mark></p>
</li>
<li>
<p>信源平均信息，又称为熵，其计算公式为： <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>H</mi><mo stretchy="false">(</mo><mi mathvariant="bold-italic">u</mi><mo stretchy="false">)</mo><mo>=</mo><mo>−</mo><msubsup><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>J</mi></msubsup><mi>P</mi><mrow><mo fence="true">(</mo><msub><mi>a</mi><mi>j</mi></msub><mo fence="true">)</mo></mrow><mi>log</mi><mo>⁡</mo><mi>P</mi><mrow><mo fence="true">(</mo><msub><mi>a</mi><mi>j</mi></msub><mo fence="true">)</mo></mrow></mrow><annotation encoding="application/x-tex">H(\boldsymbol{u})=-\sum_{j=1}^{J} P\left(a_{j}\right) \log P\left(a_{j}\right)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="mopen">(</span><span class="mord"><span class="mord"><span class="mord boldsymbol">u</span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.417049em;vertical-align:-0.43581800000000004em;"></span><span class="mord">−</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.981231em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.09618em;">J</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.43581800000000004em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;">)</span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;">)</span></span></span></span></span></p>
<p><mark>A. 对</mark><br />
B. 错</p>
</li>
<li>
<p>对给定量的信息，设法减少表达这些信息的数据量称为数据压缩。（ ）<br />
<mark>A. 对</mark><br />
B. 错</p>
</li>
<li>
<p>位平面是指将图像的所有像素点的某一个二进制位取出构成的一个二值图像。（ ）<br />
<mark>A. 对</mark><br />
B. 错</p>
</li>
</ol>
<h3 id="简答题-11"><a class="markdownIt-Anchor" href="#简答题-11"></a> 简答题</h3>
<ol>
<li>
<p>请说明变换编码中子图像尺寸选择思路。</p>
<ol>
<li>影响变换编码误差和计算复杂度<br />
压缩量和计算复杂度都随子图像尺寸的增加而增加</li>
<li>两个条件:<br />
(1) 相邻子图像之间的相关 (冗余) 减少到某个可接受的水平;<br />
(2) 子图像的长和宽都是2的整数次幂</li>
<li>最常用的子图像尺寸: 8 * 8 和 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><msup><mn>6</mn><mo>∗</mo></msup><mn>16</mn></mrow><annotation encoding="application/x-tex">16^{*} 16</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.688696em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord"><span class="mord">6</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.688696em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">∗</span></span></span></span></span></span></span></span></span><span class="mord">1</span><span class="mord">6</span></span></span></span><br />
是通过在不同尺寸上，分别进行三种变换统计得出的。</li>
</ol>
</li>
<li>
<p>请说明变换编码的分区编码过程。</p>
<ol>
<li>
<p>子图像尺寸选为 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>8</mn><mo>×</mo><mn>8</mn></mrow><annotation encoding="application/x-tex">8 \times 8</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">8</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">8</span></span></span></span> 。</p>
</li>
<li>
<p>采用DCT变换，得到变换系数。每子图像经过正向DCT变换转换为一组 (64个) DCT系数。</p>
</li>
<li>
<p>对变换系数进行量化。采用四种截断方式，分别是取子图像的DCT系数结果方阵的左上角的1个分量、6个分量、15个分量和28个分量，其余分量为零。</p>
</li>
</ol>
</li>
</ol>
]]></content>
      <categories>
        <category>数字图像处理</category>
      </categories>
      <tags>
        <tag>数字图像处理</tag>
        <tag>测验题</tag>
      </tags>
  </entry>
  <entry>
    <title>新闻文本分类</title>
    <url>/posts/1ce0788e.html</url>
    <content><![CDATA[<h1 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言</h1>
<p>一个很粗糙的新闻文本分类项目，解决中国软件杯第九届新闻文本分类算法的问题，记录了项目的思路及问题解决方法</p>
<span id="more"></span>
<p>后续会进一步改进，包括：</p>
<ul>
<li>丰富训练集的数据，避免军事类、房产类、体育类的新闻数据过少，影响精度</li>
<li>改用上限更高的Bert模型</li>
<li>优化exe文件的页面，使其能够分别处理识别短文本和excel文件</li>
</ul>
<p>项目源码：<a href="https://github.com/bluehyssopu/NewSort">https://github.com/bluehyssopu/NewSort</a></p>
<p>项目问题链接：<a href="http://cnsoftbei.com/plus/view.php?aid=599">http://cnsoftbei.com/plus/view.php?aid=599</a></p>
<p><code>文件结构图</code></p>
<ul>
<li>code
<ul>
<li>-pycache-                         —pyinstaller 打包生成的文件</li>
<li>build                                 —pyinstaller 打包生成的文件</li>
<li>dist                                   —pyinstaller 打包生成的文件（内有 软件test2.exe 可运行）</li>
<li>showTest.ipynb              —展示测试集处理的脚本</li>
<li>showTrain.ipynb            —展示训练集处理的脚本</li>
<li><a href="http://test.py">test.py</a>                              —测试所用的py文件 可跳过</li>
<li><a href="http://test2.py">test2.py</a>                            —项目最终源代码</li>
<li>test2.spec                        —pyinstaller 打包生成的文件</li>
</ul>
</li>
<li>data
<ul>
<li>hit_stopwords.txt           —哈工大停词表</li>
<li>test_set.csv                      —处理好的测试集数据</li>
<li>train_set.csv                    —处理好的训练集数据</li>
<li>type.xlsx                          —原测试集数据的类别sheet</li>
</ul>
</li>
<li>image                                      —项目的部分运行结果截图</li>
<li>rootData                                 —数据清洗前的源数据</li>
<li><a href="http://RemdMe.md">RemdMe.md</a>                          —项目文件说明</li>
</ul>
<p><code>运行dist目录下的test2.exe即可运行程序</code></p>
<p><code>选择文件dist/data/type.xlsx 点击确认 即可运行将预测结果写入 至type.xlsx</code></p>
<h1 id="操作的过程如下"><a class="markdownIt-Anchor" href="#操作的过程如下"></a> 操作的过程如下：</h1>
<h3 id="查看源数据"><a class="markdownIt-Anchor" href="#查看源数据"></a> 查看源数据</h3>
<img src = "https://s2.loli.net/2022/03/25/R7ouy4LO6iEVp5s.png">
<img src = "https://s2.loli.net/2022/03/25/eaPnpVbKvqBYHr4.png">
<pre><code>	可以明显地看出：
</code></pre>
<ul>
<li>源数据（训练）包括新闻标题 内容 和新闻的类别    — 以下称为  根训练集</li>
<li>测试集 包括 测试的编号 新闻标题 新闻内容              — 以下称为 type.xlsx</li>
<li><code>需要将预测的结果写入channelName这一列中</code></li>
</ul>
<p>​		为了方便我们进行清洗数据 训练</p>
<p>​		将跟训练集的所有sheet（共九个 其他栏为空）导出为csv 并合并为 train_root.csv</p>
<p>​			具体过程如下：</p>
<h4 id="导出"><a class="markdownIt-Anchor" href="#导出"></a> 导出</h4>
<img src = "https://s2.loli.net/2022/03/25/Ki9kPHlqzvWewBQ.png">
<figure class="highlight excel"><table><tr><td class="code"><pre><span class="line">Sub Test() </span><br><span class="line">    Dim Sht As Worksheet </span><br><span class="line">    For Each Sht In <span class="built_in">Sheets</span> </span><br><span class="line">        Sht.Copy </span><br><span class="line">        ActiveWorkbook.SaveAs ThisWorkbook.Path &amp; <span class="string">&quot;\&quot; &amp; Sht.Name &amp; &quot;</span>.xlsx<span class="string">&quot; </span></span><br><span class="line"><span class="string">        ActiveWorkbook.Close </span></span><br><span class="line"><span class="string">    Next </span></span><br><span class="line"><span class="string">End Sub</span></span><br></pre></td></tr></table></figure>
<img src = "https://s2.loli.net/2022/03/25/wpUDj3t521Byb6q.png">
<h4 id="合并"><a class="markdownIt-Anchor" href="#合并"></a> 合并</h4>
<ul>
<li>cmd命令行 切换到 所在的目录</li>
<li><code>copy *.csv train_copy.csv</code></li>
</ul>
<img src = "https://s2.loli.net/2022/03/25/aDhei5WyS3b7Kjm.png">
<h4 id="输出测试"><a class="markdownIt-Anchor" href="#输出测试"></a> 输出测试</h4>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">train_df = pd . read_csv ( <span class="string">&#x27;/rootData/train_copy.csv&#x27;</span> )</span><br><span class="line">train_df.head()</span><br></pre></td></tr></table></figure>
<img src = "https://s2.loli.net/2022/03/25/BeQZlIvaA4GRXiz.png">
<h4 id="统计"><a class="markdownIt-Anchor" href="#统计"></a> 统计</h4>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 显示各新闻的长度分布 这里只是粗略显示 句号分割</span></span><br><span class="line">train_df[<span class="string">&#x27;text_len&#x27;</span>] = train_df[<span class="string">&#x27;content&#x27;</span>].apply(<span class="keyword">lambda</span> x: <span class="built_in">len</span>(<span class="built_in">str</span>(x).split(<span class="string">&#x27;。&#x27;</span>)))</span><br><span class="line">train_df[<span class="string">&#x27;text_len&#x27;</span>].describe()</span><br></pre></td></tr></table></figure>
<img src = "https://s2.loli.net/2022/03/25/X5iGnQHw49MWeUO.png">
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 统计文本长度 生成直方图</span></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">_ = plt.hist(train_df[<span class="string">&#x27;text_len&#x27;</span>], bins=<span class="number">240</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;Text char count&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&quot;Histogram of char count&quot;</span>)</span><br></pre></td></tr></table></figure>
<img src = "https://s2.loli.net/2022/03/25/ZYjd2EOKblveAJM.png">
<h3 id="数据可视分析-清洗处理"><a class="markdownIt-Anchor" href="#数据可视分析-清洗处理"></a> 数据可视分析 清洗处理</h3>
<h4 id="词频统计"><a class="markdownIt-Anchor" href="#词频统计"></a> 词频统计</h4>
<img src = "https://s2.loli.net/2022/03/25/N5S9ighRKydms3L.png">
<h4 id="加载停用词"><a class="markdownIt-Anchor" href="#加载停用词"></a> 加载停用词</h4>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;/data/hit_stopwords.txt&quot;</span>, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    remove_words = [w.strip(<span class="string">&#x27;\n&#x27;</span>) <span class="keyword">for</span> w <span class="keyword">in</span> f.readlines()]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> word <span class="keyword">in</span> seg_list_exact: <span class="comment"># 循环读出每个分词</span></span><br><span class="line">    <span class="keyword">if</span> word <span class="keyword">not</span> <span class="keyword">in</span> remove_words: <span class="comment"># 如果不在去除词库中</span></span><br><span class="line">        object_list.append(word) <span class="comment"># 分词追加到列表</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="生成词云"><a class="markdownIt-Anchor" href="#生成词云"></a> 生成词云</h4>
<ul>
<li>检查无用词 说明清洗有效</li>
</ul>
<table>
<thead>
<tr>
<th>清洗前</th>
<th>清洗后</th>
</tr>
</thead>
<tbody>
<tr>
<td><img src = "https://s2.loli.net/2022/03/25/HUugS1z2nA68N9Z.jpg" style="zoom: 67%;"   ></td>
<td><img src = "https://s2.loli.net/2022/03/25/GrLOias6Sc45HX9.jpg"></td>
</tr>
</tbody>
</table>
<h4 id="再次检验"><a class="markdownIt-Anchor" href="#再次检验"></a> 再次检验</h4>
<img src = "https://s2.loli.net/2022/03/25/l1c6WLQRu4CyB2a.png">
<img src = "https://s2.loli.net/2022/03/25/C1SJZ4lyDLtKwYc.png">
<h4 id="写入"><a class="markdownIt-Anchor" href="#写入"></a> 写入</h4>
<ul>
<li>将清洗好的数据写入到 train_set.csv中 作为机器学习的训练集     — 下称为训练集</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> csv</span><br><span class="line"></span><br><span class="line">header = [<span class="string">&#x27;label&#x27;</span>, <span class="string">&#x27;text&#x27;</span>]</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;/rootData/train_set.csv&#x27;</span>, <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>, newline=<span class="string">&#x27;&#x27;</span>) <span class="keyword">as</span> f: <span class="comment"># 解决空行的问题</span></span><br><span class="line">    writer = csv.writer(f)</span><br><span class="line">    writer.writerow(header)</span><br><span class="line">    writer.writerows(Endlist)</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>
<h3 id="训练"><a class="markdownIt-Anchor" href="#训练"></a> 训练</h3>
<ul>
<li>简单读取 验证训练集的内容</li>
<li>训练模型</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Count Vectors + RidgeClassifier</span></span><br><span class="line"><span class="comment"># 词袋 + 特征值提取</span></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> sklearn.feature_extraction.text <span class="keyword">import</span> CountVectorizer</span><br><span class="line"><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> RidgeClassifier</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> f1_score</span><br><span class="line"></span><br><span class="line">train_df = pd.read_csv(<span class="string">&#x27;/data/train_set.csv&#x27;</span>,encoding=<span class="string">&#x27;ANSI&#x27;</span>)</span><br><span class="line"></span><br><span class="line">vectorizer = CountVectorizer(max_features=<span class="number">3000</span>)</span><br><span class="line">train_test = vectorizer.fit_transform(train_df[<span class="string">&#x27;text&#x27;</span>].values.astype(<span class="string">&#x27;U&#x27;</span>))</span><br><span class="line"></span><br><span class="line">clf = RidgeClassifier()</span><br><span class="line">clf.fit(train_test[:<span class="number">10000</span>], train_df[<span class="string">&#x27;label&#x27;</span>].values[:<span class="number">10000</span>])</span><br><span class="line"></span><br><span class="line">val_pred = clf.predict(train_test[<span class="number">10000</span>:])</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(f1_score(train_df[<span class="string">&#x27;label&#x27;</span>].values[<span class="number">10000</span>:], val_pred, average=<span class="string">&#x27;macro&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(val_pred))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 0.10343472451465849</span></span><br><span class="line"><span class="comment"># 0.10357460616527975 </span></span><br><span class="line"><span class="comment"># 一定要打乱训练的顺序</span></span><br><span class="line"><span class="comment"># 0.8491012463815872</span></span><br><span class="line"><span class="comment"># 0.8207100395680607</span></span><br><span class="line"><span class="comment"># 0.9201683620360309</span></span><br></pre></td></tr></table></figure>
<h3 id="预测结果"><a class="markdownIt-Anchor" href="#预测结果"></a> 预测结果</h3>
<ul>
<li>对预测集进行和训练集一样的处理</li>
<li>调用模型 得到pre_val （预测结果 类型为list）</li>
<li>写入 type.xlsx中即可</li>
</ul>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>新闻文本分类</tag>
      </tags>
  </entry>
  <entry>
    <title>每日一邮</title>
    <url>/posts/edff656.html</url>
    <content><![CDATA[<h2 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言</h2>
<p>最近在CSDN上发现许多使用Python自动发送邮件追女神的整活博客，于是想顺手做一个每天定时发送邮件给朋友的程序，内容包括舔狗日记、每天的天气变化、及人文问候。</p>
<h2 id="注意"><a class="markdownIt-Anchor" href="#注意"></a> 注意</h2>
<ul>
<li>
<p>测试环境： win10 python3.6</p>
</li>
<li>
<p>第三方库 requests、yagmail、lxml</p>
</li>
<li>
<p>使用yagmail需要开通个人发送邮箱的SMTP服务，以QQ邮箱为例：</p>
<img src = "https://s2.loli.net/2022/03/25/ucfNvFPRo5KCxLl.png">
</li>
<li>
<p>如果xdm需要发送给多人（懂的都懂），可以使用代码最后的注释块，当然天气的内容仅适用于同地区的人，异地你舔不到……</p>
</li>
<li>
<p>可以添加更多的内容，如土味情话等；也可以打包为.exe，在服务器上每天定时运行。</p>
</li>
</ul>
<h2 id="代码"><a class="markdownIt-Anchor" href="#代码"></a> 代码</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line"><span class="keyword">import</span> yagmail</span><br><span class="line"></span><br><span class="line"><span class="comment"># 调用舔狗日记的api 获取内容</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">tiangouApi</span>():</span><br><span class="line">    url = <span class="string">&quot;https://api.dzzui.com/api/tiangou&quot;</span></span><br><span class="line">    result = requests.get(url).text</span><br><span class="line">    lis = result.split(<span class="string">&#x27;&lt;br&gt;&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> lis[<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 登录邮箱，设置登录的账号，密码和port等信息</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">send_email</span>(<span class="params">contents, send_to</span>):</span><br><span class="line">    yag = yagmail.SMTP(user=<span class="string">&#x27;你的邮箱&#x27;</span>,</span><br><span class="line">                       password=<span class="string">&#x27;你的授权码&#x27;</span>,</span><br><span class="line">                       host=<span class="string">&#x27;发信服务器，如使用QQ邮箱的为smtp.qq.com&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 设置发送给谁，邮件主题，邮件内容</span></span><br><span class="line">    yag.send(to=send_to,</span><br><span class="line">             subject=<span class="string">&#x27;每日一邮&#x27;</span>,</span><br><span class="line">             contents=contents)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;发送成功!&#x27;</span>)</span><br><span class="line">    yag.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">parse</span>(<span class="params">url</span>):</span><br><span class="line">    text = tiangouApi()</span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/55.0.2883.87 Safari/537.36&#x27;</span>&#125;</span><br><span class="line">    html = requests.get(url, headers=headers)</span><br><span class="line">    bs = etree.HTML(html.text)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 今天天气相关数据：日期，星期几，天气，最低气温，最高气温</span></span><br><span class="line">    today_date = bs.xpath(<span class="string">&#x27;//ul[@class = &quot;week&quot;]/li[1]/b/text()&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">    today_week = bs.xpath(<span class="string">&#x27;//ul[@class = &quot;week&quot;]/li[1]/span/text()&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">    today_weather = bs.xpath(<span class="string">&#x27;//ul[@class = &quot;txt txt2&quot;]/li[1]/text()&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">    today_low = bs.xpath(<span class="string">&#x27;//div[@class = &quot;zxt_shuju&quot;]/ul/li[1]/b/text()&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">    today_high = bs.xpath(</span><br><span class="line">        <span class="string">&#x27;//div[@class = &quot;zxt_shuju&quot;]/ul/li[1]/span/text()&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>((<span class="string">&#x27;今天是%s，%s，%s，%s~~%s度&#x27;</span>) %</span><br><span class="line">          (today_date, today_week, today_weather, today_low, today_high))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 明天天气相关数据，维度和上述一致</span></span><br><span class="line">    tomorrow_date = bs.xpath(<span class="string">&#x27;//ul[@class = &quot;week&quot;]/li[2]/b/text()&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">    tomorrow_week = bs.xpath(<span class="string">&#x27;//ul[@class = &quot;week&quot;]/li[2]/span/text()&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">    tomorrow_weather = bs.xpath(<span class="string">&#x27;//ul[@class = &quot;txt txt2&quot;]/li[2]/text()&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">    tomorrow_low = bs.xpath(<span class="string">&#x27;//div[@class = &quot;zxt_shuju&quot;]/ul/li[2]/b/text()&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">    tomorrow_high = bs.xpath(</span><br><span class="line">        <span class="string">&#x27;//div[@class = &quot;zxt_shuju&quot;]/ul/li[2]/span/text()&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">    tomorrow = (<span class="string">&#x27;明天是%s，%s，%s，温度范围%s~%s度，温差%d度。&#x27;</span>) % \</span><br><span class="line">        (tomorrow_date, tomorrow_week, tomorrow_weather, tomorrow_low,</span><br><span class="line">         tomorrow_high, <span class="built_in">int</span>(<span class="built_in">int</span>(tomorrow_high)-<span class="built_in">int</span>(tomorrow_low)))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 计算今明两天温度差异，这里用的是最高温度</span></span><br><span class="line">    temperature_distance = <span class="built_in">int</span>(tomorrow_high) - <span class="built_in">int</span>(today_high)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> temperature_distance &gt; <span class="number">0</span>:</span><br><span class="line">        a = <span class="string">&#x27;明日升温%d，记得配好美美的穿搭哦，小可爱。&#x27;</span> % temperature_distance</span><br><span class="line">    <span class="keyword">elif</span> temperature_distance &lt; <span class="number">0</span>:</span><br><span class="line">        a = <span class="string">&#x27;明日降温%d，记得自己添衣服，我不在的日子记得照顾好自己。&#x27;</span> % temperature_distance</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        a = <span class="string">&#x27;最高气温不变，在每一个平凡的日子里，也要记得翩翩起舞哦!&#x27;</span></span><br><span class="line"></span><br><span class="line">    content = <span class="built_in">str</span>(tomorrow) + <span class="built_in">str</span>(a)</span><br><span class="line">    content = text + <span class="string">&#x27;&lt;br&gt;&#x27;</span> + content</span><br><span class="line">    <span class="keyword">return</span> content</span><br><span class="line"></span><br><span class="line"><span class="comment"># 发送给一人</span></span><br><span class="line">url = <span class="string">&quot;收件人所在地区天气网站&quot;</span>   <span class="comment"># 代码使用的是天气网的信息 如青岛 为 https://www.tianqi.com/qingdao/</span></span><br><span class="line">contents = parse(url)</span><br><span class="line">send_to = <span class="string">&#x27;收件人邮箱地址&#x27;</span></span><br><span class="line">send_email(contents, send_to)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string"># 当然 如果你想要的给一群人发送 可使用如下代码 在emails中添加对应邮箱地址即可</span></span><br><span class="line"><span class="string">emails = [&#x27;123@qq.com&#x27;, &#x27;456@qq.com&#x27;, &#x27;&#x27;, &#x27;&#x27;]</span></span><br><span class="line"><span class="string">for email in emails:</span></span><br><span class="line"><span class="string">    send_email(contents, email)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<h2 id="效果"><a class="markdownIt-Anchor" href="#效果"></a> 效果</h2>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/CBGk69rfcqEdbID.jpg" width=400px>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>Email</tag>
        <tag>舔狗日记</tag>
      </tags>
  </entry>
  <entry>
    <title>【Bug周刊】Vol.2</title>
    <url>/posts/629535f3.html</url>
    <content><![CDATA[<h2 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言</h2>
<p>最近开发中遇到很多相同的问题，下意识去翻自己的历史记录，但又没能快速定位。我的<code>trilium</code>一直用来记录自己的周报和相关教程，对于常见的bug和修复方案也找不到合适的地方，只能穿插在日报的历史中，随时间沉没。无意间翻到子舒的奇趣周刊，Bug周刊也由此而生。</p>
<h2 id="github展示代码统计wakatime"><a class="markdownIt-Anchor" href="#github展示代码统计wakatime"></a> github展示代码统计（WakaTime）</h2>
<h3 id="问题描述"><a class="markdownIt-Anchor" href="#问题描述"></a> 问题描述</h3>
<p>我想要在<code>github</code>主页上添加 <code>WakaTime</code> 的代码统计，在配置了api的secret后，github action报错如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Run athul/waka-readme@master </span><br><span class="line">[2024-03-08 01:31:58] ln. 478 DEBUG    WakaReadme stats has changed</span><br><span class="line">[2024-03-08 01:31:58] ln. 522 CRITICAL 403 &#123;&quot;message&quot;: &quot;Resource not accessible by integration&quot;, &quot;documentation_url&quot;: &quot;https://docs.github.com/rest/repos/contents#create-or-update-file-contents&quot;&#125;</span><br></pre></td></tr></table></figure>
<h3 id="解决方案"><a class="markdownIt-Anchor" href="#解决方案"></a> 解决方案</h3>
<p>1、检查 <code>waka-time.yml</code> 是否有误（<code>WAKATIME_API_KEY</code>）</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Waka</span> <span class="string">Readme</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="comment"># for manual workflow trigger</span></span><br><span class="line">  <span class="attr">workflow_dispatch:</span></span><br><span class="line">  <span class="attr">schedule:</span></span><br><span class="line">    <span class="comment"># runs at 12 AM UTC (5:30 AM IST)</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">cron:</span> <span class="string">&quot;0 0 * * *&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">update-readme:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">WakaReadme</span> <span class="string">DevMetrics</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">athul/waka-readme@master</span> <span class="comment"># this action name</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">WAKATIME_API_KEY:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.WAKATIME_API_KEY</span> <span class="string">&#125;&#125;</span></span><br></pre></td></tr></table></figure>
<p>2、检查仓库的action是否有读写的权限</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.sa.net/2024/03/11/OpCi5XDjhElwosb.png" alt="" /></p>
<p>配置完毕后将会显示</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.sa.net/2024/03/08/2iVEXRKk1yMxAfh.png" alt="" /></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[2024-03-11 08:04:18] ln. 300 DEBUG    The API data seems to be empty, please wait for a day</span><br></pre></td></tr></table></figure>
<p>只需要在你本地的编辑器（vscode、idea等）安装wakatime的插件，配置好key，继续你的日常coding，等一天就有数据产生了。</p>
<h3 id="参考链接"><a class="markdownIt-Anchor" href="#参考链接"></a> 参考链接</h3>
<div class="tag link"><a class="link-card" title="美化github个人首页" href="https://zhuanlan.zhihu.com/p/426231957"><div class="left"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/link.png"/></div><div class="right"><p class="text">美化github个人首页</p><p class="url">https://zhuanlan.zhihu.com/p/426231957</p></div></a></div>
<div class="tag link"><a class="link-card" title="waka-readme issue" href="https://github.com/athul/waka-readme/issues/141"><div class="left"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/link.png"/></div><div class="right"><p class="text">waka-readme issue</p><p class="url">https://github.com/athul/waka-readme/issues/141</p></div></a></div>
<div class="tag link"><a class="link-card" title="No Activity tracked this week" href="https://github.com/athul/waka-readme/issues/26"><div class="left"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/link.png"/></div><div class="right"><p class="text">No Activity tracked this week</p><p class="url">https://github.com/athul/waka-readme/issues/26</p></div></a></div>
<h2 id="wakatime-数据同步"><a class="markdownIt-Anchor" href="#wakatime-数据同步"></a> wakatime 数据同步</h2>
<h3 id="问题描述-2"><a class="markdownIt-Anchor" href="#问题描述-2"></a> 问题描述</h3>
<p>在获得wakatime的统计数据后，发现非会员用户只能获得14天的数据，我希望能够获取全部的数据，同时能够渲染成仪表盘。</p>
<h3 id="解决方案-2"><a class="markdownIt-Anchor" href="#解决方案-2"></a> 解决方案</h3>
<p>一台有docker环境的服务器，以 <code>docker-compose</code> 的方式部署<code>wakatime-sync</code>服务，我自己用的是宝塔，步骤如下：<br />
1、在数据库中新建<code>wakatime</code>数据库，导入项目<code>sql</code>目录下的文件创建对应的数据表。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.sa.net/2024/03/13/mElgQXpA2wv3Syb.png" alt="" /></p>
<p>2、在宝塔中，按照 <code>docker -&gt; compose模版 -&gt; 添加</code>的步骤，将yml复制进去，修改对应的 <code>WAKATIME_APP_KEY</code> 和 <code>FTQQ_KEY</code>（需要去<a href="https://sct.ftqq.com">sever酱官网</a>&gt;注册获取），配置数据库的公网地址、端口号、账号和密码后，点击确定后保存。<br />
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.sa.net/2024/03/13/hv9sAFrXiotQqKT.png" alt="" /></p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3&quot;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">wakatime-sync:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">wf2311/wakatime-sync:1.0</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">wakatime-sync</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">JAVA_OPTS=-Xmx256m</span> <span class="string">-Xms64m</span> <span class="string">-Xss256k</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">SERVER_PORT=3040</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">WAKATIME_APP_KEY=&lt;WAKATIME_APP_KEY&gt;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">WAKATIME_PROXY_URL=false</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">WAKATIME_FTQQ_KEY=&lt;WAKATIME_FTQQ_KEY&gt;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">WAKATIME_DINGDING_KEY=&lt;WAKATIME_DINGDING_KEY&gt;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">START_DAY=2016-02-01</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">MYSQL_URL=jdbc:mysql://&lt;ip:port&gt;/wakatime?characterEncoding=utf8&amp;useUnicode=true&amp;useSSL=false&amp;allowPublicKeyRetrieval=true&amp;serverTimezone=PRC</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">MYSQL_USERNAME=wakatime</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">MYSQL_PASSWORD=123456</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">~/Share/logs/wakatime-sync/:/application/logs</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;3040:3040&quot;</span></span><br></pre></td></tr></table></figure>
<p>3、点击 <code>compose -&gt; 添加compose项目</code>，选择对应模版后点击添加，再查看容器列表，确定镜像是否启动，正常情况下，每天早上9点就会推送昨天的wakatime数据。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.sa.net/2024/03/13/G79SkxyO1iYrJF6.png" alt="" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.sa.net/2024/03/13/yfOFqSvrt56AM9B.png" alt="" /></p>
<div class="note warning flat"><p>如果docker日志中出现 <code>unknownhost</code> 的报错，请注意配置服务器的host，在<code>/etc/host</code>文件中添加对应的ip，之后刷新DNS。比如:<br />
143.198.244.187    <a href="http://wakatime.com">wakatime.com</a><br />
49.233.102.57    <a href="http://sc.ftqq.com">sc.ftqq.com</a></p>
</div>
<div class="note primary flat"><p><strong>建议使用<code>docker-compose</code>的方式</strong><br />
个人使用<code>docker run</code>的命令一直报错，手动建文件夹给777都没用，使用<code>docker-compose.yml</code>直接成功🎉🎉🎉</p>
</div>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.sa.net/2024/03/13/Jwu5v8iG179dUQH.png" alt="" /></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker: Error response from daemon: failed to create shim task: OCI runtime create failed: runc create failed: unable to start container process: error during container init: error mounting &quot;/root/logs/wakatime-sync&quot; to rootfs at &quot;/application/logs&quot;: open o_path procfd: open /var/lib/docker/overlay2/c249cef5b49bbe5e8395baf3618bd7dcdc995741016f2da57cc055734002d6be/merged/application/logs: not a directory: unknown: Are you trying to mount a directory onto a file (or vice-versa)? Check if the specified host path exists and is the expected type.</span><br></pre></td></tr></table></figure>
<h3 id="参考链接-2"><a class="markdownIt-Anchor" href="#参考链接-2"></a> 参考链接</h3>
<div class="tag link"><a class="link-card" title="wakatime-sync" href="https://gitee.com/wf2311/wakatime-sync"><div class="left"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/link.png"/></div><div class="right"><p class="text">wakatime-sync</p><p class="url">https://gitee.com/wf2311/wakatime-sync</p></div></a></div>
<h2 id="github主页美化使用css"><a class="markdownIt-Anchor" href="#github主页美化使用css"></a> github主页美化使用css</h2>
<h3 id="问题描述-3"><a class="markdownIt-Anchor" href="#问题描述-3"></a> 问题描述</h3>
<p>我在我的主页上画了一个盒子，但是提交后盒子的代码以文本显示，没有渲染出来。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.sa.net/2024/03/14/CkmeLzE29KtFwXP.png" alt="" /></p>
<h3 id="解决方案-3"><a class="markdownIt-Anchor" href="#解决方案-3"></a> 解决方案</h3>
<p>1、将盒子的<code>style</code>转换成<code>svg</code>，以引入图片的方式解决渲染问题</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">fill</span>=<span class="string">&quot;none&quot;</span> <span class="attr">viewBox</span>=<span class="string">&quot;0 0 800 200&quot;</span> <span class="attr">width</span>=<span class="string">&quot;100vw&quot;</span> <span class="attr">height</span>=<span class="string">&quot;180&quot;</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">foreignObject</span> <span class="attr">width</span>=<span class="string">&quot;100%&quot;</span> <span class="attr">height</span>=<span class="string">&quot;100%&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/1999/xhtml&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="comment">&lt;!-- 粘贴你的样式 --&gt;</span></span></span><br><span class="line"><span class="language-xml">      </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 粘贴你的盒子 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">foreignObject</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在readme文件中插入这个<code>svg</code>图片(<code>header.svg</code>)</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./header.svg&quot;</span> <span class="attr">width</span>=<span class="string">&quot;800&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>2、将盒子中的图片链接替换为<code>base64</code>，解决无法加载的问题</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Refused to load the image because it violates the following Content Security Policy directive: &quot;default-src &#x27;none&#x27;&quot;</span><br><span class="line"></span><br><span class="line">Blocked script execution in because the document&#x27;s frame is sandboxed - Angular application</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.sa.net/2024/03/13/2gnsTkfrEH3bPoZ.png" alt="" /></p>
<h3 id="参考链接-3"><a class="markdownIt-Anchor" href="#参考链接-3"></a> 参考链接</h3>
<div class="tag link"><a class="link-card" title="github css-in-readme-like-wat" href="https://github.com/sindresorhus/css-in-readme-like-wat?tab=readme-ov-file"><div class="left"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/link.png"/></div><div class="right"><p class="text">github css-in-readme-like-wat</p><p class="url">https://github.com/sindresorhus/css-in-readme-like-wat?tab=readme-ov-file</p></div></a></div>
<h2 id="合并ci中的shell命令"><a class="markdownIt-Anchor" href="#合并ci中的shell命令"></a> 合并CI中的shell命令</h2>
<p>书接上回，gitlab自动构建后，配置镜像对应的启动参数，补充对应的算法、垃圾回收日志、agent探针和对应debug模式参数配置</p>
<figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> openjdk:<span class="number">8</span>-jdk</span><br><span class="line"><span class="keyword">ENV</span> BASE_DIR=<span class="string">&quot;/app&quot;</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> <span class="variable">$BASE_DIR</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ENV</span> JAVA_HOME=<span class="string">&quot;/usr/local/openjdk-8/&quot;</span> \</span><br><span class="line">    JAVA=<span class="string">&quot;/usr/local/openjdk-8/bin/java&quot;</span> \</span><br><span class="line">    JVM_XMS=<span class="string">&quot;8g&quot;</span> \</span><br><span class="line">    JVM_XMX=<span class="string">&quot;8g&quot;</span> \</span><br><span class="line">    JVM_XMN=<span class="string">&quot;3g&quot;</span> \</span><br><span class="line">    JVM_MS=<span class="string">&quot;128m&quot;</span> \</span><br><span class="line">    JVM_MMS=<span class="string">&quot;320m&quot;</span> \</span><br><span class="line">    HUSSAR_DEBUG=<span class="string">&quot;n&quot;</span> \</span><br><span class="line">    SW_AGENT=<span class="string">&quot;y&quot;</span> \</span><br><span class="line">    SW_AGENT_PATH=<span class="string">&quot;/home/skywalking/agent/&quot;</span> \</span><br><span class="line">    TZ=<span class="string">&quot;Asia/Shanghai&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">rm</span> -f /etc/localtime \</span></span><br><span class="line"><span class="language-bash">&amp;&amp; <span class="built_in">ln</span> -sv /usr/share/zoneinfo/Asia/Shanghai /etc/localtime \</span></span><br><span class="line"><span class="language-bash">&amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;Asia/Shanghai&quot;</span> &gt; /etc/timezone</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#install linux command tool</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt-get update \</span></span><br><span class="line"><span class="language-bash">&amp;&amp; apt-get install -y vim  \</span></span><br><span class="line"><span class="language-bash">&amp;&amp; apt-get install -y sudo \</span></span><br><span class="line"><span class="language-bash">&amp;&amp; apt-get install -y nicstat \</span></span><br><span class="line"><span class="language-bash">&amp;&amp; apt-get install -y sysstat \</span></span><br><span class="line"><span class="language-bash">&amp;&amp; apt-get install -y inetutils-ping \</span></span><br><span class="line"><span class="language-bash">&amp;&amp; apt-get install -y net-tools \</span></span><br><span class="line"><span class="language-bash">&amp;&amp; apt-get install -y telnet</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 只复制一次 减少构建层数</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> ./target/test-application.jar ./startup.sh <span class="variable">$BASE_DIR</span>/</span></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">7778</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">chmod</span> +x startup.sh</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#RUN mkdir -p $SW_AGENT_PATH</span></span><br><span class="line"><span class="comment">#COPY agent $SW_AGENT_PATH</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="language-bash"> [<span class="string">&quot;sh&quot;</span>,<span class="string">&quot;startup.sh&quot;</span>]</span></span><br></pre></td></tr></table></figure>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"><span class="comment">#===========================================================================================</span></span><br><span class="line"><span class="comment"># JVM Configuration</span></span><br><span class="line"><span class="comment">#===========================================================================================</span></span><br><span class="line"><span class="comment"># 内存分配参数</span></span><br><span class="line">JAVA_OPT=<span class="string">&quot;<span class="variable">$&#123;JAVA_OPT&#125;</span> -server -Xms<span class="variable">$&#123;JVM_XMS&#125;</span> -Xmx<span class="variable">$&#123;JVM_XMX&#125;</span> -Xmn<span class="variable">$&#123;JVM_XMN&#125;</span> -XX:MetaspaceSize=<span class="variable">$&#123;JVM_MS&#125;</span> -XX:MaxMetaspaceSize=<span class="variable">$&#123;JVM_MMS&#125;</span>&quot;</span></span><br><span class="line"><span class="comment"># debug 模式下参数配置（传输、端口号、调试服务器、不在 JVM 启动时暂停，而是等待调试器连接后再开始执行。）</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$&#123;HUSSAR_DEBUG&#125;</span>&quot;</span> = <span class="string">&quot;y&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">  JAVA_OPT=<span class="string">&quot;<span class="variable">$&#123;JAVA_OPT&#125;</span> -Xdebug -Xrunjdwp:transport=dt_socket,address=12345,server=y,suspend=n&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="comment"># 异常处理机制 及 禁用大页面</span></span><br><span class="line">JAVA_OPT=<span class="string">&quot;<span class="variable">$&#123;JAVA_OPT&#125;</span> -XX:-OmitStackTraceInFastThrow -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=<span class="variable">$&#123;BASE_DIR&#125;</span>/logs/java_heapdump.hprof&quot;</span></span><br><span class="line">JAVA_OPT=<span class="string">&quot;<span class="variable">$&#123;JAVA_OPT&#125;</span> -XX:-UseLargePages&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#===========================================================================================</span></span><br><span class="line"><span class="comment"># Setting skywalking-agent properties</span></span><br><span class="line"><span class="comment"># agent 探针</span></span><br><span class="line"><span class="comment">#===========================================================================================</span></span><br><span class="line"><span class="comment">#if [ &quot;$&#123;SW_AGENT&#125;&quot; = &quot;y&quot; ]; then</span></span><br><span class="line"><span class="comment">#  JAVA_OPT=&quot;$&#123;JAVA_OPT&#125; -javaagent:$&#123;SW_AGENT_PATH&#125;/skywalking-agent.jar -DSW_AGENT_NAME=$&#123;SW_AGENT_NAME&#125; -DSW_AGENT_COLLECTOR_BACKEND_SERVICES=$&#123;SW_AGENT_COLLECTOR_BACKEND_SERVICES&#125;&quot;</span></span><br><span class="line"><span class="comment">#fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 垃圾回收 日志 轮换文件大小限制</span></span><br><span class="line"><span class="built_in">mkdir</span> -p <span class="string">&quot;<span class="variable">$&#123;BASE_DIR&#125;</span>/logs&quot;</span> &amp;&amp; <span class="built_in">touch</span> <span class="string">&quot;<span class="variable">$&#123;BASE_DIR&#125;</span>/logs/gc.log&quot;</span></span><br><span class="line">JAVA_OPT=<span class="string">&quot;<span class="variable">$&#123;JAVA_OPT&#125;</span> -Xloggc:<span class="variable">$&#123;BASE_DIR&#125;</span>/logs/gc.log -verbose:gc -XX:+PrintGCDetails -XX:+PrintGCDateStamps -XX:+PrintGCTimeStamps -XX:+UseGCLogFileRotation -XX:NumberOfGCLogFiles=10 -XX:GCLogFileSize=100M&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置文件编码 Redis等ip和密码 启动jar包</span></span><br><span class="line">JAVA_OPT=<span class="string">&quot;<span class="variable">$&#123;JAVA_OPT&#125;</span> -Dfile.encoding=utf-8&quot;</span></span><br><span class="line">JAVA_OPT=<span class="string">&quot;<span class="variable">$&#123;JAVA_OPT&#125;</span> -jar <span class="variable">$&#123;BASE_DIR&#125;</span>/test-application.jar&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;This server is starting, you can docker logs your container&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#if [ ! -n &quot;$WAIT_HOSTS&quot; ]; then</span></span><br><span class="line"><span class="comment">#  echo &quot;WAIT_HOSTS is not set!&quot;</span></span><br><span class="line"><span class="comment">#else</span></span><br><span class="line"><span class="comment">#  ./wait</span></span><br><span class="line"><span class="comment">#fi</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;JAVA_OPT&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">exec</span>  <span class="variable">$JAVA</span> <span class="variable">$&#123;JAVA_OPT&#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="syntax-errorend-of-file-unexpectedexpecting-then"><a class="markdownIt-Anchor" href="#syntax-errorend-of-file-unexpectedexpecting-then"></a> Syntax error:end of file unexpected(expecting “then”)</h2>
<p>编写<code>dockerfile</code>和<code>startup.sh</code>文件时windows和linux下换行符冲突的问题；构建镜像时<code>ENV</code>配置错误</p>
]]></content>
      <categories>
        <category>Bug周刊</category>
      </categories>
      <tags>
        <tag>Bug周刊</tag>
        <tag>随手记</tag>
      </tags>
  </entry>
  <entry>
    <title>空域增强</title>
    <url>/posts/16a1ae24.html</url>
    <content><![CDATA[<h2 id="问题"><a class="markdownIt-Anchor" href="#问题"></a> 问题</h2>
<p>利用所学知识，实现如下图像的变换</p>
 <img src = "https://s2.loli.net/2022/03/25/1uZhUYIO3dibzBj.png" width=500px>
<h2 id="分析"><a class="markdownIt-Anchor" href="#分析"></a> 分析</h2>
<p>图片所示为空域增强实例——骨骼扫描图像，用于检测骨骼感染等疾病</p>
<p>问题的目的是突出骨骼的边缘和细节变化部分，但是图片的灰度动态范围较窄，并且有很高的噪声，难于使用单一方法进行增强。若使用直方图均衡化，由于图片本身灰度动态范围较窄，再均衡化则灰度更少，效果不好；左图并非低对比度图像，具有高低亮度的信息，单纯使用对数变换或伽马变换也不合适，目的并非压制高亮度。只有强化边缘和细节之后，才能调整亮度，所以要组合多种变换。</p>
<p>具体操作过程如下：</p>
 <img src = "https://s2.loli.net/2022/03/25/4GuoS8inLM5WRPQ.png" width=600px>
 <img src = "https://s2.loli.net/2022/03/25/aPDv2FAIQeyOBER.png" width=600px>
<p>文字解释为：原图像A 经过拉普拉斯变换（二阶微分）得到图像B；图像A、B相加得到锐化后的图像C；</p>
<p>图像A经过sobel梯度处理（一阶微分）得到图像D；图像D经过平滑处理(3x3 或 5x5的滤波器)得到图像E；</p>
<p>图像C和图像E进行乘法变换得到图像F；图A和图F进行求和得到图像G；图像G进行幂律变换，最终的到结果。</p>
<p>分别使用Laplace和Sobel的原因是：在强化的同时，要抑制噪声Laplace对平滑部分噪声突显要强于梯度算子。梯度算子对边缘（灰度斜坡和台阶）平均响应高于laplace算子，对噪声等腰小于laplace算子。根据这个性质，用梯度算子抑制laplace噪声（保留灰度变换激烈部分的细节，抑制灰度变换平缓区域的噪声）</p>
<h2 id="代码"><a class="markdownIt-Anchor" href="#代码"></a> 代码</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> preprocessing</span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> skimage <span class="keyword">import</span> data, filters, io</span><br><span class="line"></span><br><span class="line"><span class="comment"># 函数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">im2double</span>(<span class="params">image</span>):</span><br><span class="line">    info = np.iinfo(image.dtype)              <span class="comment"># 获取输入图像的数据类型</span></span><br><span class="line">    <span class="keyword">return</span> image.astype(np.<span class="built_in">float</span>) / info.<span class="built_in">max</span>  <span class="comment"># 将所有值除以数据类型中最大可能的值</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">rgb2gray</span>(<span class="params">rgb</span>):</span><br><span class="line">    <span class="keyword">return</span> np.dot(rgb[..., :<span class="number">3</span>], [<span class="number">0.299</span>, <span class="number">0.587</span>, <span class="number">0.114</span>])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">image = cv2.imread(<span class="string">&#x27;image01.png&#x27;</span>)			<span class="comment"># 这里是原图的路径名</span></span><br><span class="line">image = im2double(image)</span><br><span class="line">image = rgb2gray(image)</span><br><span class="line">cv2.imshow(<span class="string">&quot;Origin&quot;</span>, image)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">kernel = np.array([[-<span class="number">1</span>, -<span class="number">1</span>, -<span class="number">1</span>], [-<span class="number">1</span>, <span class="number">8</span>, -<span class="number">1</span>], [-<span class="number">1</span>, -<span class="number">1</span>, -<span class="number">1</span>]])</span><br><span class="line">laplace = cv2.filter2D(image.astype(<span class="string">&#x27;float32&#x27;</span>), -<span class="number">1</span>,</span><br><span class="line">                       kernel, borderType=cv2.BORDER_CONSTANT)</span><br><span class="line"></span><br><span class="line">cv2.imshow(<span class="string">&#x27;laplacian&#x27;</span>, laplace)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 加法操作</span></span><br><span class="line">add_img = image + laplace</span><br><span class="line">cv2.imshow(<span class="string">&quot;add_img&quot;</span>, add_img)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 单方向x求梯度 sobel</span></span><br><span class="line">sobel_img = filters.sobel(image)</span><br><span class="line"><span class="comment"># sobel_img = cv2.Sobel(image, cv2.CV_64F, 0, 1) 出现的结果不一样</span></span><br><span class="line">cv2.imshow(<span class="string">&quot;sobel_img&quot;</span>, sobel_img)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用5*5均值滤波器平滑后的Sobel图像</span></span><br><span class="line">average_img = cv2.blur(sobel_img, (<span class="number">3</span>, <span class="number">3</span>)) <span class="comment">#可以更改核的大小</span></span><br><span class="line">cv2.imshow(<span class="string">&quot;average_img&quot;</span>, average_img)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 乘法运算 sobel平滑 和 拉普拉斯锐化</span></span><br><span class="line">mask_img = add_img * average_img</span><br><span class="line">cv2.imshow(<span class="string">&quot;mask_img&quot;</span>, mask_img)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 加法运算 原图 和 锐化加强mask_img </span></span><br><span class="line">sharp_img = image + mask_img</span><br><span class="line">cv2.imshow(<span class="string">&quot;sharp_img&quot;</span>, sharp_img)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 进行灰度幂律变换</span></span><br><span class="line">power_img = sharp_img ** <span class="number">0.5</span></span><br><span class="line">cv2.imshow(<span class="string">&quot;power_img&quot;</span>, power_img)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<h2 id="结果"><a class="markdownIt-Anchor" href="#结果"></a> 结果</h2>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/dHW1jUBwe98MoKg.png">
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/25/DsSvnH5YrlbBQie.png">
<p>注意：不同的第三方库 如 cv2 和 plt，它们的show函数显示的处理后的图像是不一样的，但效果相同。</p>
]]></content>
      <categories>
        <category>数字图像处理</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>数字图像处理</tag>
        <tag>空域增强</tag>
      </tags>
  </entry>
</search>
